<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>èªå½™é“å ´ â€” Vocabulary Stage 3</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700;900&family=Noto+Sans+JP:wght@300;400;500;700&family=Sarabun:wght@300;400;500;600;700&family=DM+Mono:ital,wght@0,400;0,500;1,400&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#060f0b;--bg2:#0d1a13;--bg3:#122018;--surface:#172a1f;--surface2:#1e3629;
  --border:#254733;--border2:#2f5c3f;
  --green:#3ddc84;--green2:#5ef5a0;--green3:#a8ffcc;
  --gold:#d4a83a;--gold2:#f0c84c;--amber:#e8a020;
  --red:#e05c4a;--red2:#ff7060;--blue:#4a9eff;--purple:#b07aff;
  --text:#c8f0d8;--text2:#7ab895;--text3:#3d6b52;
  --white:#e8fff2;
  --sw:220px;
  --r:12px;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Sarabun','Noto Sans JP',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 60% 40% at 80% 20%,rgba(61,220,132,.04),transparent),radial-gradient(ellipse 50% 60% at 10% 80%,rgba(212,168,58,.03),transparent);pointer-events:none;z-index:0}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}
/* SIDEBAR */
.sidebar{position:fixed;left:0;top:0;width:var(--sw);height:100vh;background:var(--bg2);border-right:1px solid var(--border);z-index:100;display:flex;flex-direction:column;overflow-y:auto}
.logo{padding:18px 16px 14px;border-bottom:1px solid var(--border)}
.logo-jp{font-family:'Noto Serif JP';font-size:20px;color:var(--green2);font-weight:900;letter-spacing:2px;text-shadow:0 0 20px rgba(61,220,132,.3)}
.logo-en{font-family:'DM Mono';font-size:9px;color:var(--text3);letter-spacing:3px;text-transform:uppercase;margin-top:3px}
.logo-badge{display:inline-block;background:linear-gradient(90deg,var(--gold),var(--amber));color:#000;font-size:9px;padding:2px 8px;border-radius:10px;margin-top:5px;font-weight:700;letter-spacing:1px}
.ng{padding:4px 0;border-bottom:1px solid var(--border)}
.ngl{font-size:8px;letter-spacing:2px;color:var(--text3);text-transform:uppercase;padding:7px 16px 3px;font-family:'DM Mono'}
.ni{display:flex;align-items:center;gap:8px;padding:9px 16px;cursor:pointer;font-size:12px;color:var(--text2);border-left:3px solid transparent;transition:all .2s;position:relative}
.ni:hover{background:var(--surface);color:var(--text)}.ni.active{background:linear-gradient(90deg,rgba(61,220,132,.08),transparent);color:var(--green2);border-left-color:var(--green)}
.nbadge{margin-left:auto;background:var(--red);color:#fff;font-size:9px;font-weight:700;padding:1px 6px;border-radius:8px;font-family:'DM Mono';animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
.ni .np{margin-left:auto;font-size:9px;background:var(--surface2);padding:2px 5px;border-radius:6px;color:var(--green);font-family:'DM Mono'}
/* MAIN */
.main{margin-left:var(--sw);min-height:100vh;position:relative;z-index:1}
.page{display:none;padding:26px;animation:fadeUp .3s ease}.page.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.phd{margin-bottom:22px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.phd h1{font-family:'Playfair Display';font-size:28px;color:var(--white);font-weight:700}
.phd .jp{font-size:12px;color:var(--green);margin-top:3px;font-family:'Noto Serif JP'}
.phd p{font-size:13px;color:var(--text2);margin-top:6px;line-height:1.7;max-width:640px}
/* CARDS */
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:18px}
.card+.card{margin-top:12px}
.ct{font-size:13px;font-weight:700;color:var(--white);margin-bottom:12px;display:flex;align-items:center;gap:8px}
/* GRID */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.g4{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
/* BOXES */
.ibox{background:rgba(61,220,132,.08);border:1px solid var(--border2);border-radius:8px;padding:11px 14px;font-size:13px;color:var(--green3);margin-bottom:12px;line-height:1.7}
.abox{background:rgba(212,168,58,.08);border:1px solid rgba(212,168,58,.3);border-radius:8px;padding:11px 14px;font-size:13px;color:var(--gold2);margin-bottom:12px;line-height:1.7}
.rbox{background:rgba(224,92,74,.08);border-left:3px solid var(--red);border-radius:0 8px 8px 0;padding:10px 14px;font-size:13px;color:#ffb0a0;margin:8px 0;line-height:1.7}
/* BTNS */
.btn{padding:9px 18px;border:none;border-radius:8px;cursor:pointer;font-family:'Sarabun';font-size:13px;font-weight:600;transition:all .2s}
.bgr{background:var(--green);color:#000}.bgr:hover{background:var(--green2);transform:translateY(-1px)}
.bgd{background:var(--gold);color:#000}.bgd:hover{background:var(--gold2)}
.brd{background:var(--red);color:#fff}.brd:hover{background:var(--red2)}
.bol{background:transparent;color:var(--text2);border:1px solid var(--border)}.bol:hover{border-color:var(--green);color:var(--green)}
/* TABS */
.tabs{display:flex;gap:0;margin-bottom:18px;border-bottom:1px solid var(--border);flex-wrap:wrap}
.tab{padding:8px 14px;font-size:12px;cursor:pointer;color:var(--text2);border-bottom:2px solid transparent;transition:all .2s;white-space:nowrap}
.tab:hover{color:var(--text)}.tab.active{color:var(--green);border-bottom-color:var(--green)}
.tp{display:none}.tp.active{display:block}
/* FLASHCARD */
.fcard{background:var(--surface);border:1px solid var(--border2);border-radius:18px;padding:32px;text-align:center;min-height:240px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;transition:all .3s;position:relative;overflow:hidden}
.fcard::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 60% 50% at 50% 0%,rgba(61,220,132,.06),transparent);pointer-events:none}
.fcard:hover{border-color:var(--green);box-shadow:0 0 30px rgba(61,220,132,.1)}
.fcard-jp{font-family:'Noto Serif JP';font-size:52px;color:var(--white);font-weight:900;line-height:1.2;text-shadow:0 0 30px rgba(61,220,132,.2)}
.fcard-kana{font-family:'Noto Sans JP';font-size:18px;color:var(--green);margin-top:4px}
.fcard-rom{font-family:'DM Mono';font-size:13px;color:var(--text2);margin-top:3px}
.fcard-th{font-size:18px;color:var(--white);margin-top:8px;line-height:1.5}
.fcard-type{display:inline-block;font-family:'DM Mono';font-size:9px;font-weight:700;letter-spacing:2px;padding:3px 10px;border-radius:10px;text-transform:uppercase}
.tag-noun{background:rgba(74,158,255,.2);color:var(--blue);border:1px solid rgba(74,158,255,.4)}
.tag-verb{background:rgba(61,220,132,.15);color:var(--green);border:1px solid rgba(61,220,132,.3)}
.tag-adj{background:rgba(176,122,255,.2);color:var(--purple);border:1px solid rgba(176,122,255,.3)}
.tag-adv{background:rgba(212,168,58,.15);color:var(--gold2);border:1px solid rgba(212,168,58,.3)}
.tag-expr{background:rgba(224,92,74,.15);color:var(--red2);border:1px solid rgba(224,92,74,.3)}
/* SRS BUTTONS */
.srs-btns{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:18px}
.srs-btn{flex:1;min-width:80px;max-width:120px;padding:10px 8px;border:none;border-radius:10px;cursor:pointer;font-family:'Sarabun';font-size:13px;font-weight:700;transition:all .2s;text-align:center}
.srs-again{background:rgba(224,92,74,.25);color:var(--red2);border:2px solid rgba(224,92,74,.4)}.srs-again:hover{background:rgba(224,92,74,.4);transform:translateY(-2px)}
.srs-hard{background:rgba(212,168,58,.2);color:var(--gold2);border:2px solid rgba(212,168,58,.3)}.srs-hard:hover{background:rgba(212,168,58,.35);transform:translateY(-2px)}
.srs-good{background:rgba(61,220,132,.2);color:var(--green2);border:2px solid rgba(61,220,132,.3)}.srs-good:hover{background:rgba(61,220,132,.35);transform:translateY(-2px)}
.srs-easy{background:rgba(74,158,255,.2);color:var(--blue);border:2px solid rgba(74,158,255,.3)}.srs-easy:hover{background:rgba(74,158,255,.35);transform:translateY(-2px)}
.srs-lbl{font-size:9px;color:inherit;opacity:.7;display:block;margin-top:2px;font-family:'DM Mono';font-weight:400}
/* VOCAB ROW */
.vrow{display:flex;align-items:center;gap:12px;padding:10px 14px;border-bottom:1px solid var(--border);transition:background .15s;cursor:pointer}
.vrow:hover{background:var(--surface2)}.vrow:last-child{border-bottom:none}
.vrow-jp{font-family:'Noto Serif JP';font-size:20px;color:var(--white);min-width:60px}
.vrow-kana{font-family:'Noto Sans JP';font-size:12px;color:var(--green);min-width:80px}
.vrow-th{font-size:13px;color:var(--text);flex:1}
.vrow-deck{font-family:'DM Mono';font-size:9px;color:var(--text3);min-width:60px;text-align:right}
.srs-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.dot-new{background:var(--blue)}.dot-learning{background:var(--gold)}.dot-young{background:var(--green)}.dot-mature{background:var(--text3)}
/* PBAR */
.pbar{height:5px;background:var(--surface2);border-radius:3px;overflow:hidden}
.pbf{height:100%;background:linear-gradient(90deg,var(--green),var(--green2));border-radius:3px;transition:width .4s}
/* QUIZ */
.qcard{background:var(--surface);border:1px solid var(--border2);border-radius:14px;padding:22px;margin-bottom:14px}
.qjp{font-family:'Noto Serif JP';font-size:38px;color:var(--white);text-align:center;margin:12px 0}
.qopts{display:flex;flex-wrap:wrap;gap:8px;margin:14px 0}
.qopt{flex:1;min-width:140px;padding:10px 14px;background:var(--surface2);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:13px;color:var(--text);transition:all .15s;text-align:center}
.qopt:hover{border-color:var(--green);background:rgba(61,220,132,.08)}.qopt.ok{border-color:var(--green2);background:rgba(61,220,132,.15);color:var(--green2)}.qopt.bad{border-color:var(--red2);background:rgba(224,92,74,.12);color:var(--red2)}
/* STAT */
.stat-num{font-family:'Playfair Display';font-size:42px;color:var(--green);font-weight:700;line-height:1}
.stat-lbl{font-size:11px;color:var(--text2);margin-top:4px;font-family:'DM Mono';text-transform:uppercase;letter-spacing:1px}
/* SEARCH */
.search{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);font-size:13px;font-family:'Sarabun';outline:none;transition:border .2s}
.search:focus{border-color:var(--green)}
/* NOTIF */
.notif{position:fixed;bottom:18px;right:18px;background:var(--surface);border:1px solid var(--border2);border-radius:10px;padding:10px 16px;font-size:13px;z-index:999;transform:translateY(60px);opacity:0;transition:all .3s;font-family:'DM Mono'}
.notif.show{transform:translateY(0);opacity:1}.notif.ok{border-color:var(--green2);color:var(--green2)}.notif.bad{border-color:var(--red2);color:var(--red2)}.notif.info{border-color:var(--gold);color:var(--gold2)}
/* DECK CARDS */
.deck-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:18px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
.deck-card::after{content:'';position:absolute;top:0;right:0;width:60px;height:60px;border-radius:0 12px 0 60px;opacity:.15}
.deck-card:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(0,0,0,.3)}
.deck-title{font-size:15px;font-weight:700;color:var(--white);margin:8px 0 4px}
.deck-count{font-family:'DM Mono';font-size:11px;color:var(--text2)}
.deck-bar{margin-top:10px}
/* ANKI STEPS */
.step{display:flex;gap:14px;margin-bottom:16px;align-items:flex-start}
.step-num{width:28px;height:28px;border-radius:50%;background:var(--green);color:#000;font-weight:900;font-size:13px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-family:'DM Mono'}
.step-body{flex:1}
.step-title{font-size:14px;font-weight:700;color:var(--white);margin-bottom:4px}
.step-desc{font-size:13px;color:var(--text2);line-height:1.7}
.link{color:var(--blue);text-decoration:none;font-family:'DM Mono';font-size:11px}.link:hover{color:var(--green2)}
/* FLIP */
.flip-outer{perspective:1000px;max-width:480px;margin:0 auto}
.flip-inner{position:relative;transform-style:preserve-3d;transition:transform .5s cubic-bezier(.4,.2,.2,1);min-height:240px}
.flip-inner.flipped{transform:rotateY(180deg)}
.flip-front,.flip-back{position:absolute;inset:0;backface-visibility:hidden;border-radius:18px}
.flip-back{transform:rotateY(180deg)}
/* TYPING */
.tinput{width:100%;background:var(--surface2);border:2px solid var(--border);border-radius:10px;padding:12px 16px;color:var(--white);font-family:'Noto Sans JP';font-size:18px;outline:none;text-align:center;transition:border .2s}
.tinput:focus{border-color:var(--green)}.tinput.ok{border-color:var(--green2);background:rgba(61,220,132,.1)}.tinput.bad{border-color:var(--red2);background:rgba(224,92,74,.08)}
@keyframes popIn{0%{transform:scale(.8);opacity:0}60%{transform:scale(1.05)}100%{transform:scale(1);opacity:1}}
@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}.pop{animation:popIn .3s ease}
.streak-fire{font-size:32px;animation:popIn .3s ease}
/* HEATMAP */
.heat-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:3px;margin-top:10px}
.heat-cell{height:16px;border-radius:3px;transition:transform .1s}.heat-cell:hover{transform:scale(1.3)}
/* SPEAK BUTTON */
.speak-btn{background:none;border:1px solid var(--border);color:var(--text2);border-radius:20px;padding:5px 12px;cursor:pointer;font-size:14px;transition:border-color .2s,color .2s;line-height:1}
.speak-btn:hover{border-color:var(--green);color:var(--green)}
@keyframes speakPulse{from{opacity:.6}to{opacity:1}}
.speak-btn.speaking{border-color:var(--green);color:var(--green);animation:speakPulse .6s ease infinite alternate}
</style>
</head>
<body>

<nav class="sidebar">
  <div class="logo">
    <div class="logo-jp">èªå½™é“å ´</div>
    <div class="logo-en">Vocab Dojo Â· Stage 3</div>
    <div class="logo-badge">SRS VOCABULARY SYSTEM</div>
  </div>
  <div class="ng">
    <div class="ngl">Overview</div>
    <div class="ni active" onclick="nav('home')"><span>ğŸŒ¿</span> à¹à¸”à¸Šà¸šà¸­à¸£à¹Œà¸”<span class="nbadge" id="due-badge" style="display:none">0</span></div>
    <div class="ni" onclick="nav('anki')"><span>ğŸ“±</span> à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Anki</div>
  </div>
  <div class="ng">
    <div class="ngl">à¹€à¸£à¸µà¸¢à¸™</div>
    <div class="ni" onclick="nav('srs')"><span>ğŸ”</span> SRS Review<span class="np" id="np-srs">0</span></div>
    <div class="ni" onclick="nav('learn')"><span>ğŸŒ±</span> à¹€à¸£à¸µà¸¢à¸™à¸à¸²à¸£à¹Œà¸”à¹ƒà¸«à¸¡à¹ˆ</div>
    <div class="ni" onclick="nav('browse')"><span>ğŸ“š</span> à¸„à¸¥à¸±à¸‡à¸„à¸³à¸¨à¸±à¸à¸—à¹Œ</div>
  </div>
  <div class="ng">
    <div class="ngl">à¸à¸¶à¸à¸‹à¹‰à¸­à¸¡</div>
    <div class="ni" onclick="nav('quiz')"><span>ğŸ¯</span> Quiz Modes</div>
    <div class="ni" onclick="nav('match')"><span>ğŸ§©</span> Matching Game</div>
    <div class="ni" onclick="nav('typing')"><span>âŒ¨ï¸</span> Typing Practice</div>
  </div>
  <div class="ng">
    <div class="ngl">Progress</div>
    <div class="ni" onclick="nav('stats')"><span>ğŸ“Š</span> à¸ªà¸–à¸´à¸•à¸´</div>
    <div class="ni" onclick="nav('decks')"><span>ğŸ—‚ï¸</span> Deck Manager</div>
  </div>
  <div class="ng" style="margin-top:auto;border-top:1px solid var(--border);padding:8px 0">
    <a class="ni" href="dashboard.html" onclick="localStorage.setItem('lastPage','vocab-stage3.html')" style="text-decoration:none;color:inherit">
      <span>ğŸ“Š</span>
      <span style="color:#e8547a;font-weight:600">Student Dashboard</span>
    </a>
    <a class="ni" href="index.html" style="text-decoration:none;color:inherit">
      <span>ğŸ </span>
      <span style="color:var(--text2)">â† Portal</span>
    </a>
  </div>
</nav>

<main class="main">

<!-- HOME -->
<div class="page active" id="page-home">
  <div class="phd"><h1>ğŸŒ¿ Vocabulary Stage 3</h1><div class="jp">èªå½™ â€” Goi Â· à¸„à¸³à¸¨à¸±à¸à¸—à¹Œ</div><p>à¸£à¸°à¸šà¸š SRS à¸Šà¹ˆà¸§à¸¢à¸—à¸šà¸—à¸§à¸™à¸„à¸³à¸¨à¸±à¸à¸—à¹Œà¹ƒà¸™à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡à¸—à¸µà¹ˆà¸ªà¸¸à¸” â€” à¹€à¸£à¸µà¸¢à¸™ 10-20 à¸„à¸³/à¸§à¸±à¸™ à¸ à¸²à¸¢à¹ƒà¸™ 3-6 à¹€à¸”à¸·à¸­à¸™à¸¡à¸µà¸„à¸³à¸à¸­ 1,500+ à¸„à¸³à¸­à¹ˆà¸²à¸™à¸¡à¸±à¸‡à¸‡à¸°à¹„à¸”à¹‰!</p></div>
  <div class="g2" style="margin-bottom:14px">
    <div class="card">
      <div class="ct">ğŸ“Š Today's Session</div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:14px">
        <div style="text-align:center"><div class="stat-num" id="h-due" style="color:var(--red2)">0</div><div class="stat-lbl">Due Today</div></div>
        <div style="text-align:center"><div class="stat-num" id="h-new" style="color:var(--blue)">0</div><div class="stat-lbl">New</div></div>
        <div style="text-align:center"><div class="stat-num" id="h-learned" style="color:var(--green)">0</div><div class="stat-lbl">Learned</div></div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn bgr" onclick="nav('srs')" style="flex:1">ğŸ” à¸—à¸šà¸—à¸§à¸™à¹€à¸¥à¸¢</button>
        <button class="btn bgd" onclick="nav('learn')" style="flex:1">ğŸŒ± à¹€à¸£à¸µà¸¢à¸™à¹ƒà¸«à¸¡à¹ˆ</button>
      </div>
    </div>
    <div class="card">
      <div class="ct">ğŸ”¥ Streak & Progress</div>
      <div style="display:flex;align-items:center;gap:18px;margin-bottom:12px">
        <div style="text-align:center"><div class="streak-fire" id="streak-icon">ğŸ”¥</div><div class="stat-num" id="streak-num" style="font-size:32px;color:var(--gold2)">0</div><div class="stat-lbl">Day Streak</div></div>
        <div style="flex:1">
          <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text2);margin-bottom:4px"><span>Total Learned</span><span id="h-total">0/300</span></div>
          <div class="pbar" style="margin-bottom:10px"><div class="pbf" id="h-prog-bar" style="width:0%"></div></div>
          <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text2);margin-bottom:4px"><span>Today's Goal (20 cards)</span><span id="h-goal">0/20</span></div>
          <div class="pbar"><div class="pbf" id="h-goal-bar" style="width:0%;background:linear-gradient(90deg,var(--gold),var(--gold2))"></div></div>
        </div>
      </div>
    </div>
  </div>
  <div class="g2" style="margin-bottom:14px">
    <div class="card"><div class="ct">ğŸ—‚ï¸ Deck Overview</div><div id="h-decks"></div></div>
    <div class="card"><div class="ct">ğŸ’¡ SRS à¸„à¸·à¸­à¸­à¸°à¹„à¸£?</div>
      <div style="font-size:13px;color:var(--text2);line-height:1.8">
        <b style="color:var(--white)">Spaced Repetition System</b> â€” à¸£à¸°à¸šà¸šà¸—à¸šà¸—à¸§à¸™à¸•à¸²à¸¡à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡<br><br>
        ğŸ§  à¸ªà¸¡à¸­à¸‡à¸ˆà¸°à¸ˆà¸³à¹„à¸”à¹‰à¸”à¸µà¸ªà¸¸à¸”à¹€à¸¡à¸·à¹ˆà¸­à¸—à¸šà¸—à¸§à¸™ <b style="color:var(--green)">à¸à¹ˆà¸­à¸™à¸—à¸µà¹ˆà¸ˆà¸°à¸¥à¸·à¸¡</b><br>
        â±ï¸ à¸à¸²à¸£à¹Œà¸”à¸—à¸µà¹ˆà¸ˆà¸³à¹„à¸”à¹‰à¸”à¸µ â†’ à¸—à¸šà¸—à¸§à¸™à¸™à¸²à¸™à¸‚à¸¶à¹‰à¸™<br>
        âŒ à¸à¸²à¸£à¹Œà¸”à¸—à¸µà¹ˆà¸•à¸­à¸šà¸œà¸´à¸” â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹€à¸£à¹‡à¸§à¸‚à¸¶à¹‰à¸™<br><br>
        à¹€à¸£à¸µà¸¢à¸™à¸§à¸±à¸™à¸¥à¸° 15-20 à¸™à¸²à¸—à¸µ à¸”à¸µà¸à¸§à¹ˆà¸²à¸™à¸±à¹ˆà¸‡à¸—à¹ˆà¸­à¸‡à¸—à¸µà¹€à¸”à¸µà¸¢à¸§ 2 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡!
      </div>
    </div>
  </div>
  <div class="card"><div class="ct">ğŸ—ºï¸ Vocabulary Roadmap à¸ªà¸¹à¹ˆ 2,000 à¸„à¸³</div>
    <div class="g4" style="margin-top:8px" id="h-road"></div>
  </div>
</div>

<!-- ANKI GUIDE -->
<div class="page" id="page-anki">
  <div class="phd"><h1>ğŸ“± à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Anki</h1><div class="jp">ã‚¢ãƒ³ã‚­ â€” à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­ SRS à¸—à¸µà¹ˆà¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”à¹ƒà¸™à¹‚à¸¥à¸</div><p>Anki à¸„à¸·à¸­à¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œ SRS à¸Ÿà¸£à¸µà¸—à¸µà¹ˆà¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™à¸—à¸±à¹ˆà¸§à¹‚à¸¥à¸à¹ƒà¸Šà¹‰ à¸•à¹‰à¸­à¸‡à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸„à¸§à¸šà¸„à¸¹à¹ˆà¸à¸±à¸šà¹€à¸§à¹‡à¸šà¸™à¸µà¹‰</p></div>
  <div class="g2" style="margin-bottom:14px">
    <div class="card" style="border-color:var(--border2)"><div class="ct">ğŸ“¥ Download Anki</div>
      <div class="step"><div class="step-num">1</div><div class="step-body"><div class="step-title">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” Anki (à¸Ÿà¸£à¸µ)</div><div class="step-desc">à¹„à¸›à¸—à¸µà¹ˆ <a class="link" href="https://apps.ankiweb.net" target="_blank">apps.ankiweb.net</a><br>à¸£à¸­à¸‡à¸£à¸±à¸š Windows, Mac, Linux, iOS, Android</div></div></div>
      <div class="step"><div class="step-num">2</div><div class="step-body"><div class="step-title">à¸ªà¸£à¹‰à¸²à¸‡à¸šà¸±à¸à¸Šà¸µ AnkiWeb (à¸Ÿà¸£à¸µ)</div><div class="step-desc">Sync à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ<br>à¹„à¸›à¸—à¸µà¹ˆ <a class="link" href="https://ankiweb.net" target="_blank">ankiweb.net</a></div></div></div>
      <div class="step"><div class="step-num">3</div><div class="step-body"><div class="step-title">Download Deck à¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³</div><div class="step-desc">à¹ƒà¸Šà¹‰ Anki Shared Decks à¸«à¸£à¸·à¸­à¸¥à¸´à¸‡à¸à¹Œà¸”à¹‰à¸²à¸™à¸‚à¸§à¸²</div></div></div>
      <div class="step"><div class="step-num">4</div><div class="step-body"><div class="step-title">à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Daily Limit</div><div class="step-desc">New cards: 10-20/day<br>Review limit: 100-200/day (à¸­à¸¢à¹ˆà¸²à¸•à¸±à¹‰à¸‡à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™)</div></div></div>
    </div>
    <div>
      <div class="card" style="margin-bottom:12px"><div class="ct">ğŸ† Deck à¹à¸™à¸°à¸™à¸³</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="background:var(--bg3);border:1px solid var(--border2);border-radius:10px;padding:12px">
            <div style="font-size:13px;font-weight:700;color:var(--green2)">â­ Kaishi 1.5k</div>
            <div style="font-size:12px;color:var(--text2);margin-top:3px;line-height:1.6">Deck à¹ƒà¸«à¸¡à¹ˆà¸¥à¹ˆà¸²à¸ªà¸¸à¸” à¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸” à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡ 1,500 à¸„à¸³à¸à¸šà¸šà¹ˆà¸­à¸¢ à¸¡à¸µ audio, context sentence à¸„à¸£à¸š</div>
            <a class="link" href="https://ankiweb.net/shared/info/1196762551" target="_blank" style="margin-top:4px;display:block">â†’ ankiweb.net (Kaishi 1.5k)</a>
          </div>
          <div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:12px">
            <div style="font-size:13px;font-weight:700;color:var(--gold2)">Core 2000/6000</div>
            <div style="font-size:12px;color:var(--text2);margin-top:3px;line-height:1.6">Classic deck â€” 2,000 à¸„à¸³à¸à¸šà¸šà¹ˆà¸­à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸” à¸¡à¸µ audio à¸„à¸£à¸š à¹ƒà¸Šà¹‰à¸à¸±à¸™à¸¡à¸²à¸¢à¸²à¸§à¸™à¸²à¸™</div>
            <a class="link" href="https://ankiweb.net/shared/info/1237389412" target="_blank" style="margin-top:4px;display:block">â†’ ankiweb.net (Core 2000)</a>
          </div>
          <div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:12px">
            <div style="font-size:13px;font-weight:700;color:var(--blue)">JLPT Vocab N5-N3</div>
            <div style="font-size:12px;color:var(--text2);margin-top:3px;line-height:1.6">à¹€à¸™à¹‰à¸™à¸•à¸£à¸‡ JLPT à¸”à¸µà¸¡à¸²à¸à¸–à¹‰à¸²à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸ªà¸­à¸š N5-N3 + à¸­à¹ˆà¸²à¸™à¸¡à¸±à¸‡à¸‡à¸°</div>
            <a class="link" href="https://ankiweb.net/shared/info/2087068651" target="_blank" style="margin-top:4px;display:block">â†’ ankiweb.net (JLPT N5-N3)</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card"><div class="ct">âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Anki à¹ƒà¸«à¹‰à¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”</div>
    <div class="g3">
      <div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:14px"><div style="font-size:13px;font-weight:700;color:var(--white);margin-bottom:8px">ğŸ“… Daily Settings</div><div style="font-size:12px;color:var(--text2);line-height:1.8">New cards: <b style="color:var(--green)">15/day</b><br>Reviews: <b style="color:var(--green)">100/day</b><br>à¹€à¸£à¸µà¸¢à¸™à¸—à¸¸à¸à¸§à¸±à¸™ > à¹€à¸£à¸µà¸¢à¸™à¸™à¸²à¸™à¹† à¸šà¸²à¸‡à¸§à¸±à¸™</div></div>
      <div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:14px"><div style="font-size:13px;font-weight:700;color:var(--white);margin-bottom:8px">ğŸ¯ à¸•à¸­à¸šà¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£</div><div style="font-size:12px;color:var(--text2);line-height:1.8">Again = à¸¥à¸·à¸¡à¸ªà¸™à¸´à¸—<br>Hard = à¸ˆà¸³à¹„à¸”à¹‰à¹à¸•à¹ˆà¸¢à¸²à¸<br>Good = à¸ˆà¸³à¹„à¸”à¹‰à¸›à¸à¸•à¸´<br>Easy = à¸£à¸¹à¹‰à¸”à¸µà¸¡à¸²à¸</div></div>
      <div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:14px"><div style="font-size:13px;font-weight:700;color:var(--white);margin-bottom:8px">ğŸ“± Mobile Tips</div><div style="font-size:12px;color:var(--text2);line-height:1.8">AnkiDroid (Android): à¸Ÿà¸£à¸µ<br>AnkiMobile (iOS): à¸ˆà¹ˆà¸²à¸¢à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§<br>Sync à¸œà¹ˆà¸²à¸™ AnkiWeb à¸Ÿà¸£à¸µ</div></div>
    </div>
    <div class="abox" style="margin-top:14px">ğŸ’¡ <b>Tip:</b> à¸—à¸³ SRS à¸•à¸­à¸™à¹€à¸Šà¹‰à¸² à¸à¹ˆà¸­à¸™à¹€à¸Šà¹‡à¸„à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ â€” à¸ªà¸¡à¸­à¸‡à¸ªà¸”à¹ƒà¸«à¸¡à¹ˆà¸ˆà¸³à¹„à¸”à¹‰à¸”à¸µà¸à¸§à¹ˆà¸² à¹à¸¥à¸°à¹€à¸›à¹‡à¸™ routine à¸—à¸µà¹ˆ stick à¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸”</div>
  </div>
</div>

<!-- SRS REVIEW -->
<div class="page" id="page-srs">
  <div class="phd"><h1>ğŸ” SRS Review</h1><div class="jp">å¾©ç¿’ â€” à¸—à¸šà¸—à¸§à¸™à¸à¸²à¸£à¹Œà¸”à¸—à¸µà¹ˆà¸–à¸¶à¸‡à¹€à¸§à¸¥à¸²</div></div>
  <div id="srs-wrap"></div>
</div>

<!-- LEARN NEW -->
<div class="page" id="page-learn">
  <div class="phd"><h1>ğŸŒ± à¹€à¸£à¸µà¸¢à¸™à¸à¸²à¸£à¹Œà¸”à¹ƒà¸«à¸¡à¹ˆ</h1><div class="jp">æ–°ã—ã„å˜èª â€” à¸„à¸³à¸¨à¸±à¸à¸—à¹Œà¹ƒà¸«à¸¡à¹ˆà¸§à¸±à¸™à¸™à¸µà¹‰</div></div>
  <div id="learn-wrap"></div>
</div>

<!-- BROWSE -->
<div class="page" id="page-browse">
  <div class="phd"><h1>ğŸ“š à¸„à¸¥à¸±à¸‡à¸„à¸³à¸¨à¸±à¸à¸—à¹Œ</h1><div class="jp">å˜èªå¸³ â€” à¸”à¸¹à¸„à¸³à¸¨à¸±à¸à¸—à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</div></div>
  <div style="display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap">
    <input class="search" id="br-search" placeholder="ğŸ” à¸„à¹‰à¸™à¸«à¸² à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ / Thai / romaji..." style="flex:2;min-width:220px" oninput="renderBrowse()">
    <select class="search" id="br-deck" style="flex:1;min-width:140px" onchange="renderBrowse()">
      <option value="">à¸—à¸¸à¸ Deck</option>
    </select>
    <select class="search" id="br-type" style="flex:1;min-width:120px" onchange="renderBrowse()">
      <option value="">à¸—à¸¸à¸à¸›à¸£à¸°à¹€à¸ à¸—</option>
      <option value="noun">åè© Noun</option>
      <option value="verb">å‹•è© Verb</option>
      <option value="adj">å½¢å®¹è© Adj</option>
      <option value="adv">å‰¯è© Adv</option>
      <option value="expr">è¡¨ç¾ Expr</option>
    </select>
  </div>
  <div class="card" style="padding:0;overflow:hidden"><div id="br-list"></div></div>
  <div style="font-size:12px;color:var(--text3);margin-top:8px;font-family:'DM Mono'" id="br-count"></div>
</div>

<!-- QUIZ -->
<div class="page" id="page-quiz">
  <div class="phd"><h1>ğŸ¯ Quiz Modes</h1><div class="jp">ã‚¯ã‚¤ã‚º â€” à¸—à¸”à¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰</div></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'qz','mc')">ğŸ² Multiple Choice</div>
    <div class="tab" onclick="stab(this,'qz','rev')">ğŸ”„ Reverse (Thaiâ†’JP)</div>
    <div class="tab" onclick="stab(this,'qz','speed')">âš¡ Speed Round</div>
  </div>
  <div class="tp active" id="qz-mc"><div id="mc-wrap"></div></div>
  <div class="tp" id="qz-rev"><div id="rev-wrap"></div></div>
  <div class="tp" id="qz-speed"><div id="speed-wrap"></div></div>
</div>

<!-- MATCHING -->
<div class="page" id="page-match">
  <div class="phd"><h1>ğŸ§© Matching Game</h1><div class="jp">ãƒãƒƒãƒãƒ³ã‚°ã‚²ãƒ¼ãƒ  â€” à¸ˆà¸±à¸šà¸„à¸¹à¹ˆà¸„à¸³à¸¨à¸±à¸à¸—à¹Œ</div></div>
  <div id="match-wrap"></div>
</div>

<!-- TYPING -->
<div class="page" id="page-typing">
  <div class="phd"><h1>âŒ¨ï¸ Typing Practice</h1><div class="jp">ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ç·´ç¿’ â€” à¸à¸´à¸¡à¸à¹Œ romaji à¹ƒà¸«à¹‰à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</div></div>
  <div id="type-wrap"></div>
</div>

<!-- STATS -->
<div class="page" id="page-stats">
  <div class="phd"><h1>ğŸ“Š à¸ªà¸–à¸´à¸•à¸´à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™</h1><div class="jp">å­¦ç¿’çµ±è¨ˆ â€” Learning Statistics</div></div>
  <div class="g3" style="margin-bottom:14px" id="stat-top"></div>
  <div class="g2">
    <div class="card"><div class="ct">ğŸ“ˆ SRS Distribution</div><div id="stat-dist"></div></div>
    <div class="card"><div class="ct">ğŸ—‚ï¸ Deck Progress</div><div id="stat-deck"></div></div>
  </div>
  <div class="card" style="margin-top:14px"><div class="ct">ğŸ“… Activity (12 à¹€à¸”à¸·à¸­à¸™)</div><div class="heat-grid" id="heat"></div><div style="display:flex;gap:8px;align-items:center;margin-top:8px;font-size:11px;color:var(--text3)"><span>à¸™à¹‰à¸­à¸¢</span><div style="background:#122018;width:12px;height:12px;border-radius:2px"></div><div style="background:#1e4a2a;width:12px;height:12px;border-radius:2px"></div><div style="background:#2d7a40;width:12px;height:12px;border-radius:2px"></div><div style="background:var(--green);width:12px;height:12px;border-radius:2px"></div><span>à¹€à¸¢à¸­à¸°</span></div></div>
</div>

<!-- DECKS -->
<div class="page" id="page-decks">
  <div class="phd"><h1>ğŸ—‚ï¸ Deck Manager</h1><div class="jp">ãƒ‡ãƒƒã‚­ç®¡ç† â€” à¸ˆà¸±à¸”à¸à¸²à¸£ Deck</div></div>
  <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px" id="deck-list"></div>
  <div class="abox" style="margin-top:14px">ğŸ’¡ à¸„à¸¥à¸´à¸à¸—à¸µà¹ˆ Deck à¹€à¸à¸·à¹ˆà¸­à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” à¸«à¸£à¸·à¸­à¹„à¸›à¸—à¸µà¹ˆ Browse à¹€à¸à¸·à¹ˆà¸­à¸”à¸¹à¸„à¸³à¸¨à¸±à¸à¸—à¹Œà¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸° Deck</div>
</div>

</main>
<div class="notif" id="notif"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEB SPEECH API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function speakJP(text) {
  if (!window.speechSynthesis || !text) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'ja-JP';
  u.rate = 0.85;
  u.pitch = 1;
  window.speechSynthesis.speak(u);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VOCABULARY DATA â€” 250+ words across 5 decks
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DECKS=[
  {id:'kaishi',name:'Kaishi 1.5k',icon:'â­',col:'#3ddc84',desc:'à¸„à¸³à¸à¸šà¸šà¹ˆà¸­à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™'},
  {id:'n5',name:'JLPT N5',icon:'ğŸ”µ',col:'#4a9eff',desc:'à¸à¸·à¹‰à¸™à¸à¸²à¸™à¸ªà¸¸à¸”à¸‚à¸­à¸‡à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ N5'},
  {id:'n4',name:'JLPT N4',icon:'ğŸŸ¡',col:'#f0c84c',desc:'à¸à¸¥à¸²à¸‡à¸£à¸°à¸”à¸±à¸š N4 â€” à¸„à¸³à¸à¸šà¸šà¹ˆà¸­à¸¢à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°'},
  {id:'manga',name:'Manga & Anime',icon:'ğŸ“•',col:'#ff7060',desc:'à¸„à¸³ slang à¹à¸¥à¸° expression à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°'},
  {id:'daily',name:'Daily Life',icon:'ğŸ ',col:'#b07aff',desc:'à¸„à¸³à¹ƒà¸Šà¹‰à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ à¸£à¹‰à¸²à¸™à¸„à¹‰à¸² à¸­à¸²à¸«à¸²à¸£'},
];

// Format: {id, deck, jp, kana, rom, th, type, level}
// types: noun verb adj adv expr
const VOCAB=[
// â”€â”€â”€ KAISHI STARTER â”€â”€â”€
{id:'k001',deck:'kaishi',jp:'äºº',kana:'ã²ã¨',rom:'hito',th:'à¸„à¸™, à¸¡à¸™à¸¸à¸©à¸¢à¹Œ',type:'noun',level:'N5'},
{id:'k002',deck:'kaishi',jp:'æ—¥æœ¬',kana:'ã«ã»ã‚“',rom:'nihon',th:'à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ (à¸›à¸£à¸°à¹€à¸—à¸¨)',type:'noun',level:'N5'},
{id:'k003',deck:'kaishi',jp:'ä»Š',kana:'ã„ã¾',rom:'ima',th:'à¸•à¸­à¸™à¸™à¸µà¹‰, à¸‚à¸“à¸°à¸™à¸µà¹‰',type:'adv',level:'N5'},
{id:'k004',deck:'kaishi',jp:'ä½•',kana:'ãªã«',rom:'nani',th:'à¸­à¸°à¹„à¸£',type:'noun',level:'N5'},
{id:'k005',deck:'kaishi',jp:'è¨€ã†',kana:'ã„ã†',rom:'iu',th:'à¸à¸¹à¸”, à¸šà¸­à¸',type:'verb',level:'N5'},
{id:'k006',deck:'kaishi',jp:'è¦‹ã‚‹',kana:'ã¿ã‚‹',rom:'miru',th:'à¸”à¸¹, à¸¡à¸­à¸‡',type:'verb',level:'N5'},
{id:'k007',deck:'kaishi',jp:'æ¥ã‚‹',kana:'ãã‚‹',rom:'kuru',th:'à¸¡à¸²',type:'verb',level:'N5'},
{id:'k008',deck:'kaishi',jp:'è¡Œã',kana:'ã„ã',rom:'iku',th:'à¹„à¸›',type:'verb',level:'N5'},
{id:'k009',deck:'kaishi',jp:'é£Ÿã¹ã‚‹',kana:'ãŸã¹ã‚‹',rom:'taberu',th:'à¸à¸´à¸™',type:'verb',level:'N5'},
{id:'k010',deck:'kaishi',jp:'é£²ã‚€',kana:'ã®ã‚€',rom:'nomu',th:'à¸”à¸·à¹ˆà¸¡',type:'verb',level:'N5'},
{id:'k011',deck:'kaishi',jp:'å¤§ãã„',kana:'ãŠãŠãã„',rom:'ookii',th:'à¹ƒà¸«à¸à¹ˆ',type:'adj',level:'N5'},
{id:'k012',deck:'kaishi',jp:'å°ã•ã„',kana:'ã¡ã„ã•ã„',rom:'chiisai',th:'à¹€à¸¥à¹‡à¸',type:'adj',level:'N5'},
{id:'k013',deck:'kaishi',jp:'å¤šã„',kana:'ãŠãŠã„',rom:'ooi',th:'à¹€à¸¢à¸­à¸°, à¸¡à¸²à¸',type:'adj',level:'N5'},
{id:'k014',deck:'kaishi',jp:'å°‘ãªã„',kana:'ã™ããªã„',rom:'sukunai',th:'à¸™à¹‰à¸­à¸¢',type:'adj',level:'N5'},
{id:'k015',deck:'kaishi',jp:'å¥½ã',kana:'ã™ã',rom:'suki',th:'à¸Šà¸­à¸š',type:'adj',level:'N5'},
{id:'k016',deck:'kaishi',jp:'å«Œã„',kana:'ãã‚‰ã„',rom:'kirai',th:'à¹„à¸¡à¹ˆà¸Šà¸­à¸š, à¹€à¸à¸¥à¸µà¸¢à¸”',type:'adj',level:'N5'},
{id:'k017',deck:'kaishi',jp:'è‰¯ã„',kana:'ã„ã„',rom:'ii',th:'à¸”à¸µ',type:'adj',level:'N5'},
{id:'k018',deck:'kaishi',jp:'æ‚ªã„',kana:'ã‚ã‚‹ã„',rom:'warui',th:'à¹à¸¢à¹ˆ, à¹„à¸¡à¹ˆà¸”à¸µ',type:'adj',level:'N5'},
{id:'k019',deck:'kaishi',jp:'åˆ†ã‹ã‚‹',kana:'ã‚ã‹ã‚‹',rom:'wakaru',th:'à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ, à¸£à¸¹à¹‰',type:'verb',level:'N5'},
{id:'k020',deck:'kaishi',jp:'æ€ã†',kana:'ãŠã‚‚ã†',rom:'omou',th:'à¸„à¸´à¸”à¸§à¹ˆà¸², à¸£à¸¹à¹‰à¸ªà¸¶à¸',type:'verb',level:'N5'},
{id:'k021',deck:'kaishi',jp:'æ™‚é–“',kana:'ã˜ã‹ã‚“',rom:'jikan',th:'à¹€à¸§à¸¥à¸²',type:'noun',level:'N5'},
{id:'k022',deck:'kaishi',jp:'å ´æ‰€',kana:'ã°ã—ã‚‡',rom:'basho',th:'à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆ',type:'noun',level:'N4'},
{id:'k023',deck:'kaishi',jp:'æ°—æŒã¡',kana:'ãã‚‚ã¡',rom:'kimochi',th:'à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸',type:'noun',level:'N4'},
{id:'k024',deck:'kaishi',jp:'å£°',kana:'ã“ãˆ',rom:'koe',th:'à¹€à¸ªà¸µà¸¢à¸‡ (à¸‚à¸­à¸‡à¸„à¸™)',type:'noun',level:'N4'},
{id:'k025',deck:'kaishi',jp:'é¡”',kana:'ã‹ãŠ',rom:'kao',th:'à¹ƒà¸šà¸«à¸™à¹‰à¸²',type:'noun',level:'N5'},
{id:'k026',deck:'kaishi',jp:'ç›®',kana:'ã‚',rom:'me',th:'à¸•à¸²',type:'noun',level:'N5'},
{id:'k027',deck:'kaishi',jp:'æ‰‹',kana:'ã¦',rom:'te',th:'à¸¡à¸·à¸­',type:'noun',level:'N5'},
{id:'k028',deck:'kaishi',jp:'å¿ƒ',kana:'ã“ã“ã‚',rom:'kokoro',th:'à¸«à¸±à¸§à¹ƒà¸ˆ, à¸ˆà¸´à¸•à¹ƒà¸ˆ',type:'noun',level:'N4'},
{id:'k029',deck:'kaishi',jp:'åŠ›',kana:'ã¡ã‹ã‚‰',rom:'chikara',th:'à¸à¸¥à¸±à¸‡, à¸„à¸§à¸²à¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–',type:'noun',level:'N4'},
{id:'k030',deck:'kaishi',jp:'å¤¢',kana:'ã‚†ã‚',rom:'yume',th:'à¸à¸±à¸™, à¸„à¸§à¸²à¸¡à¸à¸±à¸™',type:'noun',level:'N4'},
// â”€â”€â”€ N5 VOCAB â”€â”€â”€
{id:'n001',deck:'n5',jp:'ç§',kana:'ã‚ãŸã—',rom:'watashi',th:'à¸‰à¸±à¸™ (à¸ªà¸¸à¸ à¸²à¸)',type:'noun',level:'N5'},
{id:'n002',deck:'n5',jp:'ã‚ãªãŸ',kana:'ã‚ãªãŸ',rom:'anata',th:'à¸„à¸¸à¸“',type:'noun',level:'N5'},
{id:'n003',deck:'n5',jp:'å½¼',kana:'ã‹ã‚Œ',rom:'kare',th:'à¹€à¸‚à¸² (à¸œà¸¹à¹‰à¸Šà¸²à¸¢) / à¹à¸Ÿà¸™',type:'noun',level:'N5'},
{id:'n004',deck:'n5',jp:'å½¼å¥³',kana:'ã‹ã®ã˜ã‚‡',rom:'kanojo',th:'à¹€à¸˜à¸­ (à¸œà¸¹à¹‰à¸«à¸à¸´à¸‡) / à¹à¸Ÿà¸™',type:'noun',level:'N5'},
{id:'n005',deck:'n5',jp:'å®¶æ—',kana:'ã‹ãã',rom:'kazoku',th:'à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§',type:'noun',level:'N5'},
{id:'n006',deck:'n5',jp:'å‹é”',kana:'ã¨ã‚‚ã ã¡',rom:'tomodachi',th:'à¹€à¸à¸·à¹ˆà¸­à¸™',type:'noun',level:'N5'},
{id:'n007',deck:'n5',jp:'å…ˆç”Ÿ',kana:'ã›ã‚“ã›ã„',rom:'sensei',th:'à¸„à¸£à¸¹, à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œ',type:'noun',level:'N5'},
{id:'n008',deck:'n5',jp:'å­¦ç”Ÿ',kana:'ãŒãã›ã„',rom:'gakusei',th:'à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™, à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²',type:'noun',level:'N5'},
{id:'n009',deck:'n5',jp:'å­¦æ ¡',kana:'ãŒã£ã“ã†',rom:'gakkou',th:'à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™',type:'noun',level:'N5'},
{id:'n010',deck:'n5',jp:'æœ¬',kana:'ã»ã‚“',rom:'hon',th:'à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­',type:'noun',level:'N5'},
{id:'n011',deck:'n5',jp:'è»Š',kana:'ãã‚‹ã¾',rom:'kuruma',th:'à¸£à¸–à¸¢à¸™à¸•à¹Œ',type:'noun',level:'N5'},
{id:'n012',deck:'n5',jp:'é›»è»Š',kana:'ã§ã‚“ã—ã‚ƒ',rom:'densha',th:'à¸£à¸–à¹„à¸Ÿà¸Ÿà¹‰à¸²',type:'noun',level:'N5'},
{id:'n013',deck:'n5',jp:'é§…',kana:'ãˆã',rom:'eki',th:'à¸ªà¸–à¸²à¸™à¸µà¸£à¸–à¹„à¸Ÿ',type:'noun',level:'N5'},
{id:'n014',deck:'n5',jp:'æ°´',kana:'ã¿ãš',rom:'mizu',th:'à¸™à¹‰à¸³',type:'noun',level:'N5'},
{id:'n015',deck:'n5',jp:'ãŠé‡‘',kana:'ãŠã‹ã­',rom:'okane',th:'à¹€à¸‡à¸´à¸™',type:'noun',level:'N5'},
{id:'n016',deck:'n5',jp:'ä»•äº‹',kana:'ã—ã”ã¨',rom:'shigoto',th:'à¸‡à¸²à¸™, à¸­à¸²à¸Šà¸µà¸',type:'noun',level:'N5'},
{id:'n017',deck:'n5',jp:'åå‰',kana:'ãªã¾ãˆ',rom:'namae',th:'à¸Šà¸·à¹ˆà¸­',type:'noun',level:'N5'},
{id:'n018',deck:'n5',jp:'è¨€è‘‰',kana:'ã“ã¨ã°',rom:'kotoba',th:'à¸„à¸³, à¸ à¸²à¸©à¸²',type:'noun',level:'N5'},
{id:'n019',deck:'n5',jp:'è©±ã™',kana:'ã¯ãªã™',rom:'hanasu',th:'à¸à¸¹à¸”, à¸„à¸¸à¸¢',type:'verb',level:'N5'},
{id:'n020',deck:'n5',jp:'æ›¸ã',kana:'ã‹ã',rom:'kaku',th:'à¹€à¸‚à¸µà¸¢à¸™',type:'verb',level:'N5'},
{id:'n021',deck:'n5',jp:'èª­ã‚€',kana:'ã‚ˆã‚€',rom:'yomu',th:'à¸­à¹ˆà¸²à¸™',type:'verb',level:'N5'},
{id:'n022',deck:'n5',jp:'èã',kana:'ãã',rom:'kiku',th:'à¸Ÿà¸±à¸‡, à¸–à¸²à¸¡',type:'verb',level:'N5'},
{id:'n023',deck:'n5',jp:'è²·ã†',kana:'ã‹ã†',rom:'kau',th:'à¸‹à¸·à¹‰à¸­',type:'verb',level:'N5'},
{id:'n024',deck:'n5',jp:'ä½¿ã†',kana:'ã¤ã‹ã†',rom:'tsukau',th:'à¹ƒà¸Šà¹‰',type:'verb',level:'N5'},
{id:'n025',deck:'n5',jp:'ä½œã‚‹',kana:'ã¤ãã‚‹',rom:'tsukuru',th:'à¸—à¸³, à¸ªà¸£à¹‰à¸²à¸‡',type:'verb',level:'N5'},
{id:'n026',deck:'n5',jp:'å¾…ã¤',kana:'ã¾ã¤',rom:'matsu',th:'à¸£à¸­, à¸„à¸­à¸¢',type:'verb',level:'N5'},
{id:'n027',deck:'n5',jp:'ä¼šã†',kana:'ã‚ã†',rom:'au',th:'à¸à¸š, à¹€à¸ˆà¸­',type:'verb',level:'N5'},
{id:'n028',deck:'n5',jp:'å¸°ã‚‹',kana:'ã‹ãˆã‚‹',rom:'kaeru',th:'à¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™',type:'verb',level:'N5'},
{id:'n029',deck:'n5',jp:'èµ·ãã‚‹',kana:'ãŠãã‚‹',rom:'okiru',th:'à¸•à¸·à¹ˆà¸™à¸™à¸­à¸™',type:'verb',level:'N5'},
{id:'n030',deck:'n5',jp:'å¯ã‚‹',kana:'ã­ã‚‹',rom:'neru',th:'à¸™à¸­à¸™, à¸™à¸­à¸™à¸«à¸¥à¸±à¸š',type:'verb',level:'N5'},
{id:'n031',deck:'n5',jp:'æ–°ã—ã„',kana:'ã‚ãŸã‚‰ã—ã„',rom:'atarashii',th:'à¹ƒà¸«à¸¡à¹ˆ',type:'adj',level:'N5'},
{id:'n032',deck:'n5',jp:'å¤ã„',kana:'ãµã‚‹ã„',rom:'furui',th:'à¹€à¸à¹ˆà¸²',type:'adj',level:'N5'},
{id:'n033',deck:'n5',jp:'é«˜ã„',kana:'ãŸã‹ã„',rom:'takai',th:'à¹à¸à¸‡ / à¸ªà¸¹à¸‡',type:'adj',level:'N5'},
{id:'n034',deck:'n5',jp:'å®‰ã„',kana:'ã‚„ã™ã„',rom:'yasui',th:'à¸–à¸¹à¸ (à¸£à¸²à¸„à¸²)',type:'adj',level:'N5'},
{id:'n035',deck:'n5',jp:'ä»Šæ—¥',kana:'ãã‚‡ã†',rom:'kyou',th:'à¸§à¸±à¸™à¸™à¸µà¹‰',type:'adv',level:'N5'},
{id:'n036',deck:'n5',jp:'æ˜æ—¥',kana:'ã‚ã—ãŸ',rom:'ashita',th:'à¸à¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰',type:'adv',level:'N5'},
{id:'n037',deck:'n5',jp:'æ˜¨æ—¥',kana:'ãã®ã†',rom:'kinou',th:'à¹€à¸¡à¸·à¹ˆà¸­à¸§à¸²à¸™',type:'adv',level:'N5'},
{id:'n038',deck:'n5',jp:'ã‚‚ã†',kana:'ã‚‚ã†',rom:'mou',th:'à¹à¸¥à¹‰à¸§ / à¸­à¸µà¸à¹à¸¥à¹‰à¸§',type:'adv',level:'N5'},
{id:'n039',deck:'n5',jp:'ã¾ã ',kana:'ã¾ã ',rom:'mada',th:'à¸¢à¸±à¸‡à¸„à¸‡, à¸¢à¸±à¸‡à¹„à¸¡à¹ˆ',type:'adv',level:'N5'},
{id:'n040',deck:'n5',jp:'ã¨ã¦ã‚‚',kana:'ã¨ã¦ã‚‚',rom:'totemo',th:'à¸¡à¸²à¸, à¸¢à¸´à¹ˆà¸‡à¸™à¸±à¸',type:'adv',level:'N5'},
// â”€â”€â”€ N4 VOCAB â”€â”€â”€
{id:'f001',deck:'n4',jp:'æ±ºã‚ã‚‹',kana:'ãã‚ã‚‹',rom:'kimeru',th:'à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ',type:'verb',level:'N4'},
{id:'f002',deck:'n4',jp:'å§‹ã‚ã‚‹',kana:'ã¯ã˜ã‚ã‚‹',rom:'hajimeru',th:'à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™',type:'verb',level:'N4'},
{id:'f003',deck:'n4',jp:'ç¶šã‘ã‚‹',kana:'ã¤ã¥ã‘ã‚‹',rom:'tsuzukeru',th:'à¸—à¸³à¸•à¹ˆà¸­à¹„à¸›, à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡',type:'verb',level:'N4'},
{id:'f004',deck:'n4',jp:'çµ‚ã‚ã‚‹',kana:'ãŠã‚ã‚‹',rom:'owaru',th:'à¸ˆà¸š, à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”',type:'verb',level:'N4'},
{id:'f005',deck:'n4',jp:'å¤‰ã‚ã‚‹',kana:'ã‹ã‚ã‚‹',rom:'kawaru',th:'à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™',type:'verb',level:'N4'},
{id:'f006',deck:'n4',jp:'è€ƒãˆã‚‹',kana:'ã‹ã‚“ãŒãˆã‚‹',rom:'kangaeru',th:'à¸„à¸´à¸”, à¸•à¸£à¸¶à¸à¸•à¸£à¸­à¸‡',type:'verb',level:'N4'},
{id:'f007',deck:'n4',jp:'æ„Ÿã˜ã‚‹',kana:'ã‹ã‚“ã˜ã‚‹',rom:'kanjiru',th:'à¸£à¸¹à¹‰à¸ªà¸¶à¸',type:'verb',level:'N4'},
{id:'f008',deck:'n4',jp:'æ°—ã¥ã',kana:'ãã¥ã',rom:'kizuku',th:'à¸ªà¸±à¸‡à¹€à¸à¸•à¹€à¸«à¹‡à¸™, à¸•à¸£à¸°à¸«à¸™à¸±à¸',type:'verb',level:'N4'},
{id:'f009',deck:'n4',jp:'é¸ã¶',kana:'ãˆã‚‰ã¶',rom:'erabu',th:'à¹€à¸¥à¸·à¸­à¸',type:'verb',level:'N4'},
{id:'f010',deck:'n4',jp:'èª¿ã¹ã‚‹',kana:'ã—ã‚‰ã¹ã‚‹',rom:'shiraberu',th:'à¸„à¹‰à¸™à¸«à¸², à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š',type:'verb',level:'N4'},
{id:'f011',deck:'n4',jp:'èª¬æ˜ã™ã‚‹',kana:'ã›ã¤ã‚ã„ã™ã‚‹',rom:'setsumei suru',th:'à¸­à¸˜à¸´à¸šà¸²à¸¢',type:'verb',level:'N4'},
{id:'f012',deck:'n4',jp:'ç·´ç¿’ã™ã‚‹',kana:'ã‚Œã‚“ã—ã‚…ã†ã™ã‚‹',rom:'renshuu suru',th:'à¸à¸¶à¸à¸‹à¹‰à¸­à¸¡',type:'verb',level:'N4'},
{id:'f013',deck:'n4',jp:'æº–å‚™ã™ã‚‹',kana:'ã˜ã‚…ã‚“ã³ã™ã‚‹',rom:'junbi suru',th:'à¹€à¸•à¸£à¸µà¸¢à¸¡',type:'verb',level:'N4'},
{id:'f014',deck:'n4',jp:'å¿ƒé…ã™ã‚‹',kana:'ã—ã‚“ã±ã„ã™ã‚‹',rom:'shinpai suru',th:'à¸à¸±à¸‡à¸§à¸¥, à¹€à¸›à¹‡à¸™à¸«à¹ˆà¸§à¸‡',type:'verb',level:'N4'},
{id:'f015',deck:'n4',jp:'å¤§åˆ‡ãª',kana:'ãŸã„ã›ã¤ãª',rom:'taisetsu na',th:'à¸ªà¸³à¸„à¸±à¸, à¸¡à¸µà¸„à¹ˆà¸²',type:'adj',level:'N4'},
{id:'f016',deck:'n4',jp:'å¿…è¦ãª',kana:'ã²ã¤ã‚ˆã†ãª',rom:'hitsuyou na',th:'à¸ˆà¸³à¹€à¸›à¹‡à¸™',type:'adj',level:'N4'},
{id:'f017',deck:'n4',jp:'ä¾¿åˆ©ãª',kana:'ã¹ã‚“ã‚Šãª',rom:'benri na',th:'à¸ªà¸°à¸”à¸§à¸',type:'adj',level:'N4'},
{id:'f018',deck:'n4',jp:'ç‰¹åˆ¥ãª',kana:'ã¨ãã¹ã¤ãª',rom:'tokubetsu na',th:'à¸à¸´à¹€à¸¨à¸©',type:'adj',level:'N4'},
{id:'f019',deck:'n4',jp:'æ™®é€š',kana:'ãµã¤ã†',rom:'futsuu',th:'à¸›à¸à¸•à¸´, à¸˜à¸£à¸£à¸¡à¸”à¸²',type:'adv',level:'N4'},
{id:'f020',deck:'n4',jp:'æœ€è¿‘',kana:'ã•ã„ãã‚“',rom:'saikin',th:'à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰, à¸Šà¹ˆà¸§à¸‡à¸™à¸µà¹‰',type:'adv',level:'N4'},
{id:'f021',deck:'n4',jp:'ã‚‚ã¡ã‚ã‚“',kana:'ã‚‚ã¡ã‚ã‚“',rom:'mochiron',th:'à¹à¸™à¹ˆà¸™à¸­à¸™, à¸à¹‡à¹„à¸”à¹‰à¸ªà¸´',type:'adv',level:'N4'},
{id:'f022',deck:'n4',jp:'ã‚„ã£ã±ã‚Š',kana:'ã‚„ã£ã±ã‚Š',rom:'yappari',th:'à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸„à¸´à¸”, à¸à¹‡à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡',type:'adv',level:'N4'},
{id:'f023',deck:'n4',jp:'çµŒé¨“',kana:'ã‘ã„ã‘ã‚“',rom:'keiken',th:'à¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œ',type:'noun',level:'N4'},
{id:'f024',deck:'n4',jp:'æ„å‘³',kana:'ã„ã¿',rom:'imi',th:'à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢',type:'noun',level:'N4'},
{id:'f025',deck:'n4',jp:'ç†ç”±',kana:'ã‚Šã‚†ã†',rom:'riyuu',th:'à¹€à¸«à¸•à¸¸à¸œà¸¥',type:'noun',level:'N4'},
{id:'f026',deck:'n4',jp:'å•é¡Œ',kana:'ã‚‚ã‚“ã ã„',rom:'mondai',th:'à¸›à¸±à¸à¸«à¸², à¹‚à¸ˆà¸—à¸¢à¹Œ',type:'noun',level:'N4'},
{id:'f027',deck:'n4',jp:'ç­”ãˆ',kana:'ã“ãŸãˆ',rom:'kotae',th:'à¸„à¸³à¸•à¸­à¸š',type:'noun',level:'N4'},
{id:'f028',deck:'n4',jp:'æ–‡åŒ–',kana:'ã¶ã‚“ã‹',rom:'bunka',th:'à¸§à¸±à¸’à¸™à¸˜à¸£à¸£à¸¡',type:'noun',level:'N4'},
{id:'f029',deck:'n4',jp:'ç¤¾ä¼š',kana:'ã—ã‚ƒã‹ã„',rom:'shakai',th:'à¸ªà¸±à¸‡à¸„à¸¡',type:'noun',level:'N4'},
{id:'f030',deck:'n4',jp:'æ©Ÿä¼š',kana:'ãã‹ã„',rom:'kikai',th:'à¹‚à¸­à¸à¸²à¸ª',type:'noun',level:'N4'},
// â”€â”€â”€ MANGA & ANIME â”€â”€â”€
{id:'m001',deck:'manga',jp:'æ•µ',kana:'ã¦ã',rom:'teki',th:'à¸¨à¸±à¸•à¸£à¸¹, à¸‚à¹‰à¸²à¸¨à¸¶à¸',type:'noun',level:'N4'},
{id:'m002',deck:'manga',jp:'ä»²é–“',kana:'ãªã‹ã¾',rom:'nakama',th:'à¸à¸§à¸à¹€à¸£à¸², à¹€à¸à¸·à¹ˆà¸­à¸™à¸£à¹ˆà¸§à¸¡à¸—à¸µà¸¡',type:'noun',level:'N4'},
{id:'m003',deck:'manga',jp:'å¸Œæœ›',kana:'ãã¼ã†',rom:'kibou',th:'à¸„à¸§à¸²à¸¡à¸«à¸§à¸±à¸‡',type:'noun',level:'N4'},
{id:'m004',deck:'manga',jp:'é‹å‘½',kana:'ã†ã‚“ã‚ã„',rom:'unmei',th:'à¹‚à¸Šà¸„à¸Šà¸°à¸•à¸², à¸Šà¸°à¸•à¸²à¸à¸£à¸£à¸¡',type:'noun',level:'N4'},
{id:'m005',deck:'manga',jp:'è¦šæ‚Ÿ',kana:'ã‹ãã”',rom:'kakugo',th:'à¸„à¸§à¸²à¸¡à¸¡à¸¸à¹ˆà¸‡à¸¡à¸±à¹ˆà¸™, à¸•à¸±à¹‰à¸‡à¹ƒà¸ˆà¸ˆà¸£à¸´à¸‡',type:'noun',level:'N3'},
{id:'m006',deck:'manga',jp:'ç´„æŸ',kana:'ã‚„ããã',rom:'yakusoku',th:'à¸ªà¸±à¸à¸à¸², à¸™à¸±à¸”',type:'noun',level:'N4'},
{id:'m007',deck:'manga',jp:'æˆ¦ã†',kana:'ãŸãŸã‹ã†',rom:'tatakau',th:'à¸•à¹ˆà¸­à¸ªà¸¹à¹‰',type:'verb',level:'N4'},
{id:'m008',deck:'manga',jp:'å®ˆã‚‹',kana:'ã¾ã‚‚ã‚‹',rom:'mamoru',th:'à¸›à¸à¸›à¹‰à¸­à¸‡, à¸£à¸±à¸à¸©à¸²',type:'verb',level:'N4'},
{id:'m009',deck:'manga',jp:'ä¿¡ã˜ã‚‹',kana:'ã—ã‚“ã˜ã‚‹',rom:'shinjiru',th:'à¹€à¸Šà¸·à¹ˆà¸­, à¹„à¸§à¹‰à¸§à¸²à¸‡à¹ƒà¸ˆ',type:'verb',level:'N4'},
{id:'m010',deck:'manga',jp:'è«¦ã‚ã‚‹',kana:'ã‚ãã‚‰ã‚ã‚‹',rom:'akirameru',th:'à¸¢à¸­à¸¡à¹à¸à¹‰, à¸—à¸­à¸”à¸—à¸´à¹‰à¸‡',type:'verb',level:'N4'},
{id:'m011',deck:'manga',jp:'åŠ©ã‘ã‚‹',kana:'ãŸã™ã‘ã‚‹',rom:'tasukeru',th:'à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­',type:'verb',level:'N4'},
{id:'m012',deck:'manga',jp:'å‹ã¤',kana:'ã‹ã¤',rom:'katsu',th:'à¸Šà¸™à¸°',type:'verb',level:'N4'},
{id:'m013',deck:'manga',jp:'è² ã‘ã‚‹',kana:'ã¾ã‘ã‚‹',rom:'makeru',th:'à¹à¸à¹‰',type:'verb',level:'N4'},
{id:'m014',deck:'manga',jp:'å¼·ã„',kana:'ã¤ã‚ˆã„',rom:'tsuyoi',th:'à¹à¸‚à¹‡à¸‡à¹à¸à¸£à¹ˆà¸‡, à¹€à¸à¹ˆà¸‡',type:'adj',level:'N4'},
{id:'m015',deck:'manga',jp:'å¼±ã„',kana:'ã‚ˆã‚ã„',rom:'yowai',th:'à¸­à¹ˆà¸­à¸™à¹à¸­',type:'adj',level:'N4'},
{id:'m016',deck:'manga',jp:'ã‹ã£ã“ã„ã„',kana:'ã‹ã£ã“ã„ã„',rom:'kakkoii',th:'à¹€à¸—à¹ˆ, à¸«à¸¥à¹ˆà¸­',type:'adj',level:'N5'},
{id:'m017',deck:'manga',jp:'ã‚„ã°ã„',kana:'ã‚„ã°ã„',rom:'yabai',th:'à¹‚à¸«à¸”!, à¹€à¸ˆà¹‹à¸‡! (à¸ªà¹à¸¥à¸‡)',type:'expr',level:'N3'},
{id:'m018',deck:'manga',jp:'ãªã‚‹ã»ã©',kana:'ãªã‚‹ã»ã©',rom:'naruhodo',th:'à¸­à¸­, à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹à¸¥à¹‰à¸§',type:'expr',level:'N4'},
{id:'m019',deck:'manga',jp:'ã•ã™ãŒ',kana:'ã•ã™ãŒ',rom:'sasuga',th:'à¹€à¸à¹ˆà¸‡à¸ˆà¸£à¸´à¸‡à¹†, à¹„à¸¡à¹ˆà¹à¸›à¸¥à¸à¹ƒà¸ˆ',type:'expr',level:'N4'},
{id:'m020',deck:'manga',jp:'æœ¬å½“ã«',kana:'ã»ã‚“ã¨ã†ã«',rom:'hontouni',th:'à¸ˆà¸£à¸´à¸‡à¹†, à¸­à¸¢à¹ˆà¸²à¸‡à¸ˆà¸£à¸´à¸‡à¸ˆà¸±à¸‡',type:'adv',level:'N5'},
{id:'m021',deck:'manga',jp:'çµ¶å¯¾ã«',kana:'ãœã£ãŸã„ã«',rom:'zettai ni',th:'à¹à¸™à¹ˆà¸™à¸­à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”, à¸•à¹‰à¸­à¸‡',type:'adv',level:'N4'},
{id:'m022',deck:'manga',jp:'ã¾ã˜ã§',kana:'ã¾ã˜ã§',rom:'majide',th:'à¸ˆà¸£à¸´à¸‡à¹€à¸«à¸£à¸­? (à¸ªà¹à¸¥à¸‡)',type:'expr',level:'N3'},
{id:'m023',deck:'manga',jp:'ã†ã',kana:'ã†ã',rom:'uso',th:'à¹‚à¸à¸«à¸ / "à¹„à¸¡à¹ˆà¸ˆà¸£à¸´à¸‡à¸™à¸°!"',type:'expr',level:'N5'},
{id:'m024',deck:'manga',jp:'æ­»ã¬',kana:'ã—ã¬',rom:'shinu',th:'à¸•à¸²à¸¢',type:'verb',level:'N5'},
{id:'m025',deck:'manga',jp:'ç”Ÿãã‚‹',kana:'ã„ãã‚‹',rom:'ikiru',th:'à¸¡à¸µà¸Šà¸µà¸§à¸´à¸•à¸­à¸¢à¸¹à¹ˆ',type:'verb',level:'N4'},
// â”€â”€â”€ DAILY LIFE â”€â”€â”€
{id:'d001',deck:'daily',jp:'é£Ÿã¹ç‰©',kana:'ãŸã¹ã‚‚ã®',rom:'tabemono',th:'à¸­à¸²à¸«à¸²à¸£',type:'noun',level:'N5'},
{id:'d002',deck:'daily',jp:'é£²ã¿ç‰©',kana:'ã®ã¿ã‚‚ã®',rom:'nomimono',th:'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸”à¸·à¹ˆà¸¡',type:'noun',level:'N5'},
{id:'d003',deck:'daily',jp:'åº—',kana:'ã¿ã›',rom:'mise',th:'à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²',type:'noun',level:'N5'},
{id:'d004',deck:'daily',jp:'ç—…é™¢',kana:'ã³ã‚‡ã†ã„ã‚“',rom:'byouin',th:'à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥',type:'noun',level:'N5'},
{id:'d005',deck:'daily',jp:'éŠ€è¡Œ',kana:'ãã‚“ã“ã†',rom:'ginkou',th:'à¸˜à¸™à¸²à¸„à¸²à¸£',type:'noun',level:'N5'},
{id:'d006',deck:'daily',jp:'ä¼šç¤¾',kana:'ã‹ã„ã—ã‚ƒ',rom:'kaisha',th:'à¸šà¸£à¸´à¸©à¸±à¸—',type:'noun',level:'N5'},
{id:'d007',deck:'daily',jp:'é›»è©±',kana:'ã§ã‚“ã‚',rom:'denwa',th:'à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ',type:'noun',level:'N5'},
{id:'d008',deck:'daily',jp:'å¤©æ°—',kana:'ã¦ã‚“ã',rom:'tenki',th:'à¸­à¸²à¸à¸²à¸¨, à¸”à¸´à¸™à¸Ÿà¹‰à¸²à¸­à¸²à¸à¸²à¸¨',type:'noun',level:'N5'},
{id:'d009',deck:'daily',jp:'æ–™ç†',kana:'ã‚Šã‚‡ã†ã‚Š',rom:'ryouri',th:'à¸­à¸²à¸«à¸²à¸£ (à¸à¸²à¸£à¸—à¸³) / à¸—à¸³à¸­à¸²à¸«à¸²à¸£',type:'noun',level:'N5'},
{id:'d010',deck:'daily',jp:'æ—…è¡Œ',kana:'ã‚Šã‚‡ã“ã†',rom:'ryokou',th:'à¸à¸²à¸£à¸—à¹ˆà¸­à¸‡à¹€à¸—à¸µà¹ˆà¸¢à¸§',type:'noun',level:'N5'},
{id:'d011',deck:'daily',jp:'éŸ³æ¥½',kana:'ãŠã‚“ãŒã',rom:'ongaku',th:'à¸”à¸™à¸•à¸£à¸µ',type:'noun',level:'N5'},
{id:'d012',deck:'daily',jp:'æ˜ ç”»',kana:'ãˆã„ãŒ',rom:'eiga',th:'à¸ à¸²à¸à¸¢à¸™à¸•à¸£à¹Œ',type:'noun',level:'N5'},
{id:'d013',deck:'daily',jp:'ã‚¹ãƒãƒ¼ãƒ„',kana:'ã‚¹ãƒãƒ¼ãƒ„',rom:'supootsu',th:'à¸à¸µà¸¬à¸²',type:'noun',level:'N5'},
{id:'d014',deck:'daily',jp:'è²·ã„ç‰©',kana:'ã‹ã„ã‚‚ã®',rom:'kaimono',th:'à¸à¸²à¸£à¸‹à¸·à¹‰à¸­à¸‚à¸­à¸‡, à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡',type:'noun',level:'N5'},
{id:'d015',deck:'daily',jp:'æ•£æ­©',kana:'ã•ã‚“ã½',rom:'sanpo',th:'à¹€à¸”à¸´à¸™à¹€à¸¥à¹ˆà¸™',type:'noun',level:'N5'},
{id:'d016',deck:'daily',jp:'æš‘ã„',kana:'ã‚ã¤ã„',rom:'atsui',th:'à¸£à¹‰à¸­à¸™ (à¸­à¸²à¸à¸²à¸¨)',type:'adj',level:'N5'},
{id:'d017',deck:'daily',jp:'å¯’ã„',kana:'ã•ã‚€ã„',rom:'samui',th:'à¸«à¸™à¸²à¸§',type:'adj',level:'N5'},
{id:'d018',deck:'daily',jp:'ç–²ã‚Œã‚‹',kana:'ã¤ã‹ã‚Œã‚‹',rom:'tsukareru',th:'à¹€à¸«à¸™à¸·à¹ˆà¸­à¸¢, à¸­à¹ˆà¸­à¸™à¹€à¸à¸¥à¸µà¸¢',type:'verb',level:'N5'},
{id:'d019',deck:'daily',jp:'å¿˜ã‚Œã‚‹',kana:'ã‚ã™ã‚Œã‚‹',rom:'wasureru',th:'à¸¥à¸·à¸¡',type:'verb',level:'N5'},
{id:'d020',deck:'daily',jp:'è¦šãˆã‚‹',kana:'ãŠã¼ãˆã‚‹',rom:'oboeru',th:'à¸ˆà¸³, à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰',type:'verb',level:'N4'},
{id:'d021',deck:'daily',jp:'æ€¥ã',kana:'ã„ãã',rom:'isogu',th:'à¸£à¸µà¸š, à¹€à¸£à¹ˆà¸‡à¸£à¸µà¸š',type:'verb',level:'N4'},
{id:'d022',deck:'daily',jp:'å›°ã‚‹',kana:'ã“ã¾ã‚‹',rom:'komaru',th:'à¸¥à¸³à¸šà¸²à¸, à¹€à¸”à¸·à¸­à¸”à¸£à¹‰à¸­à¸™',type:'verb',level:'N4'},
{id:'d023',deck:'daily',jp:'æ¥½ã—ã„',kana:'ãŸã®ã—ã„',rom:'tanoshii',th:'à¸ªà¸™à¸¸à¸, à¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸¸à¸‚',type:'adj',level:'N5'},
{id:'d024',deck:'daily',jp:'å¬‰ã—ã„',kana:'ã†ã‚Œã—ã„',rom:'ureshii',th:'à¸”à¸µà¹ƒà¸ˆ, à¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸¸à¸‚',type:'adj',level:'N5'},
{id:'d025',deck:'daily',jp:'æ‚²ã—ã„',kana:'ã‹ãªã—ã„',rom:'kanashii',th:'à¹€à¸¨à¸£à¹‰à¸²',type:'adj',level:'N5'},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SRS ENGINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Card state: {id, interval, due, lapses, state:'new'|'learning'|'young'|'mature', reps}
function loadSRS(){return JSON.parse(localStorage.getItem('vd_srs')||'{}')}
function saveSRS(s){localStorage.setItem('vd_srs',JSON.stringify(s))}
function loadStats(){const raw=localStorage.getItem('vd_stats');if(raw){try{return JSON.parse(raw);}catch(e){}}return {streak:0,lastDate:'',totalSeen:0,reviewed:0,dailyReviewed:0,history:[]};}
function saveStats(s){localStorage.setItem('vd_stats',JSON.stringify(s))}
function now(){return Date.now()}
function today(){return new Date().toISOString().slice(0,10)}

function getCard(id){
  const s=loadSRS();
  if(!s[id]) s[id]={id,interval:0,due:0,lapses:0,state:'new',reps:0};
  return s[id];
}
function updateCard(id,rating){
  const s=loadSRS();const c=s[id]||{id,interval:0,due:0,lapses:0,state:'new',reps:0};
  c.reps++;
  const now_=now();
  const MIN=60000,HOUR=3600000,DAY=86400000;
  if(rating===0){// Again
    c.lapses++;c.interval=Math.max(1,c.interval*.2);c.state='learning';c.due=now_+10*MIN;
  }else if(rating===1){// Hard
    c.interval=Math.max(1,c.interval*.8||1);c.state='learning';c.due=now_+HOUR;
  }else if(rating===2){// Good
    if(c.state==='new'){c.interval=1;c.state='young';}
    else if(c.state==='learning'){c.interval=3;}
    else{c.interval=Math.round(c.interval*(2+Math.random()*.2));}
    if(c.interval>=21)c.state='mature';else if(c.interval>1)c.state='young';
    c.due=now_+c.interval*DAY;
  }else{// Easy
    c.interval=c.state==='new'?4:Math.round(c.interval*2.5);
    c.state=c.interval>=21?'mature':'young';c.due=now_+c.interval*DAY;
  }
  s[id]=c;saveSRS(s);
  const st=loadStats();st.totalSeen=Object.values(s).filter(x=>x.reps>0).length;
  const td=today();if(st.lastDate!==td){st.dailyReviewed=0;}st.dailyReviewed=(st.dailyReviewed||0)+1;st.lastDate=td;
  if(!st.history)st.history=[];if(st.history[st.history.length-1]!==td)st.history.push(td);
  saveStats(st);
  return s[id];
}
function getDueCards(){const s=loadSRS();const n=now();return VOCAB.filter(v=>{const c=s[v.id];return c&&c.due<=n&&c.state!=='new';});}
function getNewCards(){const s=loadSRS();return VOCAB.filter(v=>!s[v.id]||s[v.id].state==='new');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const pageInits={};
function nav(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.ni').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  document.querySelectorAll('.ni').forEach(n=>{if(n.getAttribute('onclick')==="nav('"+id+"')")n.classList.add('active');});
  if(!pageInits[id]){pageInits[id]=true;({home:initHome,browse:initBrowse,srs:initSRS,learn:initLearn,quiz:initQuiz,match:initMatch,typing:initTyping,stats:initStats,decks:initDecks,anki:()=>{}})[id]?.();}
  else if(id==='home')updateHome();
  else if(id==='srs')initSRS();
  updateBadge();
}
function stab(el,g,id){document.querySelectorAll('.tp').forEach(p=>{if(p.id.startsWith(g+'-'))p.classList.remove('active')});document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.getElementById(g+'-'+id).classList.add('active');el.classList.add('active');({mc:initMC,rev:initRev,speed:initSpeedQuiz})[id]?.();}

function showN(m,t='ok'){const e=document.getElementById('notif');e.textContent=m;e.className='notif '+t+' show';setTimeout(()=>e.classList.remove('show'),2000);}
function shuf(a){return[...a].sort(()=>Math.random()-.5);}

function updateBadge(){
  const due=getDueCards().length;const el=document.getElementById('due-badge');const np=document.getElementById('np-srs');
  if(el){el.textContent=due;el.style.display=due>0?'inline-block':'none';}
  if(np)np.textContent=due;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HOME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initHome(){updateHome();buildRoadmap();}
function updateHome(){
  const due=getDueCards().length,nw=getNewCards().length;
  const st=loadStats();const srs=loadSRS();
  const learned=Object.values(srs).filter(x=>x.reps>0).length;
  document.getElementById('h-due').textContent=due;
  document.getElementById('h-new').textContent=nw;
  document.getElementById('h-learned').textContent=learned;
  document.getElementById('h-total').textContent=learned+'/'+VOCAB.length;
  document.getElementById('h-prog-bar').style.width=(learned/VOCAB.length*100)+'%';
  document.getElementById('h-goal').textContent=Math.min(st.dailyReviewed||0,20)+'/20';
  document.getElementById('h-goal-bar').style.width=(Math.min(st.dailyReviewed||0,20)/20*100)+'%';
  // Streak
  updateStreak();
  // Deck overview
  const el=document.getElementById('h-decks');if(!el)return;
  const srsData=loadSRS();
  el.innerHTML=DECKS.map(d=>{
    const words=VOCAB.filter(v=>v.deck===d.id);const done=words.filter(v=>srsData[v.id]&&srsData[v.id].reps>0).length;const pct=Math.round(done/words.length*100);
    return`<div style="margin-bottom:10px"><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:3px"><span>${d.icon} ${d.name}</span><span style="color:${d.col};font-family:'DM Mono'">${done}/${words.length}</span></div><div class="pbar"><div class="pbf" style="width:${pct}%;background:linear-gradient(90deg,${d.col}88,${d.col})"></div></div></div>`;
  }).join('');
}
function updateStreak(){
  const st=loadStats();const td=today();let s=st.streak||0;
  if(st.lastDate===td)s=st.streak||1;
  else{const yest=new Date(Date.now()-86400000).toISOString().slice(0,10);if(st.lastDate===yest)s=st.streak||0;else s=0;}
  document.getElementById('streak-num').textContent=s;
  document.getElementById('streak-icon').textContent=s>=7?'ğŸ”¥':s>=3?'âœ¨':'ğŸ’§';
}
function buildRoadmap(){
  const el=document.getElementById('h-road');if(!el)return;
  const steps=[{n:'500 à¸„à¸³',d:'à¸­à¹ˆà¸²à¸™à¸‡à¹ˆà¸²à¸¢ à¸„à¸¸à¸¢à¸à¸·à¹‰à¸™à¸à¸²à¸™à¹„à¸”à¹‰',i:'ğŸŒ±',t:VOCAB.length},
    {n:'1,000 à¸„à¸³',d:'à¸­à¹ˆà¸²à¸™à¸¡à¸±à¸‡à¸‡à¸°à¸‡à¹ˆà¸²à¸¢à¹„à¸”à¹‰',i:'ğŸŒ¿',t:1000},
    {n:'1,500 à¸„à¸³',d:'à¸­à¹ˆà¸²à¸™à¸¡à¸±à¸‡à¸‡à¸°à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ 60-70%',i:'ğŸŒ³',t:1500},
    {n:'2,000 à¸„à¸³',d:'N4 à¹€à¸à¸·à¸­à¸šà¸ªà¸­à¸šà¸œà¹ˆà¸²à¸™',i:'â­',t:2000},
    {n:'6,000 à¸„à¸³',d:'à¸­à¹ˆà¸²à¸™à¹„à¸”à¹‰à¹à¸—à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡',i:'ğŸ†',t:6000},
  ];
  el.innerHTML=steps.map(s=>`<div style="background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:14px;text-align:center"><div style="font-size:22px">${s.i}</div><div style="font-size:13px;font-weight:700;color:var(--white);margin:5px 0">${s.n}</div><div style="font-size:11px;color:var(--text2);line-height:1.5">${s.d}</div></div>`).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SRS REVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let srsQ=[],srsIdx=0,srsFlipped=false,srsSession={correct:0,total:0};
function initSRS(){
  srsQ=shuf(getDueCards());srsIdx=0;srsFlipped=false;srsSession={correct:0,total:0};
  renderSRS();
}
function renderSRS(){
  const el=document.getElementById('srs-wrap');if(!el)return;
  if(srsQ.length===0){
    el.innerHTML=`<div style="text-align:center;padding:30px"><div style="font-size:52px">âœ…</div><div style="font-family:'Playfair Display';font-size:24px;color:var(--white);margin:12px 0">à¸—à¸šà¸—à¸§à¸™à¸„à¸£à¸šà¹à¸¥à¹‰à¸§!</div><div style="font-size:14px;color:var(--text2);margin-bottom:20px">à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¹Œà¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸šà¸—à¸§à¸™à¸•à¸­à¸™à¸™à¸µà¹‰<br>à¸¡à¸²à¹ƒà¸«à¸¡à¹ˆà¹€à¸¡à¸·à¹ˆà¸­à¸–à¸¶à¸‡à¹€à¸§à¸¥à¸²à¸•à¸²à¸¡à¸—à¸µà¹ˆà¸£à¸°à¸šà¸šà¸à¸³à¸«à¸™à¸”</div><div style="display:flex;gap:10px;justify-content:center"><button class="btn bgr" onclick="nav('learn')">ğŸŒ± à¹€à¸£à¸µà¸¢à¸™à¸à¸²à¸£à¹Œà¸”à¹ƒà¸«à¸¡à¹ˆ</button><button class="btn bol" onclick="nav('quiz')">ğŸ¯ à¸—à¸³ Quiz</button></div></div>`;return;
  }
  const v=srsQ[srsIdx];const srsData=loadSRS();const c=srsData[v.id]||{state:'new'};
  const total=srsQ.length;const dotC={new:'dot-new',learning:'dot-learning',young:'dot-young',mature:'dot-mature'}[c.state]||'dot-new';
  el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:8px">
    <div style="font-size:12px;color:var(--text2)">à¸à¸²à¸£à¹Œà¸”à¸—à¸µà¹ˆ <span style="color:var(--green)">${srsIdx+1}</span>/${total}</div>
    <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text2)"><div class="srs-dot ${dotC}"></div>${c.state||'new'}</div>
    <div style="font-size:12px;color:var(--text2)">âœ“ ${srsSession.correct} / ${srsSession.total}</div>
  </div>
  <div class="pbar" style="margin-bottom:16px"><div class="pbf" style="width:${(srsIdx/total)*100}%"></div></div>
  <div class="flip-outer">
    <div class="flip-inner" id="srs-flip" onclick="flipSRS()">
      <div class="flip-front fcard"><div class="fcard-type tag-${v.type}">${{noun:'åè©',verb:'å‹•è©',adj:'å½¢å®¹è©',adv:'å‰¯è©',expr:'è¡¨ç¾'}[v.type]}</div><div class="fcard-jp">${v.jp}</div><button class="speak-btn" style="margin-top:10px" onclick="event.stopPropagation();speakJP('${v.jp.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</button><div style="font-size:12px;color:var(--text3);margin-top:8px;font-family:'DM Mono'">tap to reveal</div></div>
      <div class="flip-back fcard"><div class="fcard-jp" style="font-size:38px">${v.jp}</div><div class="fcard-kana">${v.kana}</div><div class="fcard-rom">${v.rom}</div><div class="fcard-th">${v.th}</div><button class="speak-btn" style="margin-top:8px" onclick="event.stopPropagation();speakJP('${v.jp.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š</button><div class="fcard-type tag-${v.type}" style="margin-top:8px">${v.level}</div></div>
    </div>
  </div>
  <div id="srs-btns" style="display:none;margin-top:18px">
    <div class="srs-btns">
      <button class="srs-btn srs-again" onclick="rateSRS(0)">Again<span class="srs-lbl">< 10m</span></button>
      <button class="srs-btn srs-hard" onclick="rateSRS(1)">Hard<span class="srs-lbl">1h</span></button>
      <button class="srs-btn srs-good" onclick="rateSRS(2)">Good<span class="srs-lbl">${srsQ[srsIdx]?Math.max(1,Math.round((srsData[srsQ[srsIdx].id]?.interval||0)*2.2)||1):1}d</span></button>
      <button class="srs-btn srs-easy" onclick="rateSRS(3)">Easy<span class="srs-lbl">${srsQ[srsIdx]?Math.max(4,Math.round((srsData[srsQ[srsIdx].id]?.interval||0)*2.5)||4):4}d</span></button>
    </div>
  </div>`;
  speakJP(v.jp);
}
function flipSRS(){srsFlipped=!srsFlipped;document.getElementById('srs-flip').classList.toggle('flipped',srsFlipped);if(srsFlipped)document.getElementById('srs-btns').style.display='block';}
function rateSRS(r){
  const v=srsQ[srsIdx];updateCard(v.id,r);srsSession.total++;if(r>=2)srsSession.correct++;
  srsIdx++;srsFlipped=false;updateHome();updateBadge();renderSRS();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LEARN NEW CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let learnQ=[],learnIdx=0,learnFlip=false;
function initLearn(){
  learnQ=shuf(getNewCards()).slice(0,20);learnIdx=0;learnFlip=false;
  renderLearn();
}
function renderLearn(){
  const el=document.getElementById('learn-wrap');if(!el)return;
  if(learnQ.length===0){el.innerHTML=`<div class="abox">ğŸŒŸ à¸¢à¸´à¸™à¸”à¸µà¸”à¹‰à¸§à¸¢! à¹€à¸£à¸µà¸¢à¸™à¸„à¸£à¸š 20 à¸à¸²à¸£à¹Œà¸”à¸§à¸±à¸™à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§! à¸à¸¥à¸±à¸šà¸¡à¸²à¸à¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¸—à¸³ Quiz à¸•à¹ˆà¸­</div><div style="display:flex;gap:10px;flex-wrap:wrap"><button class="btn bgr" onclick="nav('quiz')" style="flex:1">ğŸ¯ à¸—à¸³ Quiz</button><button class="btn bol" onclick="nav('home')" style="flex:1">ğŸ  à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</button></div>`;return;}
  if(learnIdx>=learnQ.length){el.innerHTML=`<div style="text-align:center;padding:24px"><div style="font-size:52px">ğŸŒ±</div><div style="font-family:'Playfair Display';font-size:22px;color:var(--white);margin:12px 0">à¹€à¸£à¸µà¸¢à¸™à¸„à¸£à¸š ${learnQ.length} à¸„à¸³à¹à¸¥à¹‰à¸§!</div><button class="btn bgr" onclick="nav('srs')">ğŸ” à¸—à¸šà¸—à¸§à¸™à¸—à¸±à¸™à¸—à¸µ</button></div>`;return;}
  const v=learnQ[learnIdx];
  el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px"><div style="font-size:12px;color:var(--text2)">à¸„à¸³à¸—à¸µà¹ˆ <b style="color:var(--green)">${learnIdx+1}</b>/${learnQ.length}</div><span class="fcard-type tag-${v.type}">${v.level}</span></div>
    <div class="pbar" style="margin-bottom:16px"><div class="pbf" style="width:${(learnIdx/learnQ.length)*100}%"></div></div>
    <div class="flip-outer"><div class="flip-inner" id="ln-flip" onclick="flipLearn()">
      <div class="flip-front fcard"><div class="fcard-jp">${v.jp}</div><div class="fcard-kana">${v.kana}</div><div class="fcard-rom">${v.rom}</div><button class="speak-btn" style="margin-top:10px" onclick="event.stopPropagation();speakJP('${v.jp.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</button><div style="font-size:11px;color:var(--text3);margin-top:8px;font-family:'DM Mono'">tap to see meaning</div></div>
      <div class="flip-back fcard"><div class="fcard-jp" style="font-size:36px">${v.jp}</div><div class="fcard-kana">${v.kana}</div><div class="fcard-rom">${v.rom}</div><div class="fcard-th">${v.th}</div><button class="speak-btn" style="margin-top:8px" onclick="event.stopPropagation();speakJP('${v.jp.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š</button></div>
    </div></div>
    <div id="ln-btns" style="display:none;margin-top:16px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
      <button class="btn bol" onclick="learnRate(0)" style="flex:1">ğŸ˜• à¸¢à¸²à¸ Remember next time</button>
      <button class="btn bgr" onclick="learnRate(2)" style="flex:1">ğŸ‘ à¹‚à¸­à¹€à¸„ Got it!</button>
    </div>`;
  learnFlip=false;
  speakJP(v.jp);
}
function flipLearn(){learnFlip=!learnFlip;document.getElementById('ln-flip').classList.toggle('flipped',learnFlip);}
function learnRate(r){
  const v=learnQ[learnIdx];updateCard(v.id,r);learnIdx++;learnFlip=false;renderLearn();updateBadge();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BROWSE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initBrowse(){
  const sel=document.getElementById('br-deck');if(!sel)return;
  DECKS.forEach(d=>{const o=document.createElement('option');o.value=d.id;o.textContent=d.icon+' '+d.name;sel.appendChild(o);});
  renderBrowse();
}
function renderBrowse(){
  const q=(document.getElementById('br-search')?.value||'').toLowerCase();
  const deck=document.getElementById('br-deck')?.value||'';
  const type=document.getElementById('br-type')?.value||'';
  const srsData=loadSRS();
  let list=VOCAB.filter(v=>{
    if(deck&&v.deck!==deck)return false;
    if(type&&v.type!==type)return false;
    if(q&&!v.jp.includes(q)&&!v.kana.includes(q)&&!v.rom.includes(q)&&!v.th.toLowerCase().includes(q))return false;
    return true;
  });
  const el=document.getElementById('br-list');if(!el)return;
  el.innerHTML=list.map(v=>{const c=srsData[v.id];const dot={new:'dot-new',learning:'dot-learning',young:'dot-young',mature:'dot-mature'}[c?.state||'new']||'dot-new';
    return`<div class="vrow" onclick="showWordDetail('${v.id}')"><div class="srs-dot ${dot}" title="${c?.state||'new'}"></div><div class="vrow-jp">${v.jp}</div><div class="vrow-kana">${v.kana}</div><div class="vrow-th">${v.th}</div><span class="fcard-type tag-${v.type}" style="font-size:9px">${v.type}</span><div class="vrow-deck" style="color:${DECKS.find(d=>d.id===v.deck)?.col||'#fff'}">${v.level}</div></div>`;
  }).join('');
  document.getElementById('br-count').textContent=`à¹à¸ªà¸”à¸‡ ${list.length} / ${VOCAB.length} à¸„à¸³`;
}
function showWordDetail(id){
  const v=VOCAB.find(x=>x.id===id);if(!v)return;
  const srsData=loadSRS();const c=srsData[v.id]||{state:'new',reps:0,interval:0};
  showN(`${v.jp} = ${v.th} | reps:${c.reps} | ${c.state}`,'info');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ: MULTIPLE CHOICE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let mcS={};
function initQuiz(){initMC();}
function initMC(){
  const el=document.getElementById('mc-wrap');if(!el)return;
  const pool=shuf(VOCAB).slice(0,15);mcS={qs:pool,idx:0,score:0,ans:false};
  renderMC();
}
function renderMC(){
  const el=document.getElementById('mc-wrap');if(!el)return;
  if(mcS.idx>=mcS.qs.length){el.innerHTML=`<div style="text-align:center;padding:24px"><div style="font-size:52px">ğŸ¯</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--green);font-weight:700">${mcS.score}/${mcS.qs.length*10}</div><div style="color:var(--text2);margin-top:8px">${Math.round(mcS.score/(mcS.qs.length*10)*100)}% à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</div><button class="btn bgr" onclick="initMC()" style="margin-top:18px">ğŸ”„ à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button></div>`;return;}
  const v=mcS.qs[mcS.idx];mcS.ans=false;
  const wrongs=shuf(VOCAB.filter(x=>x.id!==v.id)).slice(0,3);
  const opts=shuf([v,...wrongs]);
  el.innerHTML=`<div class="sbar" style="background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:10px 14px;display:flex;justify-content:space-between;margin-bottom:16px;font-size:12px;color:var(--text2)"><span>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ ${mcS.idx+1}/${mcS.qs.length}</span><span style="font-family:'Playfair Display';font-size:20px;color:var(--green)">${mcS.score}</span></div>
    <div class="pbar" style="margin-bottom:18px"><div class="pbf" style="width:${(mcS.idx/mcS.qs.length)*100}%"></div></div>
    <div style="text-align:center;margin-bottom:18px"><span class="fcard-type tag-${v.type}">${v.type}</span><div style="font-family:'Noto Serif JP';font-size:52px;color:var(--white);font-weight:900;margin:10px 0">${v.jp}</div><div style="font-family:'DM Mono';font-size:13px;color:var(--text2)">${v.kana}</div></div>
    <div class="qopts" id="mc-opts"></div>
    <div id="mc-note" style="min-height:24px;font-size:13px;color:var(--text2);margin-top:8px"></div>
    <button class="btn bgr" id="mc-nxt" style="display:none;margin-top:12px" onclick="mcS.idx++;renderMC()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button>`;
  const oc=document.getElementById('mc-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.textContent=o.th;
    b.onclick=()=>{if(mcS.ans)return;mcS.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===v.th)x.classList.add('ok');else if(x===b&&o.id!==v.id)x.classList.add('bad');});
      if(o.id===v.id){mcS.score+=10;showN('âœ“ à¸–à¸¹à¸!','ok');}else showN('âœ— '+v.th,'bad');
      document.getElementById('mc-note').textContent='ğŸ’¡ '+v.jp+' ('+v.rom+') = '+v.th;document.getElementById('mc-nxt').style.display='block';};oc.appendChild(b);});
}

// REVERSE QUIZ
let revS={};
function initRev(){
  const el=document.getElementById('rev-wrap');if(!el)return;
  const pool=shuf(VOCAB).slice(0,15);revS={qs:pool,idx:0,score:0,ans:false};renderRev();
}
function renderRev(){
  const el=document.getElementById('rev-wrap');if(!el)return;
  if(revS.idx>=revS.qs.length){el.innerHTML=`<div style="text-align:center;padding:24px"><div style="font-size:52px">ğŸ”„</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--green)">${revS.score}/${revS.qs.length*10}</div><button class="btn bgr" onclick="initRev()" style="margin-top:18px">ğŸ”„ à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button></div>`;return;}
  const v=revS.qs[revS.idx];revS.ans=false;
  const wrongs=shuf(VOCAB.filter(x=>x.id!==v.id)).slice(0,3);
  const opts=shuf([v,...wrongs]);
  el.innerHTML=`<div style="display:flex;justify-content:space-between;margin-bottom:14px;font-size:12px;color:var(--text2)"><span>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ ${revS.idx+1}/${revS.qs.length}</span><span style="font-family:'Playfair Display';font-size:20px;color:var(--green)">${revS.score}</span></div>
    <div class="pbar" style="margin-bottom:18px"><div class="pbf" style="width:${(revS.idx/revS.qs.length)*100}%"></div></div>
    <div style="text-align:center;background:var(--surface);border:1px solid var(--border2);border-radius:14px;padding:20px;margin-bottom:18px"><div style="font-size:13px;color:var(--text2);margin-bottom:8px">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ â†’ à¹€à¸¥à¸·à¸­à¸ Japanese</div><div style="font-size:22px;color:var(--white);font-weight:700">${v.th}</div><div style="font-family:'DM Mono';font-size:11px;color:var(--text3);margin-top:4px">${v.type}</div></div>
    <div class="qopts" id="rev-opts"></div>
    <button class="btn bgr" id="rev-nxt" style="display:none;margin-top:12px" onclick="revS.idx++;renderRev()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button>`;
  const oc=document.getElementById('rev-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.fontFamily="'Noto Serif JP'";b.style.fontSize='20px';b.textContent=o.jp;
    b.onclick=()=>{if(revS.ans)return;revS.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===v.jp)x.classList.add('ok');else if(x===b&&o.id!==v.id)x.classList.add('bad');});
      if(o.id===v.id){revS.score+=10;showN('âœ“','ok');}else showN('âœ— '+v.jp,'bad');document.getElementById('rev-nxt').style.display='block';};oc.appendChild(b);});
}

// SPEED QUIZ
let spS={};
function initSpeedQuiz(){
  const el=document.getElementById('speed-wrap');if(!el)return;
  spS={qs:shuf(VOCAB),idx:0,score:0,tLeft:60,combo:0,ans:false};
  el.innerHTML=`<div style="display:flex;gap:16px;margin-bottom:14px;flex-wrap:wrap">
    <div style="text-align:center;flex:1"><div style="font-size:9px;color:var(--text2);font-family:'DM Mono';text-transform:uppercase">Time</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--green2);font-weight:700" id="sp-t">60</div></div>
    <div style="text-align:center;flex:1"><div style="font-size:9px;color:var(--text2);font-family:'DM Mono';text-transform:uppercase">Score</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--gold2);font-weight:700" id="sp-s">0</div></div>
    <div style="text-align:center;flex:1"><div style="font-size:9px;color:var(--text2);font-family:'DM Mono';text-transform:uppercase">Combo</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--purple);font-weight:700" id="sp-c">Ã—1</div></div>
  </div>
  <div class="pbar" style="margin-bottom:16px"><div class="pbf" id="sp-pb" style="width:100%"></div></div>
  <div id="sp-q"></div>`;
  renderSP();
  const tmr=setInterval(()=>{spS.tLeft-=0.1;const t=document.getElementById('sp-t'),pb=document.getElementById('sp-pb');
    if(t){t.textContent=Math.ceil(spS.tLeft);if(spS.tLeft<=10)t.style.color='var(--red2)';}
    if(pb)pb.style.width=(spS.tLeft/60*100)+'%';
    if(spS.tLeft<=0){clearInterval(tmr);document.getElementById('sp-q').innerHTML=`<div style="text-align:center;padding:20px"><div style="font-size:52px">âš¡</div><div style="font-family:'Playfair Display';font-size:48px;color:var(--gold2)">${spS.score}</div><div style="color:var(--text2)">à¸„à¸°à¹à¸™à¸™ | Combo max: Ã—${spS.combo}</div><button class="btn bgr" onclick="initSpeedQuiz()" style="margin-top:14px">ğŸ”„ à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸</button></div>`;}
  },100);
}
function renderSP(){
  const c=document.getElementById('sp-q');if(!c)return;spS.ans=false;
  const v=spS.qs[spS.idx%spS.qs.length];spS.idx++;
  const wrongs=shuf(VOCAB.filter(x=>x.id!==v.id)).slice(0,3);const opts=shuf([v,...wrongs]);
  c.innerHTML=`<div style="text-align:center;margin-bottom:14px"><div style="font-family:'Noto Serif JP';font-size:44px;color:var(--white);font-weight:900">${v.jp}</div><div style="font-family:'DM Mono';font-size:12px;color:var(--text2)">${v.kana}</div></div>
    <div class="qopts" id="sp-opts"></div>`;
  const oc=document.getElementById('sp-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.fontSize='12px';b.textContent=o.th;
    b.onclick=()=>{if(spS.ans)return;spS.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===v.th)x.classList.add('ok');else if(x===b&&o.id!==v.id)x.classList.add('bad');});
      if(o.id===v.id){spS.combo++;spS.score+=10*(spS.combo>=3?2:1);}else{spS.combo=0;}
      document.getElementById('sp-s').textContent=spS.score;document.getElementById('sp-c').textContent='Ã—'+(spS.combo||1);setTimeout(renderSP,300);};oc.appendChild(b);});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MATCHING GAME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let mGame={pairs:[],selected:null,matched:0,moves:0,startTime:0};
function initMatch(){
  const el=document.getElementById('match-wrap');if(!el)return;
  const words=shuf(VOCAB).slice(0,8);
  mGame={pairs:shuf([...words.map(v=>({id:v.id+'_jp',vid:v.id,text:v.jp,isJP:true})),...words.map(v=>({id:v.id+'_th',vid:v.id,text:v.th,isJP:false}))]),selected:null,matched:0,moves:0,startTime:Date.now()};
  renderMatch();
}
function renderMatch(){
  const el=document.getElementById('match-wrap');if(!el)return;
  el.innerHTML=`<div style="display:flex;justify-content:space-between;margin-bottom:14px;font-size:12px;color:var(--text2)"><span>ğŸ§© à¸ˆà¸±à¸šà¸„à¸¹à¹ˆ JP â†” Thai</span><div style="display:flex;gap:16px"><span>âœ“ <b style="color:var(--green)">${mGame.matched}/8</b></span><span>ğŸ‘† <b>${mGame.moves}</b></span></div></div>
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px" id="m-grid"></div>`;
  const grid=document.getElementById('m-grid');
  mGame.pairs.forEach(p=>{
    const b=document.createElement('div');b.dataset.id=p.id;b.dataset.vid=p.vid;b.dataset.isJP=p.isJP;
    b.style.cssText=`background:var(--surface);border:2px solid var(--border);border-radius:10px;padding:12px 8px;cursor:pointer;text-align:center;transition:all .2s;min-height:64px;display:flex;align-items:center;justify-content:center;font-size:${p.isJP?'18px':'13px'};font-family:${p.isJP?"'Noto Serif JP'":"'Sarabun'"};color:var(--white)`;
    if(p.isJP)b.style.fontWeight='900';
    b.textContent=p.text;b.onclick=()=>selectMatch(b,p);
    grid.appendChild(b);
  });
}
const matched_ids=new Set();
function selectMatch(el,p){
  if(el.dataset.done==='1')return;
  if(mGame.selected&&mGame.selected===el)return;
  el.style.borderColor='var(--green)';el.style.background='rgba(61,220,132,.15)';
  if(!mGame.selected){mGame.selected=el;return;}
  mGame.moves++;
  const prev=mGame.selected;mGame.selected=null;
  if(prev.dataset.vid===el.dataset.vid&&prev.dataset.isJP!==el.dataset.isJP){
    // Match!
    [prev,el].forEach(b=>{b.style.borderColor='var(--green2)';b.style.background='rgba(61,220,132,.2)';b.dataset.done='1';b.onclick=null;});
    mGame.matched++;showN('âœ“ Match!','ok');
    if(mGame.matched===8){const secs=Math.round((Date.now()-mGame.startTime)/1000);setTimeout(()=>{document.getElementById('match-wrap').innerHTML=`<div style="text-align:center;padding:24px"><div style="font-size:52px">ğŸ§©</div><div style="font-family:'Playfair Display';font-size:28px;color:var(--green);margin:12px 0">à¸ˆà¸±à¸šà¸„à¸¹à¹ˆà¸„à¸£à¸šà¹à¸¥à¹‰à¸§!</div><div style="color:var(--text2)">${mGame.moves} moves | ${secs} à¸§à¸´à¸™à¸²à¸—à¸µ</div><button class="btn bgr" onclick="initMatch()" style="margin-top:18px">ğŸ”„ à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸</button></div>`;},400);}
  }else{
    setTimeout(()=>{[prev,el].forEach(b=>{b.style.borderColor='var(--border)';b.style.background='var(--surface)';});},600);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TYPING PRACTICE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let tpS={};
function initTyping(){
  const el=document.getElementById('type-wrap');if(!el)return;
  tpS={qs:shuf(VOCAB).slice(0,15),idx:0,score:0,ans:false};renderTyping();
}
function renderTyping(){
  const el=document.getElementById('type-wrap');if(!el)return;
  if(tpS.idx>=tpS.qs.length){el.innerHTML=`<div style="text-align:center;padding:24px"><div style="font-size:52px">âŒ¨ï¸</div><div style="font-family:'Playfair Display';font-size:32px;color:var(--green)">${tpS.score}/${tpS.qs.length*10}</div><button class="btn bgr" onclick="initTyping()" style="margin-top:18px">ğŸ”„ à¸—à¸³à¸­à¸µà¸</button></div>`;return;}
  const v=tpS.qs[tpS.idx];tpS.ans=false;
  el.innerHTML=`<div style="display:flex;justify-content:space-between;margin-bottom:14px;font-size:12px;color:var(--text2)"><span>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ ${tpS.idx+1}/${tpS.qs.length}</span><span style="font-family:'Playfair Display';font-size:20px;color:var(--green)">${tpS.score}</span></div>
    <div class="pbar" style="margin-bottom:18px"><div class="pbf" style="width:${(tpS.idx/tpS.qs.length)*100}%"></div></div>
    <div style="text-align:center;margin-bottom:18px"><div style="font-size:13px;color:var(--text2);margin-bottom:8px">à¸à¸´à¸¡à¸à¹Œ romaji à¸‚à¸­à¸‡à¸„à¸³à¸™à¸µà¹‰</div><div style="font-family:'Noto Serif JP';font-size:52px;color:var(--white);font-weight:900">${v.jp}</div><div style="color:var(--text2);margin-top:4px">${v.th}</div></div>
    <input class="tinput" id="tp-in" placeholder="à¸à¸´à¸¡à¸à¹Œ romaji à¸—à¸µà¹ˆà¸™à¸µà¹ˆ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" onkeydown="if(event.key==='Enter')checkTyping()">
    <div id="tp-hint" style="font-family:'DM Mono';font-size:12px;color:var(--text3);margin-top:8px">hint: ${v.rom[0]}${'_'.repeat(v.rom.length-1)}</div>
    <div id="tp-fb" style="min-height:24px;font-size:13px;color:var(--text2);margin-top:8px"></div>
    <div style="display:flex;gap:8px;margin-top:12px"><button class="btn bgr" onclick="checkTyping()" style="flex:1">âœ“ à¸•à¸£à¸§à¸ˆ</button><button class="btn bol" onclick="tpS.idx++;renderTyping()" style="flex:1">Skip â†’</button></div>`;
  setTimeout(()=>document.getElementById('tp-in')?.focus(),100);
}
function checkTyping(){
  if(tpS.ans)return;const v=tpS.qs[tpS.idx];const inp=document.getElementById('tp-in');const fb=document.getElementById('tp-fb');
  if(!inp)return;const val=inp.value.trim().toLowerCase();
  const correct=v.rom.toLowerCase().replace(/ suru$/,'').split('/').some(r=>val===r.trim())||val===v.rom.toLowerCase();
  tpS.ans=true;
  if(correct){inp.classList.add('ok');tpS.score+=10;fb.textContent='âœ“ à¸–à¸¹à¸! '+v.jp+' ('+v.rom+')';fb.style.color='var(--green2)';showN('âœ“','ok');setTimeout(()=>{tpS.idx++;renderTyping();},700);}
  else{inp.classList.add('bad');fb.textContent='âœ— à¸„à¸³à¸•à¸­à¸šà¸„à¸·à¸­: '+v.rom;fb.style.color='var(--red2)';showN('âœ— '+v.rom,'bad');}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initStats(){
  const srsData=loadSRS();const cards=VOCAB.map(v=>({v,c:srsData[v.id]||{state:'new',reps:0}}));
  const byState={new:0,learning:0,young:0,mature:0};
  cards.forEach(x=>{byState[x.c.state]=(byState[x.c.state]||0)+1;});
  const st=loadStats();
  // Top stats
  const el=document.getElementById('stat-top');if(el){
    el.innerHTML=[
      {n:Object.values(srsData).filter(c=>c.reps>0).length,l:'Total Learned',c:'var(--green)'},
      {n:byState.mature||0,l:'Mature Cards',c:'var(--text3)'},
      {n:st.dailyReviewed||0,l:"Today's Reviews",c:'var(--gold2)'},
    ].map(s=>`<div class="card" style="text-align:center"><div class="stat-num" style="color:${s.c}">${s.n}</div><div class="stat-lbl">${s.l}</div></div>`).join('');
  }
  // Distribution
  const dd=document.getElementById('stat-dist');if(dd){
    const cols={new:'var(--blue)',learning:'var(--gold)',young:'var(--green)',mature:'var(--text3)'};
    const labels={new:'New ğŸ”µ',learning:'Learning ğŸŸ¡',young:'Young ğŸŸ¢',mature:'Mature âš«'};
    const total=VOCAB.length;
    dd.innerHTML=Object.entries(byState).map(([k,v])=>`<div style="margin-bottom:10px"><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:3px"><span>${labels[k]}</span><span style="color:${cols[k]};font-family:'DM Mono'">${v}</span></div><div class="pbar"><div class="pbf" style="width:${v/total*100}%;background:${cols[k]}"></div></div></div>`).join('');
  }
  // Deck stats
  const dp=document.getElementById('stat-deck');if(dp){
    dp.innerHTML=DECKS.map(d=>{const words=VOCAB.filter(v=>v.deck===d.id);const done=words.filter(v=>srsData[v.id]&&srsData[v.id].reps>0).length;const pct=Math.round(done/words.length*100);
      return`<div style="margin-bottom:10px"><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:3px"><span>${d.icon} ${d.name}</span><span style="color:${d.col};font-family:'DM Mono'">${done}/${words.length} (${pct}%)</span></div><div class="pbar"><div class="pbf" style="width:${pct}%;background:${d.col}88"></div></div></div>`;
    }).join('');
  }
  // Heatmap (last 48 weeks)
  const heat=document.getElementById('heat');if(heat){
    const history=(st.history||[]);heat.innerHTML='';
    for(let i=47;i>=0;i--){const d=new Date(Date.now()-i*7*86400000);const ds=d.toISOString().slice(0,10);const has=history.includes(ds);const cell=document.createElement('div');cell.className='heat-cell';cell.style.background=has?'var(--green)':'var(--surface)';cell.title=ds;heat.appendChild(cell);}
  }
}

// DECKS PAGE
function initDecks(){
  const el=document.getElementById('deck-list');if(!el)return;const srsData=loadSRS();
  el.innerHTML=DECKS.map(d=>{
    const words=VOCAB.filter(v=>v.deck===d.id);const done=words.filter(v=>srsData[v.id]&&srsData[v.id].reps>0).length;const pct=Math.round(done/words.length*100);
    const due=words.filter(v=>{const c=srsData[v.id];return c&&c.due<=Date.now()&&c.state!=='new';}).length;
    return`<div class="deck-card" style="border-color:${d.col}44" onclick="nav('browse')"><div style="font-size:24px">${d.icon}</div><div class="deck-title">${d.name}</div><div class="deck-count" style="color:${d.col}">${words.length} à¸„à¸³${due>0?' | '+due+' due':''}</div><div style="font-size:11px;color:var(--text3);margin:3px 0">${d.desc}</div><div class="pbar" style="margin-top:10px"><div class="pbf" style="width:${pct}%;background:${d.col}"></div></div><div style="font-size:10px;color:var(--text3);margin-top:4px;font-family:'DM Mono'">${done}/${words.length} (${pct}%)</div></div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.onload=()=>{
  initHome();updateBadge();
  // Check streak
  const st=loadStats();const td=today();const yest=new Date(Date.now()-86400000).toISOString().slice(0,10);
  if(st.lastDate&&st.lastDate!==td&&st.lastDate!==yest){st.streak=0;saveStats(st);}
};
</script>

<style>
#yor-credit{position:fixed;bottom:0;left:0;right:0;background:rgba(10,10,15,.92);backdrop-filter:blur(10px);border-top:1px solid rgba(232,84,122,.2);padding:5px 16px;display:flex;align-items:center;justify-content:space-between;z-index:9999;font-family:'Sarabun',sans-serif;flex-wrap:wrap;gap:6px}
#yor-credit .yc-left{display:flex;align-items:center;gap:10px}
#yor-credit .yc-name{font-size:12px;font-weight:700;color:#e8547a;letter-spacing:.5px}
#yor-credit .yc-stage{font-size:10px;color:rgba(200,200,232,.5);font-family:'DM Mono',monospace}
#yor-credit .yc-back{font-size:10px;color:rgba(200,200,232,.5);text-decoration:none;border:1px solid rgba(232,84,122,.3);border-radius:6px;padding:3px 10px;transition:all .2s}
#yor-credit .yc-back:hover{color:#e8547a;border-color:#e8547a}
#yor-credit .yc-dash{font-size:10px;color:rgba(200,180,255,.5);text-decoration:none;border:1px solid rgba(155,122,255,.3);border-radius:6px;padding:3px 10px;transition:all .2s}
#yor-credit .yc-dash:hover{color:#c8a8ff;border-color:rgba(155,122,255,.8);background:rgba(155,122,255,.08)}
body{padding-bottom:60px}
</style>
<div id="yor-credit">
  <div class="yc-left">
    <span class="yc-name">Yor</span>
    <span class="yc-stage">èªå½™é“å ´ Stage 3 â€” Vocabulary SRS &nbsp;Â·&nbsp; Yor's Road to Reading Japanese Manga</span>
  </div>
  <div style="display:flex;align-items:center;gap:6px">
    <a class="yc-dash" href="dashboard.html" onclick="sessionStorage.setItem('db_from','stage3')">ğŸ“Š Dashboard</a>
    <a class="yc-back" href="index.html">â† Portal</a>
</div>
  </div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FIREBASE â€” loaded from firebase.js
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
@keyframes fbShimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
@keyframes fbPulse{0%{opacity:1}50%{opacity:.4}100%{opacity:1}}
#fb-login-overlay{position:fixed;inset:0;background:rgba(5,5,15,.93);backdrop-filter:blur(16px);z-index:99999;display:flex;align-items:center;justify-content:center;font-family:'Sarabun',sans-serif}
#fb-login-box{background:#0f0f1a;border:1px solid rgba(232,84,122,.3);border-radius:20px;padding:36px 40px;text-align:center;max-width:380px;width:90%}
#fb-login-box .fb-logo{font-size:48px;margin-bottom:12px}
#fb-login-box .fb-title{font-size:22px;font-weight:700;color:#fff;margin-bottom:6px}
#fb-login-box .fb-sub{font-size:13px;color:rgba(200,200,240,.5);margin-bottom:24px;line-height:1.7}
#fb-google-btn{display:flex;align-items:center;gap:10px;justify-content:center;background:#fff;color:#333;border:none;border-radius:10px;padding:12px 24px;font-size:14px;font-weight:700;cursor:pointer;width:100%;transition:all .2s;font-family:'Sarabun',sans-serif}
#fb-google-btn:hover{background:#f0f0f0;transform:translateY(-2px);box-shadow:0 4px 16px rgba(255,255,255,.15)}
#fb-google-btn img{width:20px;height:20px}
#fb-skip{display:block;margin-top:14px;font-size:11px;color:rgba(200,200,240,.35);cursor:pointer;text-decoration:underline;transition:color .2s}
#fb-skip:hover{color:rgba(200,200,240,.7)}
</style>

<div id="fb-login-overlay">
  <div id="fb-login-box">
    <div class="fb-logo">ğŸŒ</div>
    <div class="fb-title">Yor's Road to Manga</div>
    <div class="fb-sub">Login à¸”à¹‰à¸§à¸¢ Google à¹€à¸à¸·à¹ˆà¸­ sync progress<br>à¸‚à¹‰à¸²à¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ à¸‚à¹‰à¸²à¸¡ Browser à¹„à¸”à¹‰à¸—à¸¸à¸à¸—à¸µà¹ˆ</div>
    <button id="fb-google-btn" onclick="fbSignIn()">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
      Login à¸”à¹‰à¸§à¸¢ Google
    </button>
    <span id="fb-skip" onclick="fbSkip()">à¸‚à¹‰à¸²à¸¡à¹„à¸›à¸à¹ˆà¸­à¸™ (à¹„à¸¡à¹ˆ sync)</span>
  </div>
</div>

<script type="module" src="firebase.js"></script>

</body>
</html>
