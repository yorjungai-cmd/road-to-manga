<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ–‡æ³•é“å ´ â€” Japanese Grammar Stage 2</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700;900&family=Noto+Sans+JP:wght@300;400;500;700&family=Sarabun:wght@300;400;500;600;700&family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--ink:#0b0b18;--ink2:#12122a;--ink3:#1a1a38;--paper:#1e1e40;--paper2:#252550;--border:#2e2e5e;--amber:#e8c87a;--amber2:#f5e0a0;--red:#c0392b;--red2:#e74c3c;--jade:#1a7a5e;--jade2:#27ae60;--blue:#2271b3;--blue2:#3498db;--text:#d8d8f0;--text2:#8888bb;--text3:#444480;--white:#f0f0ff;--gold:#d4a520;--gold2:#f0c040;--sw:230px}
*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
body{font-family:'Sarabun','Noto Sans JP',sans-serif;background:var(--ink);color:var(--text);min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--ink)}::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
.sidebar{position:fixed;left:0;top:0;width:var(--sw);height:100vh;background:var(--ink2);border-right:1px solid var(--border);z-index:100;display:flex;flex-direction:column;overflow-y:auto}
.logo{padding:18px 16px 14px;border-bottom:1px solid var(--border);background:linear-gradient(135deg,rgba(232,200,122,.06),transparent)}
.logo-jp{font-family:'Noto Serif JP';font-size:18px;color:var(--amber);font-weight:900;letter-spacing:2px}
.logo-en{font-family:'Cinzel';font-size:8px;color:var(--text3);letter-spacing:3px;text-transform:uppercase;margin-top:3px}
.logo-badge{display:inline-block;background:linear-gradient(90deg,var(--red),var(--red2));color:#fff;font-size:9px;padding:2px 8px;border-radius:10px;margin-top:5px;font-weight:700;letter-spacing:1px}
.ng{padding:6px 0;border-bottom:1px solid var(--border)}
.ngl{font-size:8px;letter-spacing:2px;color:var(--text3);text-transform:uppercase;padding:5px 16px 3px}
.ni{display:flex;align-items:center;gap:8px;padding:8px 16px;cursor:pointer;font-size:12px;color:var(--text2);border-left:3px solid transparent;transition:all .2s}
.ni:hover{background:var(--paper);color:var(--text)}.ni.active{background:linear-gradient(90deg,rgba(232,200,122,.08),transparent);color:var(--amber);border-left-color:var(--amber)}
.nicon{font-size:14px;width:18px;text-align:center;flex-shrink:0}
.np{margin-left:auto;font-size:9px;background:var(--paper2);padding:2px 5px;border-radius:6px;color:var(--amber);white-space:nowrap}
.main{margin-left:var(--sw);min-height:100vh}
.page{display:none;padding:28px;animation:fadeUp .3s ease}.page.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.phd{margin-bottom:24px;padding-bottom:18px;border-bottom:1px solid var(--border)}
.phd h1{font-family:'Noto Serif JP';font-size:28px;color:var(--white);font-weight:900}
.phd .jps{font-size:12px;color:var(--amber);margin-top:3px;font-family:'Noto Serif JP'}
.phd p{font-size:13px;color:var(--text2);margin-top:6px;line-height:1.7;max-width:640px}
.tabs{display:flex;gap:0;margin-bottom:20px;border-bottom:1px solid var(--border);flex-wrap:wrap}
.tab{padding:9px 16px;font-size:12px;cursor:pointer;color:var(--text2);border-bottom:2px solid transparent;transition:all .2s;font-family:'Sarabun';white-space:nowrap}
.tab:hover{color:var(--text)}.tab.active{color:var(--amber);border-bottom-color:var(--amber)}
.tp{display:none}.tp.active{display:block}
.card{background:var(--paper);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:16px}
.ct{font-size:14px;font-weight:700;color:var(--white);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.ibox{background:rgba(26,122,94,.12);border:1px solid var(--jade);border-radius:8px;padding:11px 14px;font-size:13px;color:#5ddb9a;margin-bottom:14px;line-height:1.7}
.abox{background:rgba(212,165,32,.1);border:1px solid var(--gold);border-radius:8px;padding:11px 14px;font-size:13px;color:var(--amber2);margin-bottom:14px;line-height:1.7}
.rbox{background:rgba(192,57,43,.1);border-left:4px solid var(--red2);border-radius:0 8px 8px 0;padding:11px 14px;font-size:13px;color:#f0a0a0;margin:10px 0;line-height:1.7}
.ex{background:var(--ink3);border-left:3px solid var(--amber);padding:10px 14px;border-radius:0 8px 8px 0;margin:8px 0}
.exj{font-family:'Noto Sans JP';font-size:16px;color:var(--white)}
.exr{font-size:11px;color:var(--text3);font-style:italic;margin-top:2px}
.ext{font-size:12px;color:var(--text2);margin-top:4px}
.exn{font-size:11px;color:var(--gold);margin-top:4px}
.gt{width:100%;border-collapse:collapse;font-size:12px;margin:10px 0}
.gt th{background:var(--paper2);color:var(--amber);padding:8px 12px;text-align:left;font-size:10px;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid var(--border)}
.gt td{padding:9px 12px;border-bottom:1px solid var(--border);color:var(--text);vertical-align:top}
.gt tr:last-child td{border-bottom:none}.gt tr:hover td{background:rgba(232,200,122,.04)}
.gt .jp{font-family:'Noto Sans JP';font-size:15px;color:var(--white)}
.gt .am{color:var(--amber);font-weight:700}.gt .jd{color:var(--jade2)}.gt .rd{color:var(--red2)}
.btn{padding:9px 20px;border:none;border-radius:8px;cursor:pointer;font-family:'Sarabun';font-size:13px;font-weight:600;transition:all .2s}
.bam{background:var(--amber);color:#000}.bam:hover{background:var(--amber2);transform:translateY(-1px)}
.bred{background:var(--red2);color:#fff}.bred:hover{background:var(--red)}
.bjd{background:var(--jade);color:#fff}.bjd:hover{background:var(--jade2)}
.bol{background:transparent;color:var(--text2);border:1px solid var(--border)}.bol:hover{border-color:var(--amber);color:var(--amber)}
.qchar{font-family:'Noto Sans JP';font-size:18px;color:var(--white);background:var(--ink3);border:1px solid var(--border);border-radius:10px;padding:14px 18px;margin:14px 0;line-height:1.8;white-space:pre-wrap}
.qopts{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
.qopt{padding:9px 18px;background:var(--paper2);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:15px;font-family:'Noto Sans JP';color:var(--text);transition:all .15s}
.qopt:hover{border-color:var(--amber);background:rgba(232,200,122,.08)}
.qopt.ok{border-color:var(--jade2);background:rgba(39,174,96,.15);color:var(--jade2)}
.qopt.bad{border-color:var(--red2);background:rgba(231,76,60,.12);color:var(--red2)}
.sbar{display:flex;justify-content:space-between;align-items:center;background:var(--ink3);border-radius:8px;padding:9px 14px;margin-bottom:14px;font-size:12px;color:var(--text2)}
.snum{font-family:'Noto Serif JP';font-size:20px;color:var(--amber);font-weight:900}
.pbar{height:5px;background:var(--paper2);border-radius:3px;overflow:hidden}
.pbf{height:100%;background:linear-gradient(90deg,var(--jade),var(--amber));border-radius:3px;transition:width .4s}
.notif{position:fixed;bottom:18px;right:18px;background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:10px 16px;font-size:13px;z-index:999;transform:translateY(60px);opacity:0;transition:all .3s}
.notif.show{transform:translateY(0);opacity:1}.notif.ok{border-color:var(--jade2);color:#5ddb9a}.notif.bad{border-color:var(--red2);color:var(--red2)}
.ham{color:var(--amber);font-weight:700}.hjd{color:var(--jade2);font-weight:700}.hrd{color:var(--red2);font-weight:700}
.vtag{display:inline-block;padding:2px 7px;border-radius:4px;font-size:10px;font-weight:700;letter-spacing:1px;margin-right:4px}
.vru{background:rgba(52,152,219,.2);color:#5dade2;border:1px solid #2980b9}
.vu{background:rgba(39,174,96,.2);color:var(--jade2);border:1px solid var(--jade)}
.virr{background:rgba(231,76,60,.2);color:var(--red2);border:1px solid var(--red)}
.acc{margin-bottom:8px}
.acch{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--paper);border:1px solid var(--border);border-radius:10px;cursor:pointer;transition:all .2s}
.acch:hover{background:var(--paper2)}.acch.open{border-radius:10px 10px 0 0;border-color:var(--amber)}
.accb{display:none;background:var(--ink3);border:1px solid var(--amber);border-top:none;border-radius:0 0 10px 10px;padding:14px 16px}
.accb.open{display:block}
.gcard{background:var(--paper);border:2px solid var(--border);border-radius:14px;padding:18px;cursor:pointer;transition:all .2s;text-align:center}
.gcard:hover{border-color:var(--amber);transform:translateY(-3px);box-shadow:0 8px 24px rgba(232,200,122,.1)}
.gtitle{font-size:15px;font-weight:700;color:var(--white);margin:8px 0 5px}
.gdesc{font-size:12px;color:var(--text2);line-height:1.5}
.wbank{display:flex;flex-wrap:wrap;gap:7px;background:var(--ink3);border:1px dashed var(--border);border-radius:10px;padding:12px;min-height:54px;margin:10px 0}
.wtok{padding:6px 12px;background:var(--paper2);border:1px solid var(--border);border-radius:6px;font-family:'Noto Sans JP';font-size:14px;cursor:pointer;transition:all .15s;user-select:none}
.wtok:hover{border-color:var(--amber);color:var(--amber)}.wtok.used{opacity:.3;pointer-events:none}.wtok.inans{background:rgba(232,200,122,.15);border-color:var(--amber);color:var(--amber)}
.azone{display:flex;flex-wrap:wrap;gap:7px;background:rgba(232,200,122,.05);border:2px dashed var(--amber);border-radius:10px;padding:12px;min-height:54px;margin:10px 0;align-items:center}
.aph{font-size:11px;color:var(--text3)}
@keyframes popIn{0%{transform:scale(.8);opacity:0}60%{transform:scale(1.08)}100%{transform:scale(1);opacity:1}}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-8px)}50%{transform:translateX(8px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}
.pop{animation:popIn .3s ease}.shk{animation:shake .3s ease}
.divider{height:1px;background:var(--border);margin:16px 0}
/* SPEAK BUTTON */
.speak-btn{background:none;border:1px solid var(--border);color:var(--text2);border-radius:20px;padding:4px 10px;cursor:pointer;font-size:13px;transition:border-color .2s,color .2s;line-height:1}
.speak-btn:hover{border-color:var(--amber);color:var(--amber)}
</style>
</head>
<body>

<nav class="sidebar">
  <div class="logo">
    <div class="logo-jp">æ–‡æ³•é“å ´</div>
    <div class="logo-en">Grammar Dojo Â· Stage 2</div>
    <div class="logo-badge">N5 â†’ N4 GRAMMAR</div>
  </div>
  <div class="ng">
    <div class="ngl">Overview</div>
    <div class="ni active" onclick="nav('home')"><span class="nicon">ğŸ¯</span> à¹à¸”à¸Šà¸šà¸­à¸£à¹Œà¸”</div>
    <div class="ni" onclick="nav('sources')"><span class="nicon">ğŸ“š</span> à¹à¸«à¸¥à¹ˆà¸‡à¹€à¸£à¸µà¸¢à¸™</div>
  </div>
  <div class="ng">
    <div class="ngl">à¸šà¸—à¹€à¸£à¸µà¸¢à¸™</div>
    <div class="ni" onclick="nav('verb')"><span class="nicon">ğŸ”µ</span> Verb Conjugation<span class="np" id="np-verb">0%</span></div>
    <div class="ni" onclick="nav('particle')"><span class="nicon">ğŸŸ¡</span> Particles<span class="np" id="np-part">0%</span></div>
    <div class="ni" onclick="nav('naitai')"><span class="nicon">ğŸ”´</span> ãªã„ãƒ»ãŸã„ãƒ»ã§ãã‚‹<span class="np" id="np-nai">0%</span></div>
    <div class="ni" onclick="nav('cond')"><span class="nicon">ğŸŸ¢</span> Conditionals<span class="np" id="np-cond">0%</span></div>
    <div class="ni" onclick="nav('endings')"><span class="nicon">ğŸŸ£</span> Sentence Endings<span class="np" id="np-end">0%</span></div>
  </div>
  <div class="ng">
    <div class="ngl">Practice</div>
    <div class="ni" onclick="nav('games')"><span class="nicon">ğŸ®</span> Grammar Games</div>
    <div class="ni" onclick="nav('mquiz')"><span class="nicon">ğŸ†</span> Master Quiz</div>
  </div>
  <div class="ng" style="margin-top:auto;border-top:1px solid var(--border);padding:8px 0">
    <a class="ni" href="dashboard.html" onclick="localStorage.setItem('lastPage','grammar-stage2.html')" style="text-decoration:none;color:inherit">
      <span class="nicon">ğŸ“Š</span>
      <span style="color:#e8547a;font-weight:600">Student Dashboard</span>
    </a>
    <a class="ni" href="index.html" style="text-decoration:none;color:inherit">
      <span class="nicon">ğŸ </span>
      <span style="color:var(--text2)">â† Portal</span>
    </a>
  </div>
</nav>

<main class="main">

<!-- HOME -->
<div class="page active" id="page-home">
  <div class="phd"><h1>à¸”à¹ˆà¸²à¸™à¸—à¸µà¹ˆ 2 â€” Grammar N5â†’N4</h1><div class="jps">æ–‡æ³•ã®é“ â€” Bunpou no Michi</div><p>à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸à¸«à¸±à¸§à¸‚à¹‰à¸­ Grammar à¸ˆà¸³à¹€à¸›à¹‡à¸™à¸à¹ˆà¸­à¸™à¸­à¹ˆà¸²à¸™à¸¡à¸±à¸‡à¸‡à¸° â€” à¹€à¸£à¸µà¸¢à¸™ â†’ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ â†’ Quiz â†’ à¹€à¸à¸¡à¸ªà¹Œ</p></div>
  <div class="g2" style="margin-bottom:16px">
    <div class="card"><div class="ct">ğŸ“Š à¸„à¸§à¸²à¸¡à¸à¹‰à¸²à¸§à¸«à¸™à¹‰à¸²</div>
      <div style="display:flex;flex-direction:column;gap:10px" id="home-prog"></div>
    </div>
    <div>
      <div class="card" style="margin-bottom:12px"><div class="ct">ğŸ¯ à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸§à¸±à¸™à¸™à¸µà¹‰</div>
        <div style="display:flex;flex-direction:column;gap:8px;font-size:13px;color:var(--text2)">
          <label style="display:flex;gap:8px;align-items:center;cursor:pointer"><input type="checkbox" id="g1" style="accent-color:var(--amber)" onchange="saveGoal()"> à¹€à¸£à¸µà¸¢à¸™ 1 à¸šà¸—à¸ˆà¸™à¸ˆà¸š</label>
          <label style="display:flex;gap:8px;align-items:center;cursor:pointer"><input type="checkbox" id="g2" style="accent-color:var(--amber)" onchange="saveGoal()"> à¸—à¸³ Quiz â‰¥70%</label>
          <label style="display:flex;gap:8px;align-items:center;cursor:pointer"><input type="checkbox" id="g3" style="accent-color:var(--amber)" onchange="saveGoal()"> à¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡à¸ªà¹Œ 1 à¸£à¸­à¸š</label>
        </div>
      </div>
      <div class="card"><div class="ct">âš¡ à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¥à¸¢</div>
        <div style="display:flex;gap:7px;flex-wrap:wrap">
          <button class="btn bam" onclick="nav('verb')" style="font-size:12px">ğŸ”µ Verbs</button>
          <button class="btn bol" onclick="nav('particle')" style="font-size:12px">ğŸŸ¡ Particles</button>
          <button class="btn bol" onclick="nav('naitai')" style="font-size:12px">ğŸ”´ ãªã„/ãŸã„</button>
          <button class="btn bol" onclick="nav('cond')" style="font-size:12px">ğŸŸ¢ If/When</button>
          <button class="btn bol" onclick="nav('games')" style="font-size:12px">ğŸ® Games</button>
        </div>
      </div>
    </div>
  </div>
  <div class="card"><div class="ct">ğŸ—ºï¸ Grammar Roadmap N5â†’N4</div>
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;margin-top:8px">
      <div style="background:var(--ink3);border:1px solid #2980b9;border-radius:10px;padding:12px;cursor:pointer" onclick="nav('verb')">
        <div style="font-size:18px">ğŸ”µ</div><div style="font-size:12px;font-weight:700;color:var(--white);margin:5px 0">Verb Conjugation</div>
        <div style="font-size:10px;color:var(--text2)">ã‚‹/ã† verbs Â· ã¦ Â· ãŸ</div>
        <div style="display:inline-block;background:rgba(192,57,43,.2);color:var(--red2);border:1px solid var(--red);border-radius:10px;font-size:9px;font-weight:700;padding:2px 7px;margin-top:6px">N5</div>
      </div>
      <div style="background:var(--ink3);border:1px solid #d4a520;border-radius:10px;padding:12px;cursor:pointer" onclick="nav('particle')">
        <div style="font-size:18px">ğŸŸ¡</div><div style="font-size:12px;font-weight:700;color:var(--white);margin:5px 0">Particles</div>
        <div style="font-size:10px;color:var(--text2)">ã¯ ãŒ ã‚’ ã« ã§ ã‹ã‚‰</div>
        <div style="display:inline-block;background:rgba(192,57,43,.2);color:var(--red2);border:1px solid var(--red);border-radius:10px;font-size:9px;font-weight:700;padding:2px 7px;margin-top:6px">N5</div>
      </div>
      <div style="background:var(--ink3);border:1px solid var(--red2);border-radius:10px;padding:12px;cursor:pointer" onclick="nav('naitai')">
        <div style="font-size:18px">ğŸ”´</div><div style="font-size:12px;font-weight:700;color:var(--white);margin:5px 0">ãªã„ãƒ»ãŸã„ãƒ»ã§ãã‚‹</div>
        <div style="font-size:10px;color:var(--text2)">à¸›à¸à¸´à¹€à¸ªà¸˜ à¸­à¸¢à¸²à¸ à¸—à¸³à¹„à¸”à¹‰</div>
        <div style="display:inline-block;background:rgba(192,57,43,.2);color:var(--red2);border:1px solid var(--red);border-radius:10px;font-size:9px;font-weight:700;padding:2px 7px;margin-top:6px">N5</div>
      </div>
      <div style="background:var(--ink3);border:1px solid var(--jade);border-radius:10px;padding:12px;cursor:pointer" onclick="nav('cond')">
        <div style="font-size:18px">ğŸŸ¢</div><div style="font-size:12px;font-weight:700;color:var(--white);margin:5px 0">Conditionals</div>
        <div style="font-size:10px;color:var(--text2)">ã¨ Â· ãŸã‚‰ Â· ã°</div>
        <div style="display:inline-block;background:rgba(212,165,32,.2);color:var(--gold2);border:1px solid var(--gold);border-radius:10px;font-size:9px;font-weight:700;padding:2px 7px;margin-top:6px">N4</div>
      </div>
      <div style="background:var(--ink3);border:1px solid #8e44ad;border-radius:10px;padding:12px;cursor:pointer" onclick="nav('endings')">
        <div style="font-size:18px">ğŸŸ£</div><div style="font-size:12px;font-weight:700;color:var(--white);margin:5px 0">Sentence Endings</div>
        <div style="font-size:10px;color:var(--text2)">ã‹ Â· ã­ Â· ã‚ˆ Â· ã‚ˆã­</div>
        <div style="display:inline-block;background:rgba(192,57,43,.2);color:var(--red2);border:1px solid var(--red);border-radius:10px;font-size:9px;font-weight:700;padding:2px 7px;margin-top:6px">N5</div>
      </div>
    </div>
  </div>
</div>

<!-- SOURCES -->
<div class="page" id="page-sources">
  <div class="phd"><h1>ğŸ“š à¹à¸«à¸¥à¹ˆà¸‡à¹€à¸£à¸µà¸¢à¸™ Grammar</h1><div class="jps">å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ â€” Learning Resources</div><p>à¹à¸«à¸¥à¹ˆà¸‡à¹€à¸£à¸µà¸¢à¸™à¸„à¸±à¸”à¸¡à¸²à¹à¸¥à¹‰à¸§à¸§à¹ˆà¸²à¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸ªà¸³à¸«à¸£à¸±à¸š self-study N5â€“N4</p></div>
  <div class="g2">
    <div class="card" style="border-color:var(--amber)"><div style="font-size:32px;margin-bottom:8px">ğŸ“—</div><div class="ct">Genki I & II</div><div style="font-size:13px;color:var(--text2);line-height:1.8">à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¹€à¸£à¸µà¸¢à¸™ Grammar à¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸·à¸­à¹ƒà¸«à¸¡à¹ˆ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¸—à¸¸à¸ lesson à¸¡à¸µà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸„à¸£à¸š<br><br><span class="ham">âœ“ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š:</span> à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸Šà¸±à¸”à¹€à¸ˆà¸™<br><span class="hrd">âœ— à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:</span> à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ ~1,200-1,500 à¸šà¸²à¸—</div></div>
    <div class="card"><div style="font-size:32px;margin-bottom:8px">ğŸŒ</div><div class="ct">Tae Kim's Guide</div><div style="font-size:13px;color:var(--text2);line-height:1.8">à¸­à¸˜à¸´à¸šà¸²à¸¢ grammar à¹à¸šà¸š logic-based à¸Ÿà¸£à¸µà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” à¸­à¹ˆà¸²à¸™à¹€à¸£à¹‡à¸§à¸à¸§à¹ˆà¸² Genki<br><br><span class="ham">âœ“ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š:</span> à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¹€à¸£à¹‡à¸§ à¹€à¸™à¹‰à¸™ logic<br><span class="hjd">âœ“ à¸Ÿà¸£à¸µ 100%</span><br><a href="https://guidetojapanese.org" target="_blank" style="color:var(--blue2);font-size:12px">â†’ guidetojapanese.org</a></div></div>
    <div class="card"><div style="font-size:32px;margin-bottom:8px">ğŸ¥</div><div class="ct">Cure Dolly (YouTube)</div><div style="font-size:13px;color:var(--text2);line-height:1.8">à¸­à¸˜à¸´à¸šà¸²à¸¢ grammar à¹à¸šà¸š conceptual à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ "à¸—à¸³à¹„à¸¡" à¸‚à¸­à¸‡à¸ à¸²à¸©à¸² à¹„à¸¡à¹ˆà¹à¸„à¹ˆà¸—à¹ˆà¸­à¸‡<br><br><span class="ham">âœ“ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š:</span> à¸­à¸¢à¸²à¸à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹à¸šà¸šà¸¥à¸¶à¸<br><span style="color:var(--red2)">âš ï¸</span> à¹€à¸ªà¸µà¸¢à¸‡à¹à¸›à¸¥à¸à¹à¸•à¹ˆà¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸”à¸µà¸¡à¸²à¸<br><a href="https://youtube.com/@CureDolly" target="_blank" style="color:var(--blue2);font-size:12px">â†’ YouTube: Cure Dolly Organic</a></div></div>
    <div class="card"><div style="font-size:32px;margin-bottom:8px">ğŸ“Š</div><div class="ct">Bunpro.jp</div><div style="font-size:13px;color:var(--text2);line-height:1.8">à¸à¸¶à¸ grammar à¹à¸šà¸š SRS à¹€à¸«à¸¡à¸·à¸­à¸™ Anki à¹à¸•à¹ˆà¹€à¸‰à¸à¸²à¸° grammar à¹€à¸£à¸µà¸¢à¸‡à¸•à¸²à¸¡ JLPT<br><br><span class="ham">âœ“ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š:</span> à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ SRS à¸—à¸šà¸—à¸§à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸š<br>ğŸ’° Trial à¸Ÿà¸£à¸µ à¸•à¹ˆà¸­à¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™<br><a href="https://bunpro.jp" target="_blank" style="color:var(--blue2);font-size:12px">â†’ bunpro.jp</a></div></div>
  </div>
  <div class="abox">ğŸ’¡ <b>à¹à¸™à¸°à¸™à¸³ Workflow:</b> à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¸à¹ˆà¸­à¸™ â†’ à¹ƒà¸Šà¹‰ Tae Kim à¸‚à¸¢à¸²à¸¢ â†’ à¹ƒà¸Šà¹‰ Bunpro à¸—à¸šà¸—à¸§à¸™ â€” à¸Ÿà¸£à¸µà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸¢à¸à¹€à¸§à¹‰à¸™ Bunpro subscription</div>
</div>

<!-- VERB CONJUGATION -->
<div class="page" id="page-verb">
  <div class="phd"><h1>ğŸ”µ Verb Conjugation</h1><div class="jps">å‹•è©ã®æ´»ç”¨ â€” Doushi no Katsuyou</div><p>Verb à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ 3 à¸›à¸£à¸°à¹€à¸ à¸— à¸œà¸±à¸™à¸•à¹ˆà¸²à¸‡à¸à¸±à¸™à¹à¸•à¹ˆà¸¡à¸µ pattern à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”</p></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'vb','learn')">ğŸ“– à¹€à¸£à¸µà¸¢à¸™</div>
    <div class="tab" onclick="stab(this,'vb','te')">ã¦-form</div>
    <div class="tab" onclick="stab(this,'vb','ta')">ãŸ-form</div>
    <div class="tab" onclick="stab(this,'vb','quiz')">ğŸ¯ Quiz</div>
    <div class="tab" onclick="stab(this,'vb','game')">ğŸ® à¹€à¸à¸¡à¸ªà¹Œ</div>
  </div>
  <!-- LEARN -->
  <div class="tp active" id="vb-learn">
    <div class="abox">ğŸ”‘ Verb 3 à¸›à¸£à¸°à¹€à¸ à¸—: <span class="ham">RU-verb</span> (à¸•à¸±à¸” ã‚‹), <span class="hjd">U-verb</span> (à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ ending), <span class="hrd">Irregular</span> (à¸ˆà¸³à¹à¸¢à¸)</div>
    <div class="acc"><div class="acch" onclick="tacc(this)"><div><div style="font-size:14px;font-weight:700;color:var(--white)"><span class="vtag vru">RU-VERB</span> Group 2 â€” ä¸€æ®µå‹•è©</div><div style="font-size:12px;color:var(--text2);margin-top:2px">à¸¥à¸‡à¸—à¹‰à¸²à¸¢ -eru/-iru â†’ à¸•à¸±à¸” ã‚‹ à¹à¸¥à¹‰à¸§à¹€à¸•à¸´à¸¡ ending</div></div><span style="color:var(--text3)">â–¼</span></div>
      <div class="accb"><div class="rbox">ğŸ“Œ <b>à¸à¸:</b> à¸•à¸±à¸” <b>ã‚‹</b> à¸­à¸­à¸ à¹à¸¥à¹‰à¸§à¹€à¸•à¸´à¸¡ ending à¹ƒà¸«à¸¡à¹ˆ</div>
        <table class="gt"><tr><th>Verb</th><th>à¸à¹‰à¸²à¸™</th><th>ãªã„</th><th>ã¦-form</th><th>ãŸ-form</th><th>ã¾ã™</th></tr>
          <tr><td><span class="jp">é£Ÿã¹ã‚‹</span> taberu (à¸à¸´à¸™)</td><td class="am">é£Ÿã¹</td><td class="jp">é£Ÿã¹ãªã„</td><td class="jp">é£Ÿã¹ã¦</td><td class="jp">é£Ÿã¹ãŸ</td><td class="jp">é£Ÿã¹ã¾ã™</td></tr>
          <tr><td><span class="jp">è¦‹ã‚‹</span> miru (à¸”à¸¹)</td><td class="am">è¦‹</td><td class="jp">è¦‹ãªã„</td><td class="jp">è¦‹ã¦</td><td class="jp">è¦‹ãŸ</td><td class="jp">è¦‹ã¾ã™</td></tr>
          <tr><td><span class="jp">èµ·ãã‚‹</span> okiru (à¸•à¸·à¹ˆà¸™)</td><td class="am">èµ·ã</td><td class="jp">èµ·ããªã„</td><td class="jp">èµ·ãã¦</td><td class="jp">èµ·ããŸ</td><td class="jp">èµ·ãã¾ã™</td></tr>
          <tr><td><span class="jp">å¯ã‚‹</span> neru (à¸™à¸­à¸™)</td><td class="am">å¯</td><td class="jp">å¯ãªã„</td><td class="jp">å¯ã¦</td><td class="jp">å¯ãŸ</td><td class="jp">å¯ã¾ã™</td></tr>
        </table>
      </div>
    </div>
    <div class="acc"><div class="acch" onclick="tacc(this)"><div><div style="font-size:14px;font-weight:700;color:var(--white)"><span class="vtag vu">U-VERB</span> Group 1 â€” äº”æ®µå‹•è©</div><div style="font-size:12px;color:var(--text2);margin-top:2px">à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ -eru/-iru â†’ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ ending à¸•à¸²à¸¡à¸à¸¢à¸±à¸à¸Šà¸™à¸°à¸—à¹‰à¸²à¸¢</div></div><span style="color:var(--text3)">â–¼</span></div>
      <div class="accb"><div class="rbox">ğŸ“Œ à¸”à¸¹à¸à¸¢à¸±à¸à¸Šà¸™à¸°à¸—à¹‰à¸²à¸¢ verb à¹à¸¥à¹‰à¸§à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ vowel row à¸•à¸²à¸¡ ending à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£</div>
        <table class="gt"><tr><th>Verb</th><th>à¸—à¹‰à¸²à¸¢</th><th>ãªã„</th><th>ã¦-form</th><th>ãŸ-form</th><th>ã¾ã™</th></tr>
          <tr><td><span class="jp">é£²ã‚€</span> nomu</td><td class="am">ã‚€â†’ã¾</td><td class="jp">é£²ã¾ãªã„</td><td class="jp">é£²ã‚“ã§</td><td class="jp">é£²ã‚“ã </td><td class="jp">é£²ã¿ã¾ã™</td></tr>
          <tr><td><span class="jp">æ›¸ã</span> kaku</td><td class="am">ãâ†’ã‹</td><td class="jp">æ›¸ã‹ãªã„</td><td class="jp">æ›¸ã„ã¦</td><td class="jp">æ›¸ã„ãŸ</td><td class="jp">æ›¸ãã¾ã™</td></tr>
          <tr><td><span class="jp">è©±ã™</span> hanasu</td><td class="am">ã™â†’ã•</td><td class="jp">è©±ã•ãªã„</td><td class="jp">è©±ã—ã¦</td><td class="jp">è©±ã—ãŸ</td><td class="jp">è©±ã—ã¾ã™</td></tr>
          <tr><td><span class="jp">å¾…ã¤</span> matsu</td><td class="am">ã¤â†’ãŸ</td><td class="jp">å¾…ãŸãªã„</td><td class="jp">å¾…ã£ã¦</td><td class="jp">å¾…ã£ãŸ</td><td class="jp">å¾…ã¡ã¾ã™</td></tr>
          <tr><td><span class="jp">è¡Œã</span> iku</td><td class="am" style="color:var(--red2)">âš ï¸ ä¾‹å¤–</td><td class="jp">è¡Œã‹ãªã„</td><td class="jp" style="color:var(--red2)">è¡Œã£ã¦</td><td class="jp" style="color:var(--red2)">è¡Œã£ãŸ</td><td class="jp">è¡Œãã¾ã™</td></tr>
        </table>
        <div class="ibox">âš ï¸ <b>à¸‚à¹‰à¸­à¸¢à¸à¹€à¸§à¹‰à¸™:</b> è¡Œã â†’ ã¦-form à¹€à¸›à¹‡à¸™ è¡Œã£ã¦ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ è¡Œã„ã¦</div>
      </div>
    </div>
    <div class="acc"><div class="acch" onclick="tacc(this)"><div><div style="font-size:14px;font-weight:700;color:var(--white)"><span class="vtag virr">IRREGULAR</span> ã™ã‚‹ãƒ»ãã‚‹ â€” à¸œà¸±à¸™à¸à¸´à¹€à¸¨à¸©</div><div style="font-size:12px;color:var(--text2);margin-top:2px">à¸¡à¸µà¹à¸„à¹ˆ 2 à¸•à¸±à¸§ à¹à¸•à¹ˆà¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢à¸¡à¸²à¸ à¸ˆà¸³à¹ƒà¸«à¹‰à¸‚à¸¶à¹‰à¸™à¹ƒà¸ˆ</div></div><span style="color:var(--text3)">â–¼</span></div>
      <div class="accb"><div class="g2">
        <table class="gt"><tr><th colspan="3" style="font-family:'Noto Serif JP';font-size:20px;color:var(--amber)">ã™ã‚‹ â€” suru (à¸—à¸³)</th></tr><tr><th>Form</th><th>Japanese</th><th>à¹à¸›à¸¥</th></tr>
          <tr><td>Dict</td><td class="jp am">ã™ã‚‹</td><td>à¸—à¸³</td></tr><tr><td>Formal</td><td class="jp">ã—ã¾ã™</td><td>à¸—à¸³</td></tr>
          <tr><td>Negative</td><td class="jp">ã—ãªã„</td><td>à¹„à¸¡à¹ˆà¸—à¸³</td></tr><tr><td>ã¦-form</td><td class="jp">ã—ã¦</td><td>à¸—à¸³ (te)</td></tr>
          <tr><td>ãŸ-form</td><td class="jp">ã—ãŸ</td><td>à¸—à¸³à¹à¸¥à¹‰à¸§</td></tr><tr><td>Potential</td><td class="jp">ã§ãã‚‹</td><td>à¸—à¸³à¹„à¸”à¹‰</td></tr>
        </table>
        <table class="gt"><tr><th colspan="3" style="font-family:'Noto Serif JP';font-size:20px;color:var(--amber)">ãã‚‹ â€” kuru (à¸¡à¸²)</th></tr><tr><th>Form</th><th>Japanese</th><th>à¹à¸›à¸¥</th></tr>
          <tr><td>Dict</td><td class="jp am">ãã‚‹</td><td>à¸¡à¸²</td></tr><tr><td>Formal</td><td class="jp">ãã¾ã™</td><td>à¸¡à¸²</td></tr>
          <tr><td>Negative</td><td class="jp">ã“ãªã„</td><td>à¹„à¸¡à¹ˆà¸¡à¸²</td></tr><tr><td>ã¦-form</td><td class="jp">ãã¦</td><td>à¸¡à¸² (te)</td></tr>
          <tr><td>ãŸ-form</td><td class="jp">ããŸ</td><td>à¸¡à¸²à¹à¸¥à¹‰à¸§</td></tr><tr><td>Potential</td><td class="jp">ã“ã‚‰ã‚Œã‚‹</td><td>à¸¡à¸²à¹„à¸”à¹‰</td></tr>
        </table>
      </div></div>
    </div>
  </div>
  <!-- TE-FORM -->
  <div class="tp" id="vb-te">
    <div class="abox">ğŸ”‘ ã¦-form à¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸” â€” à¸•à¹ˆà¸­ verb, request, progressive, permission</div>
    <div class="g2">
      <div class="card"><div class="ct">ğŸ“‹ à¸à¸ ã¦-form â€” U-Verb</div>
        <table class="gt"><tr><th>à¸¥à¸‡à¸—à¹‰à¸²à¸¢</th><th>à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™</th><th>à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡</th></tr>
          <tr><td class="am jp">ã</td><td class="jp jd">ã„ã¦</td><td class="jp">æ›¸ãâ†’æ›¸ã„ã¦</td></tr>
          <tr><td class="am jp">ã</td><td class="jp jd">ã„ã§</td><td class="jp">æ³³ãâ†’æ³³ã„ã§</td></tr>
          <tr><td class="am jp">ã™</td><td class="jp jd">ã—ã¦</td><td class="jp">è©±ã™â†’è©±ã—ã¦</td></tr>
          <tr><td class="am jp">ã¤ãƒ»ã‚‹ãƒ»ã†</td><td class="jp jd">ã£ã¦</td><td class="jp">å¾…ã¤â†’å¾…ã£ã¦</td></tr>
          <tr><td class="am jp">ã‚€ãƒ»ã¶ãƒ»ã¬</td><td class="jp jd">ã‚“ã§</td><td class="jp">é£²ã‚€â†’é£²ã‚“ã§</td></tr>
          <tr><td style="color:var(--red2)" class="jp">ã (è¡Œã)</td><td style="color:var(--red2)" class="jp">ã£ã¦ âš ï¸</td><td class="jp">è¡Œãâ†’è¡Œã£ã¦</td></tr>
        </table>
      </div>
      <div class="card"><div class="ct">ğŸ“‹ à¹ƒà¸Šà¹‰ ã¦-form à¸—à¸³à¸­à¸°à¹„à¸£à¹„à¸”à¹‰à¸šà¹‰à¸²à¸‡</div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ã¦</b>ãã ã•ã„</div><div class="exr">tabete kudasai</div><div class="ext">à¸à¸£à¸¸à¸“à¸²à¸à¸´à¸™à¸”à¹‰à¸§à¸¢ â€” Request</div></div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ã¦</b>ã„ã‚‹</div><div class="exr">tabete iru</div><div class="ext">à¸à¸³à¸¥à¸±à¸‡à¸à¸´à¸™à¸­à¸¢à¸¹à¹ˆ â€” Progressive</div></div>
        <div class="ex"><div class="exj">èµ·ã<b style="color:var(--amber)">ã¦</b>ã€é£Ÿã¹ã¦ã€è¡Œã</div><div class="exr">okite, tabete, iku</div><div class="ext">à¸•à¸·à¹ˆà¸™ à¸à¸´à¸™ à¹à¸¥à¹‰à¸§à¹„à¸› â€” à¹€à¸Šà¸·à¹ˆà¸­à¸¡ verb</div></div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ã¦</b>ã‚‚ã„ã„ï¼Ÿ</div><div class="exr">tabete mo ii?</div><div class="ext">à¸à¸´à¸™à¹„à¸”à¹‰à¹„à¸«à¸¡? â€” Permission</div></div>
      </div>
    </div>
  </div>
  <!-- TA-FORM -->
  <div class="tp" id="vb-ta">
    <div class="abox">ğŸ”‘ ãŸ-form = Past tense â€” à¸à¸à¹€à¸«à¸¡à¸·à¸­à¸™ ã¦-form à¹à¸„à¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ ã¦â†’ãŸ, ã§â†’ã </div>
    <div class="g2">
      <div class="card"><div class="ct">ğŸ“‹ à¸à¸ ãŸ-form</div>
        <div class="rbox">âœ… à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸: à¹ƒà¸Šà¹‰à¸à¸à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š ã¦-form à¹€à¸à¸µà¸¢à¸‡à¹à¸•à¹ˆ <b>ã¦â†’ãŸ</b> à¹à¸¥à¸° <b>ã§â†’ã </b></div>
        <table class="gt"><tr><th>ã¦-form</th><th>â†’ ãŸ-form</th><th>à¹à¸›à¸¥</th></tr>
          <tr><td class="jp">é£Ÿã¹ã¦</td><td class="jp am">é£Ÿã¹ãŸ</td><td>à¸à¸´à¸™à¹à¸¥à¹‰à¸§</td></tr>
          <tr><td class="jp">é£²ã‚“ã§</td><td class="jp am">é£²ã‚“ã </td><td>à¸”à¸·à¹ˆà¸¡à¹à¸¥à¹‰à¸§</td></tr>
          <tr><td class="jp">æ›¸ã„ã¦</td><td class="jp am">æ›¸ã„ãŸ</td><td>à¹€à¸‚à¸µà¸¢à¸™à¹à¸¥à¹‰à¸§</td></tr>
          <tr><td class="jp">ã—ã¦</td><td class="jp am">ã—ãŸ</td><td>à¸—à¸³à¹à¸¥à¹‰à¸§</td></tr>
          <tr><td class="jp">ãã¦</td><td class="jp am">ããŸ</td><td>à¸¡à¸²à¹à¸¥à¹‰à¸§</td></tr>
        </table>
      </div>
      <div class="card"><div class="ct">ğŸ“‹ à¹ƒà¸Šà¹‰ ãŸ-form à¸—à¸³à¸­à¸°à¹„à¸£à¹„à¸”à¹‰à¸šà¹‰à¸²à¸‡</div>
        <div class="ex"><div class="exj">ã”é£¯ã‚’é£Ÿã¹<b style="color:var(--amber)">ãŸ</b></div><div class="exr">gohan wo tabeta</div><div class="ext">à¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¹à¸¥à¹‰à¸§ â€” à¸­à¸”à¸µà¸•à¸à¸²à¸¥</div></div>
        <div class="ex"><div class="exj">è¦‹<b style="color:var(--amber)">ãŸ</b>ã“ã¨ãŒã‚ã‚‹</div><div class="exr">mita koto ga aru</div><div class="ext">à¹€à¸„à¸¢à¸”à¸¹à¹à¸¥à¹‰à¸§ â€” à¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œ</div></div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ãŸ</b>ã‚‰å¸°ã‚‹</div><div class="exr">tabetara kaeru</div><div class="ext">à¸à¸­à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸à¹‡à¸à¸¥à¸±à¸š â€” ãŸã‚‰ conditional</div></div>
        <div class="ibox" style="margin-top:8px">ğŸ’¡ ãŸ-form à¹€à¸›à¹‡à¸™ base à¸‚à¸­à¸‡ conditional ãŸã‚‰ à¸”à¹‰à¸§à¸¢!</div>
      </div>
    </div>
  </div>
  <div class="tp" id="vb-quiz"><div id="vb-quiz-c"></div></div>
  <div class="tp" id="vb-game"><div id="vb-game-c"></div></div>
</div>

<!-- PARTICLES -->
<div class="page" id="page-particle">
  <div class="phd"><h1>ğŸŸ¡ Particles â€” åŠ©è©</h1><div class="jps">ã˜ã‚‡ã— â€” à¸„à¸³à¸Šà¹ˆà¸§à¸¢à¸šà¸­à¸à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹ƒà¸™à¸›à¸£à¸°à¹‚à¸¢à¸„</div><p>Particles à¸„à¸·à¸­à¸«à¸±à¸§à¹ƒà¸ˆà¸‚à¸­à¸‡à¸›à¸£à¸°à¹‚à¸¢à¸„à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ à¸šà¸­à¸à¸§à¹ˆà¸²à¹à¸•à¹ˆà¸¥à¸°à¸„à¸³à¸¡à¸µà¸šà¸—à¸šà¸²à¸—à¸­à¸°à¹„à¸£</p></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'pt','all')">ğŸ“Š à¸ à¸²à¸à¸£à¸§à¸¡</div>
    <div class="tab" onclick="stab(this,'pt','hawaga')">ã¯ vs ãŒ</div>
    <div class="tab" onclick="stab(this,'pt','nide')">ã« vs ã§</div>
    <div class="tab" onclick="stab(this,'pt','quiz')">ğŸ¯ Quiz</div>
    <div class="tab" onclick="stab(this,'pt','game')">ğŸ® Fill-in-blank</div>
  </div>
  <div class="tp active" id="pt-all">
    <div class="ibox">ğŸ’¡ Particles à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡ <b>à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ</b> à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸„à¸³à¹ƒà¸™à¸›à¸£à¸°à¹‚à¸¢à¸„ à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¹€à¸”à¸µà¹ˆà¸¢à¸§</div>
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:12px" id="ptcards"></div>
  </div>
  <div class="tp" id="pt-hawaga">
    <div class="abox">ğŸ”‘ <b>ã¯ vs ãŒ</b> â€” à¸„à¸§à¸²à¸¡à¹à¸•à¸à¸•à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¹à¸¥à¸°à¸¢à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¹ƒà¸™ grammar à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™</div>
    <div class="g2">
      <div class="card" style="border-color:var(--blue2)">
        <div class="ct" style="color:var(--blue2)">ã¯ (wa) â€” Topic Marker</div>
        <div style="font-size:13px;color:var(--text2);line-height:1.8"><b style="color:var(--white)">à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:</b> à¹à¸™à¸°à¸™à¸³ "à¸«à¸±à¸§à¸‚à¹‰à¸­à¸—à¸µà¹ˆà¸ˆà¸°à¸à¸¹à¸”à¸–à¸¶à¸‡"<br><br>à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¹à¸™à¸°à¸™à¸³à¸•à¸±à¸§à¹€à¸­à¸‡, Contrast, General statement</div>
        <div class="ex" style="margin-top:10px"><div class="exj">ç§<b style="color:var(--blue2)">ã¯</b>ç”°ä¸­ã§ã™</div><div class="exr">Watashi wa Tanaka desu</div><div class="ext">à¸‰à¸±à¸™à¸Šà¸·à¹ˆà¸­à¸—à¸²à¸™à¸²à¸à¸° â€” Topic</div></div>
        <div class="ex"><div class="exj">çŒ«<b style="color:var(--blue2)">ã¯</b>å¥½ãã ã‘ã©çŠ¬ã¯å«Œã„</div><div class="exr">neko wa suki dakedo...</div><div class="ext">à¹à¸¡à¸§à¸Šà¸­à¸š à¹à¸•à¹ˆà¸«à¸¡à¸²à¹„à¸¡à¹ˆà¸Šà¸­à¸š â€” Contrast</div></div>
      </div>
      <div class="card" style="border-color:var(--jade2)">
        <div class="ct" style="color:var(--jade2)">ãŒ (ga) â€” Subject Marker</div>
        <div style="font-size:13px;color:var(--text2);line-height:1.8"><b style="color:var(--white)">à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:</b> à¹€à¸™à¹‰à¸™ subject à¸­à¸¢à¹ˆà¸²à¸‡à¸Šà¸±à¸”à¹€à¸ˆà¸™<br><br>à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¹€à¸™à¹‰à¸™ "à¹ƒà¸„à¸£/à¸­à¸°à¹„à¸£", suki/kirai, potential form</div>
        <div class="ex" style="margin-top:10px"><div class="exj">èª°<b style="color:var(--jade2)">ãŒ</b>æ¥ã¾ã—ãŸã‹</div><div class="exr">dare ga kimashita ka</div><div class="ext">à¹ƒà¸„à¸£à¸¡à¸²? â€” à¹€à¸™à¹‰à¸™ "à¹ƒà¸„à¸£"</div></div>
        <div class="ex"><div class="exj">æ—¥æœ¬èª<b style="color:var(--jade2)">ãŒ</b>å¥½ãã§ã™</div><div class="exr">nihongo ga suki desu</div><div class="ext">à¸Šà¸­à¸šà¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ â€” suki à¹ƒà¸Šà¹‰ ãŒ</div></div>
      </div>
    </div>
    <div class="abox" style="margin-top:4px">ğŸ’¡ <b>Tip:</b> à¸•à¸­à¸š "à¹ƒà¸„à¸£/à¸­à¸°à¹„à¸£à¸—à¸³?" = <b>ãŒ</b> / à¹à¸™à¸°à¸™à¸³à¸«à¸±à¸§à¸‚à¹‰à¸­ = <b>ã¯</b></div>
  </div>
  <div class="tp" id="pt-nide">
    <div class="abox">ğŸ”‘ <b>ã« vs ã§</b> â€” à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆà¹à¸›à¸¥à¸§à¹ˆà¸² "à¸—à¸µà¹ˆ" à¹ƒà¸™à¸šà¸²à¸‡à¸à¸£à¸“à¸µà¹à¸•à¹ˆà¹ƒà¸Šà¹‰à¸•à¹ˆà¸²à¸‡à¸à¸±à¸™</div>
    <div class="g2">
      <div class="card" style="border-color:var(--red2)">
        <div class="ct" style="color:var(--red2)">ã« (ni) â€” Direction / Static Location</div>
        <div style="font-size:13px;color:var(--text2);line-height:1.8">à¹ƒà¸Šà¹‰à¸à¸±à¸š: à¸—à¸´à¸¨à¸—à¸²à¸‡/à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡, à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸™à¸´à¹ˆà¸‡ (ã‚ã‚‹/ã„ã‚‹), à¹€à¸§à¸¥à¸², à¸œà¸¹à¹‰à¸£à¸±à¸š</div>
        <div class="ex" style="margin-top:8px"><div class="exj">æ±äº¬<b style="color:var(--red2)">ã«</b>è¡Œã</div><div class="ext">à¹„à¸›à¹‚à¸•à¹€à¸à¸µà¸¢à¸§ â€” à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡</div></div>
        <div class="ex"><div class="exj">æœ¬æ£š<b style="color:var(--red2)">ã«</b>æœ¬ãŒã‚ã‚‹</div><div class="ext">à¸¡à¸µà¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸­à¸¢à¸¹à¹ˆà¸šà¸™à¸Šà¸±à¹‰à¸™ â€” à¸ªà¸´à¹ˆà¸‡à¸‚à¸­à¸‡à¸™à¸´à¹ˆà¸‡</div></div>
        <div class="ex"><div class="exj">ä¸‰æ™‚<b style="color:var(--red2)">ã«</b>æ¥ã‚‹</div><div class="ext">à¸¡à¸²à¸•à¸­à¸™à¸šà¹ˆà¸²à¸¢à¸ªà¸²à¸¡ â€” à¹€à¸§à¸¥à¸²</div></div>
      </div>
      <div class="card" style="border-color:var(--gold)">
        <div class="ct" style="color:var(--gold2)">ã§ (de) â€” Location of Action / Means</div>
        <div style="font-size:13px;color:var(--text2);line-height:1.8">à¹ƒà¸Šà¹‰à¸à¸±à¸š: à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸—à¸³à¸à¸´à¸ˆà¸à¸£à¸£à¸¡, à¸§à¸´à¸˜à¸µà¸à¸²à¸£/à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­, à¸ à¸²à¸©à¸², à¸§à¸±à¸ªà¸”à¸¸</div>
        <div class="ex" style="margin-top:8px"><div class="exj">å­¦æ ¡<b style="color:var(--gold2)">ã§</b>å‹‰å¼·ã™ã‚‹</div><div class="ext">à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆà¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™ â€” à¸—à¸³à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸—à¸µà¹ˆ</div></div>
        <div class="ex"><div class="exj">ãƒã‚¹<b style="color:var(--gold2)">ã§</b>è¡Œã</div><div class="ext">à¹„à¸›à¸”à¹‰à¸§à¸¢à¸£à¸–à¸šà¸±à¸ª â€” à¸§à¸´à¸˜à¸µà¸à¸²à¸£</div></div>
        <div class="ex"><div class="exj">æ—¥æœ¬èª<b style="color:var(--gold2)">ã§</b>è©±ã™</div><div class="ext">à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ â€” à¸ à¸²à¸©à¸²</div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="pt-quiz"><div id="pt-quiz-c"></div></div>
  <div class="tp" id="pt-game"><div id="pt-game-c"></div></div>
</div>

<!-- NAI TAI DEKIRU -->
<div class="page" id="page-naitai">
  <div class="phd"><h1>ğŸ”´ ãªã„ãƒ»ãŸã„ãƒ»ã§ãã‚‹</h1><div class="jps">å¦å®šãƒ»é¡˜æœ›ãƒ»å¯èƒ½ â€” à¸›à¸à¸´à¹€à¸ªà¸˜ à¸­à¸¢à¸²à¸ à¸—à¸³à¹„à¸”à¹‰</div><p>3 patterns à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°à¹à¸¥à¸°à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™</p></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'nt','nai')">ãªã„ à¸›à¸à¸´à¹€à¸ªà¸˜</div>
    <div class="tab" onclick="stab(this,'nt','tai')">ãŸã„ à¸­à¸¢à¸²à¸</div>
    <div class="tab" onclick="stab(this,'nt','dek')">ã§ãã‚‹ à¸—à¸³à¹„à¸”à¹‰</div>
    <div class="tab" onclick="stab(this,'nt','quiz')">ğŸ¯ Quiz</div>
    <div class="tab" onclick="stab(this,'nt','game')">ğŸ® à¹€à¸à¸¡à¸ªà¹Œ</div>
  </div>
  <div class="tp active" id="nt-nai">
    <div class="abox">ğŸ”‘ <b>ãªã„ (nai)</b> = à¹„à¸¡à¹ˆ... â€” à¸£à¸¹à¸›à¸›à¸à¸´à¹€à¸ªà¸˜à¸à¸·à¹‰à¸™à¸à¸²à¸™</div>
    <div class="g2">
      <div class="card"><div class="ct">ğŸ“‹ à¸§à¸´à¸˜à¸µà¸ªà¸£à¹‰à¸²à¸‡ ãªã„-form</div>
        <div class="rbox"><b>RU-verb:</b> à¸•à¸±à¸” ã‚‹ â†’ à¹€à¸•à¸´à¸¡ ãªã„<br>é£Ÿã¹<b>ã‚‹</b> â†’ é£Ÿã¹<b>ãªã„</b><br><br><b>U-verb:</b> à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ ending à¹€à¸›à¹‡à¸™ ã‚-row â†’ à¹€à¸•à¸´à¸¡ ãªã„<br>é£²<b>ã‚€</b> â†’ é£²<b>ã¾ãªã„</b><br>æ›¸<b>ã</b> â†’ æ›¸<b>ã‹ãªã„</b><br><br><b>Irregular:</b><br>ã™ã‚‹ â†’ ã—ãªã„ | ãã‚‹ â†’ ã“ãªã„<br>ã‚ã‚‹ â†’ ãªã„ (à¹„à¸¡à¹ˆà¸¡à¸µ)</div>
      </div>
      <div class="card"><div class="ct">ğŸ“‹ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°</div>
        <div class="ex"><div class="exj">ã‚ã‹ã‚‰<b style="color:var(--red2)">ãªã„</b>ï¼</div><div class="exr">wakaranai!</div><div class="ext">à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ! â€” à¸à¸šà¸šà¹ˆà¸­à¸¢à¸¡à¸²à¸</div></div>
        <div class="ex"><div class="exj">ã‚‚ã†è«¦ã‚<b style="color:var(--red2)">ãªã„</b></div><div class="exr">mou akiramenai</div><div class="ext">à¸‰à¸±à¸™à¸ˆà¸°à¹„à¸¡à¹ˆà¸¢à¸­à¸¡à¹à¸à¹‰</div></div>
        <div class="ex"><div class="exj">å˜˜ã˜ã‚ƒ<b style="color:var(--red2)">ãªã„</b></div><div class="exr">uso ja nai</div><div class="ext">à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹‚à¸à¸«à¸!</div></div>
        <div class="ex"><div class="exj">ä¿¡ã˜ã‚‰ã‚Œ<b style="color:var(--red2)">ãªã„</b>â€¦</div><div class="exr">shinjirarenai</div><div class="ext">à¹€à¸Šà¸·à¹ˆà¸­à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸¥à¸¢â€¦</div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="nt-tai">
    <div class="abox">ğŸ”‘ <b>ãŸã„ (tai)</b> = à¸­à¸¢à¸²à¸à¸ˆà¸°... â€” à¹ƒà¸Šà¹‰ stem à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š ã¾ã™-form à¹à¸¥à¹‰à¸§à¹€à¸•à¸´à¸¡ ãŸã„</div>
    <div class="g2">
      <div class="card"><div class="ct">ğŸ“‹ à¸§à¸´à¸˜à¸µà¸ªà¸£à¹‰à¸²à¸‡ ãŸã„-form</div>
        <div class="rbox"><b>à¸—à¸¸à¸ verb type:</b> à¹ƒà¸Šà¹‰ ã¾ã™-stem à¹à¸¥à¹‰à¸§à¹€à¸•à¸´à¸¡ ãŸã„<br><br>é£Ÿã¹<b>ã¾ã™</b> â†’ é£Ÿã¹<b>ãŸã„</b><br>é£²ã¿<b>ã¾ã™</b> â†’ é£²ã¿<b>ãŸã„</b><br>ã—<b>ã¾ã™</b> â†’ ã—<b>ãŸã„</b><br>ã<b>ã¾ã™</b> â†’ ã<b>ãŸã„</b></div>
        <div class="ibox" style="margin-top:8px">âš ï¸ ãŸã„ à¹ƒà¸Šà¹‰à¸à¸¹à¸”à¸–à¸¶à¸‡à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¸­à¸‡ "à¸•à¸±à¸§à¹€à¸­à¸‡" à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™</div>
      </div>
      <div class="card"><div class="ct">ğŸ“‹ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°</div>
        <div class="ex"><div class="exj">ã‚‚ã£ã¨å¼·ããªã‚Š<b style="color:var(--amber)">ãŸã„</b></div><div class="ext">à¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡à¸à¸§à¹ˆà¸²à¸™à¸µà¹‰</div></div>
        <div class="ex"><div class="exj">å›ã®ã“ã¨ãŒçŸ¥ã‚Š<b style="color:var(--amber)">ãŸã„</b></div><div class="ext">à¸­à¸¢à¸²à¸à¸£à¸¹à¹‰à¸ˆà¸±à¸à¹€à¸˜à¸­à¹ƒà¸«à¹‰à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™</div></div>
        <div class="ex"><div class="exj">æ—©ãå¸°ã‚Š<b style="color:var(--amber)">ãŸã„</b>â€¦</div><div class="ext">à¸­à¸¢à¸²à¸à¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™à¹€à¸£à¹‡à¸§à¹†...</div></div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ãŸã</b>ãªã„</div><div class="ext">à¹„à¸¡à¹ˆà¸­à¸¢à¸²à¸à¸à¸´à¸™ â€” à¸›à¸à¸´à¹€à¸ªà¸˜ ãŸã„ = ãŸããªã„</div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="nt-dek">
    <div class="abox">ğŸ”‘ <b>ã§ãã‚‹ (dekiru)</b> = à¸—à¸³à¹„à¸”à¹‰ â€” à¸¡à¸µ 2 à¸§à¸´à¸˜à¸µà¸ªà¸£à¹‰à¸²à¸‡</div>
    <div class="g2">
      <div class="card"><div class="ct">ğŸ“‹ Potential Form</div>
        <div class="rbox"><b>RU-verb:</b> stem + ã‚‰ã‚Œã‚‹<br>é£Ÿã¹ã‚‹ â†’ é£Ÿã¹<b>ã‚‰ã‚Œã‚‹</b><br><br><b>U-verb:</b> à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ uâ†’e<br>é£²ã‚€ â†’ é£²<b>ã‚ã‚‹</b> | æ›¸ã â†’ æ›¸<b>ã‘ã‚‹</b><br>è©±ã™ â†’ è©±<b>ã›ã‚‹</b> | å¾…ã¤ â†’ å¾…<b>ã¦ã‚‹</b><br><br><b>Irregular:</b><br>ã™ã‚‹ â†’ <b>ã§ãã‚‹</b> | ãã‚‹ â†’ ã“ã‚‰ã‚Œã‚‹</div>
      </div>
      <div class="card"><div class="ct">ğŸ“‹ ã“ã¨ãŒã§ãã‚‹ (formal)</div>
        <div class="rbox"><b>Dict form + ã“ã¨ + ãŒã§ãã‚‹</b><br><br>é£Ÿã¹ã‚‹ + ã“ã¨ + ãŒã§ãã‚‹<br>= é£Ÿã¹ã‚‹ã“ã¨ãŒã§ãã‚‹<br>= à¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸´à¸™à¹„à¸”à¹‰</div>
        <div class="ibox" style="margin-top:8px">ğŸ’¡ manga à¸ªà¹ˆà¸§à¸™à¹ƒà¸«à¸à¹ˆà¹ƒà¸Šà¹‰ Potential form à¹€à¸à¸£à¸²à¸°à¸ªà¸±à¹‰à¸™à¸à¸§à¹ˆà¸² à¹€à¸Šà¹ˆà¸™ è©±ã›ã‚‹ à¹à¸—à¸™ è©±ã™ã“ã¨ãŒã§ãã‚‹</div>
        <div class="ex" style="margin-top:8px"><div class="exj">ç§ã«ã¯<b style="color:var(--jade2)">ã§ãã‚‹</b>ï¼</div><div class="ext">à¸‰à¸±à¸™à¸—à¸³à¹„à¸”à¹‰!</div></div>
        <div class="ex"><div class="exj">ã¾ã æˆ¦ãˆ<b style="color:var(--jade2)">ã‚‹</b></div><div class="ext">à¸¢à¸±à¸‡à¸ªà¸¹à¹‰à¹„à¸”à¹‰</div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="nt-quiz"><div id="nt-quiz-c"></div></div>
  <div class="tp" id="nt-game"><div id="nt-game-c"></div></div>
</div>

<!-- CONDITIONALS -->
<div class="page" id="page-cond">
  <div class="phd"><h1>ğŸŸ¢ Conditionals â€” à¸–à¹‰à¸²/à¹€à¸¡à¸·à¹ˆà¸­</h1><div class="jps">æ¡ä»¶å½¢ â€” Jouken-kei (N4)</div><p>conditional 3 à¹à¸šà¸šà¸«à¸¥à¸±à¸ à¹à¸•à¹ˆà¸¥à¸°à¹à¸šà¸šà¸¡à¸µà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¹à¸¥à¸°à¸šà¸£à¸´à¸šà¸—à¸•à¹ˆà¸²à¸‡à¸à¸±à¸™</p></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'cd','ov')">ğŸ“Š à¸ à¸²à¸à¸£à¸§à¸¡</div>
    <div class="tab" onclick="stab(this,'cd','to')">ã¨ natural</div>
    <div class="tab" onclick="stab(this,'cd','tara')">ãŸã‚‰ if/when</div>
    <div class="tab" onclick="stab(this,'cd','ba')">ã° if</div>
    <div class="tab" onclick="stab(this,'cd','quiz')">ğŸ¯ Quiz</div>
  </div>
  <div class="tp active" id="cd-ov">
    <div class="abox">ğŸ”‘ <b>à¹€à¸¥à¸·à¸­à¸à¹ƒà¸Šà¹‰à¸­à¸°à¹„à¸£:</b> ã¨ (à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´/à¸à¸) | ãŸã‚‰ (à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¹€à¸ˆà¸²à¸°à¸ˆà¸‡) | ã° (à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸—à¸±à¹ˆà¸§à¹„à¸›)</div>
    <table class="gt"><tr><th>Pattern</th><th>à¸ªà¸£à¹‰à¸²à¸‡à¸ˆà¸²à¸</th><th>à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢</th><th>à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­</th><th>à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡</th></tr>
      <tr><td><span class="jp am" style="font-size:20px">ã¨</span></td><td>Dict form + ã¨</td><td class="jd">à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´ / à¸à¸à¹à¸™à¹ˆà¸™à¸­à¸™</td><td>à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¹€à¸à¸´à¸”à¹€à¸ªà¸¡à¸­</td><td class="jp">æ˜¥ã«ãªã‚‹ã¨èŠ±ãŒå’²ã</td></tr>
      <tr><td><span class="jp am" style="font-size:20px">ãŸã‚‰</span></td><td>ãŸ-form + ã‚‰</td><td class="jd">à¸–à¹‰à¸²/à¹€à¸¡à¸·à¹ˆà¸­ (à¹€à¸ˆà¸²à¸°à¸ˆà¸‡)</td><td>à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¹€à¸”à¸µà¸¢à¸§/à¸ªà¸¡à¸¡à¸•à¸´</td><td class="jp">ãŠé‡‘ãŒã‚ã£ãŸã‚‰æ—…è¡Œã™ã‚‹</td></tr>
      <tr><td><span class="jp am" style="font-size:20px">ã°</span></td><td>e-stem + ã°</td><td class="jd">à¸–à¹‰à¸² (à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸—à¸±à¹ˆà¸§à¹„à¸›)</td><td>à¸ªà¸¡à¸¡à¸•à¸´ à¸¡à¸±à¸à¸¡à¸µà¸„à¸³à¹à¸™à¸°à¸™à¸³</td><td class="jp">æ—©ãèµ·ãã‚Œã°é–“ã«åˆã†</td></tr>
    </table>
    <div class="g3" style="margin-top:12px">
      <div class="ex"><div class="exj">æ˜¥ã«ãªã‚‹ã¨èŠ±ãŒå’²ã</div><div class="ext">à¸–à¸¶à¸‡à¸¤à¸”à¸¹à¹ƒà¸šà¹„à¸¡à¹‰à¸œà¸¥à¸´ à¸”à¸­à¸à¹„à¸¡à¹‰à¸à¹‡à¸šà¸²à¸™ (à¹€à¸ªà¸¡à¸­)</div><div class="exn">ã¨ â€” à¸à¸à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´</div></div>
      <div class="ex"><div class="exj">ãŠé‡‘ãŒã‚ã£ãŸã‚‰æ—…è¡Œã™ã‚‹</div><div class="ext">à¸–à¹‰à¸²à¸¡à¸µà¹€à¸‡à¸´à¸™à¸à¹‡à¸ˆà¸°à¹€à¸”à¸´à¸™à¸—à¸²à¸‡</div><div class="exn">ãŸã‚‰ â€” à¸ªà¸¡à¸¡à¸•à¸´à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ</div></div>
      <div class="ex"><div class="exj">æ—©ãèµ·ãã‚Œã°é–“ã«åˆã†</div><div class="ext">à¸–à¹‰à¸²à¸•à¸·à¹ˆà¸™à¹€à¸£à¹‡à¸§à¸à¹‡à¸—à¸±à¸™</div><div class="exn">ã° â€” à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸„à¸³à¹à¸™à¸°à¸™à¸³</div></div>
    </div>
  </div>
  <div class="tp" id="cd-to">
    <div class="abox">ğŸ”‘ <b>ã€œã¨</b> â€” à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™ "à¹€à¸ªà¸¡à¸­" à¹‚à¸”à¸¢à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´ à¸„à¸§à¸šà¸„à¸¸à¸¡à¹„à¸¡à¹ˆà¹„à¸”à¹‰</div>
    <div class="card"><div class="ct">ğŸ“‹ Dict form + ã¨ + à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ</div>
      <div class="rbox">âœ… à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¹€à¸›à¹‡à¸™ "à¸à¸" à¸«à¸£à¸·à¸­ "à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´"<br>âŒ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰à¸à¸±à¸š: à¸„à¸³à¸ªà¸±à¹ˆà¸‡ request, permission, à¸„à¸§à¸²à¸¡à¸•à¸±à¹‰à¸‡à¹ƒà¸ˆà¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸à¸¹à¸”</div>
      <div class="g2" style="margin-top:8px">
        <div><div class="ex"><div class="exj">å³ã«æ›²ãŒã‚‹<b style="color:var(--jade2)">ã¨</b>é§…ãŒã‚ã‚Šã¾ã™</div><div class="ext">à¹€à¸¥à¸µà¹‰à¸¢à¸§à¸‚à¸§à¸²à¸ˆà¸°à¸¡à¸µà¸ªà¸–à¸²à¸™à¸µà¸£à¸–à¹„à¸Ÿ</div></div>
        <div class="ex"><div class="exj">ã“ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™<b style="color:var(--jade2)">ã¨</b>é›»æ°—ãŒã¤ã</div><div class="ext">à¸à¸”à¸›à¸¸à¹ˆà¸¡à¸™à¸µà¹‰à¹„à¸Ÿà¸à¹‡à¸•à¸´à¸”</div></div></div>
        <div><div class="ex"><div class="exj">ãŸãã•ã‚“é£Ÿã¹ã‚‹<b style="color:var(--jade2)">ã¨</b>å¤ªã‚‹</div><div class="ext">à¸à¸´à¸™à¹€à¸¢à¸­à¸°à¸à¹‡à¸­à¹‰à¸§à¸™ (à¸à¸à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´)</div></div>
        <div class="ex"><div class="exj">å†¬ã«ãªã‚‹<b style="color:var(--jade2)">ã¨</b>é›ªãŒé™ã‚‹</div><div class="ext">à¸–à¸¶à¸‡à¸«à¸™à¹‰à¸²à¸«à¸™à¸²à¸§à¸«à¸´à¸¡à¸°à¸à¹‡à¸•à¸</div></div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="cd-tara">
    <div class="abox">ğŸ”‘ <b>ã€œãŸã‚‰</b> â€” ãŸ-form + ã‚‰ â€” à¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¹ƒà¸™à¸ªà¸™à¸—à¸™à¸²à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™</div>
    <div class="card"><div class="ct">ğŸ“‹ ãŸ-form + ã‚‰ + à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ</div>
      <div class="rbox">âœ… à¹ƒà¸Šà¹‰à¸à¸±à¸š: à¸ªà¸¡à¸¡à¸•à¸´à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ, à¹€à¸«à¸•à¸¸à¸à¸²à¸£à¸“à¹Œà¹€à¸”à¸µà¹ˆà¸¢à¸§, "à¸à¸­à¸—à¸³à¹à¸¥à¹‰à¸§"<br>âœ… à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸à¸±à¸š: à¸„à¸³à¸ªà¸±à¹ˆà¸‡, request â† à¸•à¹ˆà¸²à¸‡à¸ˆà¸²à¸ ã¨</div>
      <div class="g2" style="margin-top:8px">
        <div><div class="ex"><div class="exj">ãŠé‡‘ãŒã‚ã£<b style="color:var(--amber)">ãŸã‚‰</b>æ—…è¡Œã™ã‚‹</div><div class="ext">à¸–à¹‰à¸²à¸¡à¸µà¹€à¸‡à¸´à¸™à¸à¹‡à¸ˆà¸°à¹€à¸—à¸µà¹ˆà¸¢à¸§</div></div>
        <div class="ex"><div class="exj">å®¶ã«å¸°ã£<b style="color:var(--amber)">ãŸã‚‰</b>é›»è©±ã—ã¦</div><div class="ext">à¸à¸­à¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™à¹à¸¥à¹‰à¸§à¹‚à¸—à¸£à¸¡à¸²à¸™à¸°</div></div></div>
        <div><div class="ex"><div class="exj">ã‚‚ã—å½¼å¥³ã ã£<b style="color:var(--amber)">ãŸã‚‰</b>ã©ã†ã™ã‚‹ï¼Ÿ</div><div class="ext">à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™à¹à¸Ÿà¸™à¸¥à¹ˆà¸° à¸ˆà¸°à¸—à¸³à¸¢à¸±à¸‡à¹„à¸‡?</div></div>
        <div class="ex"><div class="exj">é£Ÿã¹<b style="color:var(--amber)">ãŸã‚‰</b>å¯ã¦ã‚‚ã„ã„</div><div class="ext">à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸à¹‡à¸™à¸­à¸™à¹„à¸”à¹‰</div></div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="cd-ba">
    <div class="abox">ğŸ”‘ <b>ã€œã°</b> â€” Hypothetical conditional â€” à¸¡à¸±à¸à¹ƒà¸Šà¹‰à¸à¸±à¸šà¸„à¸³à¹à¸™à¸°à¸™à¸³</div>
    <div class="card"><div class="ct">ğŸ“‹ à¸ªà¸£à¹‰à¸²à¸‡ ã°-form</div>
      <div class="g2"><div class="rbox"><b>Verb RU:</b> stem + ã‚Œã°<br>é£Ÿã¹ã‚‹ â†’ é£Ÿã¹<b>ã‚Œã°</b><br>è¦‹ã‚‹ â†’ è¦‹<b>ã‚Œã°</b><br><br><b>Verb U:</b> u â†’ e + ã°<br>é£²ã‚€ â†’ é£²<b>ã‚ã°</b><br>æ›¸ã â†’ æ›¸<b>ã‘ã°</b></div>
      <div class="rbox"><b>Adj ã„:</b> à¸•à¸±à¸” ã„ â†’ ã‘ã‚Œã°<br>é«˜ã„ â†’ é«˜<b>ã‘ã‚Œã°</b><br>å®‰ã„ â†’ å®‰<b>ã‘ã‚Œã°</b><br><br><b>Adj ãª / Noun + ãªã‚‰:</b><br>å…ƒæ°—ãªã‚‰ | å­¦ç”Ÿãªã‚‰</div></div>
      <div class="g2" style="margin-top:8px">
        <div class="ex"><div class="exj">æ—©ãèµ·ã<b style="color:var(--jade2)">ã‚Œã°</b>é–“ã«åˆã†</div><div class="ext">à¸–à¹‰à¸²à¸•à¸·à¹ˆà¸™à¹€à¸£à¹‡à¸§à¸à¹‡à¸—à¸±à¸™</div></div>
        <div class="ex"><div class="exj">å®‰<b style="color:var(--jade2)">ã‘ã‚Œã°</b>è²·ã†</div><div class="ext">à¸–à¹‰à¸²à¸–à¸¹à¸à¸à¹‡à¸‹à¸·à¹‰à¸­</div></div>
      </div>
    </div>
  </div>
  <div class="tp" id="cd-quiz"><div id="cd-quiz-c"></div></div>
</div>

<!-- SENTENCE ENDINGS -->
<div class="page" id="page-endings">
  <div class="phd"><h1>ğŸŸ£ Sentence Endings</h1><div class="jps">æ–‡æœ«è¡¨ç¾ â€” ã‹ãƒ»ã­ãƒ»ã‚ˆãƒ»ã‚ˆã­</div><p>Final particles à¸šà¸­à¸ tone à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸œà¸¹à¹‰à¸à¸¹à¸”à¸à¸±à¸šà¸œà¸¹à¹‰à¸Ÿà¸±à¸‡ â€” à¹€à¸«à¹‡à¸™à¸šà¹ˆà¸­à¸¢à¸¡à¸²à¸à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°</p></div>
  <div class="tabs">
    <div class="tab active" onclick="stab(this,'se','learn')">ğŸ“– à¹€à¸£à¸µà¸¢à¸™</div>
    <div class="tab" onclick="stab(this,'se','manga')">ğŸ“• à¹ƒà¸™à¸¡à¸±à¸‡à¸‡à¸°</div>
    <div class="tab" onclick="stab(this,'se','quiz')">ğŸ¯ Quiz</div>
  </div>
  <div class="tp active" id="se-learn">
    <div class="ibox">ğŸ’¡ Final particles à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸³à¹à¸›à¸¥à¸•à¸£à¸‡à¹† à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ "feeling" â€” à¸”à¸¹à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸¢à¸­à¸°à¹† à¸ˆà¸°à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹€à¸­à¸‡</div>
    <div id="end-cards"></div>
  </div>
  <div class="tp" id="se-manga">
    <div class="abox">ğŸ“• à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸¡à¸±à¸‡à¸‡à¸°/à¸­à¸™à¸´à¹€à¸¡à¸° â€” à¸ªà¸±à¸‡à¹€à¸à¸• particle à¸—à¹‰à¸²à¸¢à¸›à¸£à¸°à¹‚à¸¢à¸„</div>
    <div id="end-manga"></div>
  </div>
  <div class="tp" id="se-quiz"><div id="se-quiz-c"></div></div>
</div>

<!-- GAMES -->
<div class="page" id="page-games">
  <div class="phd"><h1>ğŸ® Grammar Games</h1><div class="jps">æ–‡æ³•ã‚²ãƒ¼ãƒ  â€” à¸à¸¶à¸ Grammar à¸œà¹ˆà¸²à¸™à¹€à¸à¸¡à¸ªà¹Œ</div><p>5 à¹€à¸à¸¡à¸ªà¹Œà¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸ Grammar topic â€” à¸„à¸°à¹à¸™à¸™à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸§à¹‰</p></div>
  <div id="g-lobby">
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px">
      <div class="gcard" onclick="gplay('pf')"><div style="font-size:36px">ğŸ¯</div><div class="gtitle">Particle Fill-in</div><div class="gdesc">à¹€à¸¥à¸·à¸­à¸ Particle à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡ â€” 45 à¸§à¸´à¸™à¸²à¸—à¸µ à¸•à¸­à¸šà¹ƒà¸«à¹‰à¹€à¸¢à¸­à¸°à¸—à¸µà¹ˆà¸ªà¸¸à¸”</div><div style="margin-top:8px;font-size:11px;color:var(--amber)">Best: <span id="hs-pf">â€”</span></div></div>
      <div class="gcard" onclick="gplay('cs')"><div style="font-size:36px">âš¡</div><div class="gtitle">Conjugation Speed</div><div class="gdesc">à¸œà¸±à¸™ verb à¹ƒà¸«à¹‰à¹€à¸£à¹‡à¸§! 60 à¸§à¸´à¸™à¸²à¸—à¸µ â€” à¸—à¸±à¹‰à¸‡ ã¦, ãŸ, ãªã„, potential</div><div style="margin-top:8px;font-size:11px;color:var(--amber)">Best: <span id="hs-cs">â€”</span></div></div>
      <div class="gcard" onclick="gplay('sb')"><div style="font-size:36px">ğŸ§©</div><div class="gtitle">Sentence Builder</div><div class="gdesc">à¹€à¸£à¸µà¸¢à¸‡à¸„à¸³à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¹‚à¸¢à¸„à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ â€” à¸à¸¶à¸ word order</div><div style="margin-top:8px;font-size:11px;color:var(--amber)">Best: <span id="hs-sb">â€”</span></div></div>
      <div class="gcard" onclick="gplay('cm')"><div style="font-size:36px">ğŸ”—</div><div class="gtitle">Conditional Match</div><div class="gdesc">à¸ˆà¸±à¸šà¸„à¸¹à¹ˆà¸›à¸£à¸°à¹‚à¸¢à¸„à¸à¸±à¸š conditional à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡ (ã¨ ãŸã‚‰ ã°)</div><div style="margin-top:8px;font-size:11px;color:var(--amber)">Best: <span id="hs-cm">â€”</span></div></div>
      <div class="gcard" onclick="gplay('tc')"><div style="font-size:36px">ğŸŒ</div><div class="gtitle">Translation Challenge</div><div class="gdesc">à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¹à¸›à¸¥à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸›à¸£à¸°à¹‚à¸¢à¸„à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ â€” à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸ pattern</div><div style="margin-top:8px;font-size:11px;color:var(--amber)">Best: <span id="hs-tc">â€”</span></div></div>
    </div>
    <div class="card" style="margin-top:16px"><div class="ct">ğŸ† High Scores</div><div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:10px;margin-top:8px" id="hs-grid"></div></div>
  </div>
  <div id="g-arena" style="display:none">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;flex-wrap:wrap">
      <button class="btn bol" onclick="gexit()" style="font-size:12px">â† à¸­à¸­à¸</button>
      <div style="font-size:16px;font-weight:700;color:var(--white)" id="g-title"></div>
      <div style="margin-left:auto;display:flex;gap:16px;align-items:center" id="g-hud"></div>
    </div>
    <div id="g-content"></div>
  </div>
</div>

<!-- MASTER QUIZ -->
<div class="page" id="page-mquiz">
  <div class="phd"><h1>ğŸ† Master Quiz</h1><div class="jps">ç·åˆãƒ†ã‚¹ãƒˆ â€” à¸—à¸”à¸ªà¸­à¸šà¸„à¸£à¸šà¸—à¸¸à¸à¸«à¸±à¸§à¸‚à¹‰à¸­</div><p>20 à¸‚à¹‰à¸­ à¸œà¸ªà¸¡à¸—à¸¸à¸ Grammar topic à¸—à¸”à¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸£à¸§à¸¡</p></div>
  <div id="mq-start">
    <div class="card" style="text-align:center;max-width:440px;margin:0 auto">
      <div style="font-size:52px;margin-bottom:14px">ğŸ†</div>
      <div style="font-size:18px;font-weight:700;color:var(--white);margin-bottom:8px">Grammar Master Quiz</div>
      <div style="font-size:13px;color:var(--text2);margin-bottom:18px;line-height:1.7">20 à¸‚à¹‰à¸­ à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡ Verb Conjugation, Particles, ãªã„/ãŸã„/ã§ãã‚‹, Conditionals à¹à¸¥à¸° Sentence Endings</div>
      <button class="btn bam" onclick="startMQ()" style="font-size:14px;padding:11px 28px">ğŸš€ à¹€à¸£à¸´à¹ˆà¸¡ Master Quiz</button>
      <div style="margin-top:12px;font-size:12px;color:var(--text3)">Best: <span id="mq-hs">â€”</span></div>
    </div>
  </div>
  <div id="mq-game" style="display:none"></div>
  <div id="mq-result" style="display:none"></div>
</div>

</main>
<div class="notif" id="notif"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEB SPEECH API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function speakJP(text) {
  if (!window.speechSynthesis || !text) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'ja-JP';
  u.rate = 0.85;
  u.pitch = 1;
  window.speechSynthesis.speak(u);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function nav(id) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.ni').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  document.querySelectorAll('.ni').forEach(n=>{if(n.getAttribute('onclick')==="nav('"+id+"')")n.classList.add('active');});
  const lazy={particle:buildPTCards,endings:buildEndCards,games:buildHSGrid};
  if(lazy[id]) lazy[id]();
  initHomeProgress();
}

function stab(el,grp,id) {
  const page = el.closest('.page');
  page.querySelectorAll('.tp').forEach(p=>{
    if(p.id.startsWith(grp+'-')) p.classList.remove('active');
  });
  page.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  const panel = document.getElementById(grp+'-'+id);
  if(panel) panel.classList.add('active');
  el.classList.add('active');
  // Lazy init quiz/game
  const quizMap={
    'vb-quiz':()=>initQ('vb','vb-quiz-c',VB_Q),
    'vb-game':()=>initVBGame(),
    'pt-quiz':()=>initQ('pt','pt-quiz-c',PT_Q),
    'pt-game':()=>initPFill('pt-game-c'),
    'nt-quiz':()=>initQ('nt','nt-quiz-c',NT_Q),
    'nt-game':()=>initNTGame(),
    'cd-quiz':()=>initQ('cd','cd-quiz-c',CD_Q),
    'se-quiz':()=>initQ('se','se-quiz-c',SE_Q),
    'se-manga':buildMangaEnds,
  };
  const key=grp+'-'+id;
  if(quizMap[key]) quizMap[key]();
}

function tacc(header) {
  const body=header.nextElementSibling;
  const open=body.classList.contains('open');
  header.classList.toggle('open',!open);
  body.classList.toggle('open',!open);
  header.querySelector('span:last-child').textContent=open?'â–¼':'â–²';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STORAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function saveScore(k,v){const s=JSON.parse(localStorage.getItem('gd')||'{}');if(!s[k]||v>s[k])s[k]=v;localStorage.setItem('gd',JSON.stringify(s));}
function getScore(k){return JSON.parse(localStorage.getItem('gd')||'{}')[k]||0;}
function saveProg(k,pct){const s=JSON.parse(localStorage.getItem('gd_p')||'{}');if(pct>(s[k]||0))s[k]=pct;localStorage.setItem('gd_p',JSON.stringify(s));}
function getProg(k){return JSON.parse(localStorage.getItem('gd_p')||'{}')[k]||0;}
function saveGoal(){const s={g1:document.getElementById('g1').checked,g2:document.getElementById('g2').checked,g3:document.getElementById('g3').checked};localStorage.setItem('gd_goals',JSON.stringify(s));}

function showN(msg,type='ok'){const el=document.getElementById('notif');el.textContent=msg;el.className='notif '+type+' show';setTimeout(()=>el.classList.remove('show'),2000);}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HOME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initHomeProgress(){
  const el=document.getElementById('home-prog');if(!el)return;
  const keys=[{k:'verb',label:'ğŸ”µ Verb Conjugation'},{k:'part',label:'ğŸŸ¡ Particles'},{k:'nai',label:'ğŸ”´ ãªã„/ãŸã„/ã§ãã‚‹'},{k:'cond',label:'ğŸŸ¢ Conditionals'},{k:'end',label:'ğŸŸ£ Sentence Endings'}];
  el.innerHTML=keys.map(x=>{const pct=getProg(x.k);return`<div><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:3px"><span>${x.label}</span><span style="color:var(--amber)">${pct}%</span></div><div class="pbar"><div class="pbf" style="width:${pct}%"></div></div></div>`;}).join('');
  // Update nav progress
  [{k:'verb',id:'np-verb'},{k:'part',id:'np-part'},{k:'nai',id:'np-nai'},{k:'cond',id:'np-cond'},{k:'end',id:'np-end'}].forEach(x=>{const el=document.getElementById(x.id);if(el)el.textContent=getProg(x.k)+'%';});
  // Restore goals
  const g=JSON.parse(localStorage.getItem('gd_goals')||'{}');
  ['g1','g2','g3'].forEach(id=>{const el=document.getElementById(id);if(el&&g[id])el.checked=true;});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PARTICLE CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PDATA=[
  {p:'ã¯',ro:'wa',use:'Topic Marker',th:'à¸šà¸­à¸à¸«à¸±à¸§à¸‚à¹‰à¸­à¸—à¸µà¹ˆà¸à¸¹à¸”à¸–à¸¶à¸‡',col:'#3498db',exs:[{j:'ç§ã¯å­¦ç”Ÿã§ã™',t:'à¸‰à¸±à¸™à¹€à¸›à¹‡à¸™à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™'},{j:'ã“ã‚Œã¯æœ¬ã§ã™',t:'à¸™à¸µà¹ˆà¸„à¸·à¸­à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­'}]},
  {p:'ãŒ',ro:'ga',use:'Subject Marker',th:'à¹€à¸™à¹‰à¸™ subject / à¹ƒà¸Šà¹‰à¸à¸±à¸š suki',col:'#27ae60',exs:[{j:'çŒ«ãŒã„ã¾ã™',t:'à¸¡à¸µà¹à¸¡à¸§à¸­à¸¢à¸¹à¹ˆ'},{j:'æ—¥æœ¬èªãŒå¥½ã',t:'à¸Šà¸­à¸šà¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™'}]},
  {p:'ã‚’',ro:'wo',use:'Object Marker',th:'à¸šà¸­à¸ direct object',col:'#e74c3c',exs:[{j:'ã”é£¯ã‚’é£Ÿã¹ã‚‹',t:'à¸à¸´à¸™à¸‚à¹‰à¸²à¸§'},{j:'æœ¬ã‚’èª­ã‚€',t:'à¸­à¹ˆà¸²à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­'}]},
  {p:'ã«',ro:'ni',use:'Direction / Time',th:'à¹„à¸›à¸—à¸µà¹ˆ / à¸•à¸­à¸™ / à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ',col:'#e67e22',exs:[{j:'æ±äº¬ã«è¡Œã',t:'à¹„à¸›à¹‚à¸•à¹€à¸à¸µà¸¢à¸§'},{j:'ä¸‰æ™‚ã«æ¥ã‚‹',t:'à¸¡à¸²à¸•à¸­à¸™à¸šà¹ˆà¸²à¸¢à¸ªà¸²à¸¡'}]},
  {p:'ã§',ro:'de',use:'Location of Action',th:'à¸—à¸³à¸—à¸µà¹ˆ... / à¸”à¹‰à¸§à¸¢...',col:'#d4a520',exs:[{j:'å­¦æ ¡ã§å‹‰å¼·ã™ã‚‹',t:'à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆà¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™'},{j:'ãƒã‚¹ã§è¡Œã',t:'à¹„à¸›à¸”à¹‰à¸§à¸¢à¸£à¸–à¸šà¸±à¸ª'}]},
  {p:'ã®',ro:'no',use:'Possessive',th:'à¸‚à¸­à¸‡ / à¸—à¸µà¹ˆ (modifier)',col:'#9b59b6',exs:[{j:'ç§ã®æœ¬',t:'à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸‚à¸­à¸‡à¸‰à¸±à¸™'},{j:'æ—¥æœ¬ã®é£Ÿã¹ç‰©',t:'à¸­à¸²à¸«à¸²à¸£à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™'}]},
  {p:'ã¨',ro:'to',use:'And / With',th:'à¹à¸¥à¸° / à¸à¸±à¸š',col:'#16a085',exs:[{j:'å‹é”ã¨éŠã¶',t:'à¹€à¸¥à¹ˆà¸™à¸à¸±à¸šà¹€à¸à¸·à¹ˆà¸­à¸™'},{j:'çŒ«ã¨çŠ¬',t:'à¹à¸¡à¸§à¹à¸¥à¸°à¸«à¸¡à¸²'}]},
  {p:'ã‹ã‚‰',ro:'kara',use:'From / Because',th:'à¸ˆà¸²à¸ / à¹€à¸à¸£à¸²à¸°',col:'#2980b9',exs:[{j:'æ±äº¬ã‹ã‚‰æ¥ãŸ',t:'à¸¡à¸²à¸ˆà¸²à¸à¹‚à¸•à¹€à¸à¸µà¸¢à¸§'},{j:'å¥½ãã ã‹ã‚‰',t:'à¹€à¸à¸£à¸²à¸°à¸Šà¸­à¸š'}]},
  {p:'ã¾ã§',ro:'made',use:'Until / Up to',th:'à¸ˆà¸™à¸–à¸¶à¸‡ / à¸–à¸¶à¸‡',col:'#c0392b',exs:[{j:'é§…ã¾ã§æ­©ã',t:'à¹€à¸”à¸´à¸™à¹„à¸›à¸–à¸¶à¸‡à¸ªà¸–à¸²à¸™à¸µ'},{j:'å…­æ™‚ã¾ã§åƒã',t:'à¸—à¸³à¸‡à¸²à¸™à¸–à¸¶à¸‡à¸«à¸à¹‚à¸¡à¸‡'}]},
  {p:'ã‚‚',ro:'mo',use:'Also / Either',th:'à¸”à¹‰à¸§à¸¢ / à¸à¹‡ / à¹€à¸«à¸¡à¸·à¸­à¸™à¸à¸±à¸™',col:'#1a7a5e',exs:[{j:'ç§ã‚‚è¡Œã',t:'à¸‰à¸±à¸™à¸à¹‡à¹„à¸›à¸”à¹‰à¸§à¸¢'},{j:'çŒ«ã‚‚å¥½ã',t:'à¸Šà¸­à¸šà¹à¸¡à¸§à¸”à¹‰à¸§à¸¢'}]},
];

function buildPTCards(){
  const el=document.getElementById('ptcards');if(!el||el.children.length>0)return;
  PDATA.forEach(p=>{
    const d=document.createElement('div');
    d.style.cssText='background:var(--paper);border:1px solid var(--border);border-radius:12px;padding:16px;transition:all .2s';
    d.onmouseover=()=>d.style.borderColor=p.col;d.onmouseout=()=>d.style.borderColor='var(--border)';
    d.innerHTML=`<div style="font-family:'Noto Serif JP';font-size:44px;color:${p.col};text-align:center;font-weight:900;text-shadow:0 0 16px ${p.col}44">${p.p}</div>
      <div style="font-size:11px;color:var(--text2);text-align:center">${p.ro}</div>
      <div style="font-size:12px;font-weight:700;color:${p.col};text-align:center;margin-top:3px">${p.use}</div>
      <div style="font-size:11px;color:var(--text);margin-top:5px;line-height:1.5">${p.th}</div>
      <div style="margin-top:8px;display:flex;flex-direction:column;gap:5px">
        ${p.exs.map(e=>`<div style="background:var(--ink3);border-radius:6px;padding:6px 9px"><div style="font-family:'Noto Sans JP';font-size:13px;color:var(--white)">${e.j}</div><div style="font-size:11px;color:var(--text2);margin-top:2px">${e.t}</div></div>`).join('')}
      </div>`;
    el.appendChild(d);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ENDINGS CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const EDATA=[
  {p:'ã‹',ro:'ka',feel:'à¸„à¸³à¸–à¸²à¸¡',col:'#3498db',desc:'à¹€à¸•à¸´à¸¡à¸—à¹‰à¸²à¸¢à¸›à¸£à¸°à¹‚à¸¢à¸„à¸—à¸³à¹€à¸›à¹‡à¸™à¸„à¸³à¸–à¸²à¸¡',
   exs:[{j:'é£Ÿã¹ã¾ã—ãŸã‹ï¼Ÿ',t:'à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡?'},{j:'æ—¥æœ¬èªãŒå¥½ãã§ã™ã‹ï¼Ÿ',t:'à¸Šà¸­à¸šà¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™à¹„à¸«à¸¡?'},{j:'ã©ã“ã«è¡Œãã®ï¼Ÿ',t:'à¸ˆà¸°à¹„à¸›à¹„à¸«à¸™? (informal)'}]},
  {p:'ã­',ro:'ne',feel:'à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢',col:'#27ae60',desc:'"à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?" / "à¸™à¸°" â€” à¸—à¸³à¹ƒà¸«à¹‰à¸šà¸—à¸ªà¸™à¸—à¸™à¸²à¸™à¸¸à¹ˆà¸¡à¸™à¸§à¸¥ à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸Ÿà¸±à¸‡',
   exs:[{j:'ã„ã„å¤©æ°—ã§ã™ã­',t:'à¸­à¸²à¸à¸²à¸¨à¸”à¸µà¸™à¸° (à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?)'},{j:'ãŠã„ã—ã„ã­ï¼',t:'à¸­à¸£à¹ˆà¸­à¸¢à¸™à¸°!'},{j:'é›£ã—ã„ã­...',t:'à¸¢à¸²à¸à¸™à¸°...'}]},
  {p:'ã‚ˆ',ro:'yo',feel:'à¸¢à¸·à¸™à¸¢à¸±à¸™/à¹€à¸™à¹‰à¸™',col:'#e74c3c',desc:'à¹€à¸™à¹‰à¸™à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¹à¹‰à¸à¸¹à¸”à¸£à¸¹à¹‰à¹à¸•à¹ˆà¸œà¸¹à¹‰à¸Ÿà¸±à¸‡à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸£à¸¹à¹‰ â€” à¸šà¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆà¸«à¸£à¸·à¸­à¹€à¸™à¹‰à¸™à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ',
   exs:[{j:'ã“ã‚Œã¯å±ãªã„ã‚ˆï¼',t:'à¸™à¸µà¹ˆà¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¸™à¸°! (à¸šà¸­à¸à¹ƒà¸«à¹‰à¸£à¸¹à¹‰)'},{j:'å¤§ä¸ˆå¤«ã ã‚ˆ',t:'à¹‚à¸­à¹€à¸„à¸™à¸° (à¸¢à¸·à¸™à¸¢à¸±à¸™)'},{j:'çŸ¥ã£ã¦ã‚‹ã‚ˆï¼',t:'à¸£à¸¹à¹‰à¹à¸¥à¹‰à¸§! (à¹€à¸™à¹‰à¸™)'}]},
  {p:'ã‚ˆã­',ro:'yone',feel:'à¸¢à¸·à¸™à¸¢à¸±à¸™ + à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™',col:'#9b59b6',desc:'à¸œà¸ªà¸¡ ã‚ˆ + ã­ â€” à¸¢à¸·à¸™à¸¢à¸±à¸™à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸£à¸¹à¹‰à¸à¸£à¹‰à¸­à¸¡à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸Ÿà¸±à¸‡',
   exs:[{j:'ã“ã‚Œã¯é«˜ã„ã‚ˆã­ï¼Ÿ',t:'à¸™à¸µà¹ˆà¹à¸à¸‡à¸™à¸° à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?'},{j:'å½¼ã¯å„ªã—ã„ã‚ˆã­',t:'à¹€à¸‚à¸²à¹ƒà¸ˆà¸”à¸µà¸™à¸° (à¸¢à¸·à¸™à¸¢à¸±à¸™+à¸‚à¸­à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢)'},{j:'é›£ã—ã„ã‚ˆã­...',t:'à¸¢à¸²à¸à¸™à¸°... (shared feeling)'}]},
];

function buildEndCards(){
  const el=document.getElementById('end-cards');if(!el||el.children.length>0)return;
  EDATA.forEach(e=>{
    const d=document.createElement('div');d.className='card';d.style.borderColor=e.col;d.style.marginBottom='14px';
    d.innerHTML=`<div style="display:flex;align-items:center;gap:18px;margin-bottom:12px">
      <div style="font-family:'Noto Serif JP';font-size:48px;color:${e.col};font-weight:900;min-width:56px;text-shadow:0 0 18px ${e.col}44">${e.p}</div>
      <div><div style="font-size:13px;font-weight:700;color:var(--white)">${e.ro} â€” ${e.feel}</div><div style="font-size:12px;color:var(--text2);margin-top:3px;line-height:1.6">${e.desc}</div></div>
    </div>
    <div style="display:flex;flex-direction:column;gap:7px">${e.exs.map(x=>`<div class="ex"><div class="exj">${x.j}</div><div class="ext">${x.t}</div></div>`).join('')}</div>`;
    el.appendChild(d);
  });
}

function buildMangaEnds(){
  const el=document.getElementById('end-manga');if(!el||el.children.length>0)return;
  const exs=[
    {j:'ã“ã‚Œã§çµ‚ã‚ã‚Šã ã€ã‚ˆï¼',note:'ã‚ˆ â€” à¸›à¸£à¸°à¸à¸²à¸¨à¸ˆà¸š à¹€à¸™à¹‰à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥',p:'ã‚ˆ',col:'#e74c3c'},
    {j:'ä¸€ç·’ã«è¡Œã“ã†ã€ã­ï¼Ÿ',note:'ã­ â€” à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢à¸­à¸¢à¹ˆà¸²à¸‡à¸­à¹ˆà¸­à¸™à¹‚à¸¢à¸™',p:'ã­',col:'#27ae60'},
    {j:'ãŠå‰ã«ã¯é–¢ä¿‚ãªã„ã‹ï¼Ÿ',note:'ã‹ â€” à¸„à¸³à¸–à¸²à¸¡ (casual)',p:'ã‹',col:'#3498db'},
    {j:'å¼·ããªã£ãŸã‚ˆã­...',note:'ã‚ˆã­ â€” à¸ªà¸±à¸‡à¹€à¸à¸•à¸§à¹ˆà¸²à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸› + à¸‚à¸­à¸¢à¸·à¸™à¸¢à¸±à¸™',p:'ã‚ˆã­',col:'#9b59b6'},
    {j:'ã‚ã‹ã£ã¦ã‚‹ã‚ˆï¼ã†ã‚‹ã•ã„ï¼',note:'ã‚ˆ â€” à¹€à¸™à¹‰à¸™à¸„à¸§à¸²à¸¡à¸«à¸‡à¸¸à¸”à¸«à¸‡à¸´à¸”',p:'ã‚ˆ',col:'#e74c3c'},
    {j:'ç¾å‘³ã—ã„ã­ã€ã“ã®ãƒ©ãƒ¼ãƒ¡ãƒ³',note:'ã­ â€” shared experience',p:'ã­',col:'#27ae60'},
    {j:'æœ¬å½“ã«è¡Œãã®ã‹ï¼Ÿ',note:'ã‹ â€” à¸ªà¸‡à¸ªà¸±à¸¢ à¸–à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¹†',p:'ã‹',col:'#3498db'},
    {j:'å¥½ãã ã‚ˆ...',note:'ã‚ˆ â€” confession! à¹€à¸™à¹‰à¸™à¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¹ƒà¸ˆ',p:'ã‚ˆ',col:'#e74c3c'},
    {j:'ãã†ã ã‚ˆã­ã€ã‚ã‹ã£ã¦ãŸ',note:'ã‚ˆã­ â€” à¸¢à¸·à¸™à¸¢à¸±à¸™à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§',p:'ã‚ˆã­',col:'#9b59b6'},
  ];
  exs.forEach(m=>{
    const d=document.createElement('div');
    d.style.cssText=`background:var(--ink3);border-left:4px solid ${m.col};border-radius:0 10px 10px 0;padding:12px 14px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;margin-bottom:8px`;
    d.innerHTML=`<div><div style="font-family:'Noto Sans JP';font-size:17px;color:var(--white)">${m.j}</div><div style="font-size:12px;color:var(--text2);margin-top:3px">${m.note}</div></div>
      <span style="background:${m.col}22;color:${m.col};border:1px solid ${m.col}66;padding:3px 10px;border-radius:10px;font-size:12px;font-family:'Noto Serif JP';flex-shrink:0">${m.p}</span>`;
    el.appendChild(d);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const VB_Q=[
  {q:'é£Ÿã¹ã‚‹ â€” ã¦-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['é£Ÿã¹ã¦','é£Ÿã¹ã£ã¦','é£Ÿã¹ã‚Œ','é£Ÿã¹ãªã„'],ans:'é£Ÿã¹ã¦',note:'RU-verb: à¸•à¸±à¸” ã‚‹ â†’ à¹€à¸•à¸´à¸¡ ã¦'},
  {q:'é£²ã‚€ â€” ãªã„-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['é£²ã¾ãªã„','é£²ã‚€ãªã„','é£²ã¿ãªã„','é£²ã‚ãªã„'],ans:'é£²ã¾ãªã„',note:'U-verb muâ†’ma + ãªã„'},
  {q:'æ›¸ã â€” ã¦-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['æ›¸ã„ã¦','æ›¸ã£ã¦','æ›¸ãã¦','æ›¸ãã¦'],ans:'æ›¸ã„ã¦',note:'U-verb ku â†’ ã„ã¦'},
  {q:'ã™ã‚‹ â€” ãªã„-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['ã—ãªã„','ã™ãªã„','ã•ãªã„','ã›ãªã„'],ans:'ã—ãªã„',note:'Irregular: ã™ã‚‹ â†’ ã—ãªã„'},
  {q:'è¦‹ã‚‹ â€” ã¾ã™-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['è¦‹ã¾ã™','è¦‹ã—ã¾ã™','è¦‹ã‚Šã¾ã™','è¦‹ãˆã¾ã™'],ans:'è¦‹ã¾ã™',note:'RU-verb stem + ã¾ã™'},
  {q:'è¡Œã â€” ã¦-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£? (à¸£à¸°à¸§à¸±à¸‡!)',opts:['è¡Œã£ã¦','è¡Œã„ã¦','è¡Œãã¦','è¡Œãã¦'],ans:'è¡Œã£ã¦',note:'è¡Œã â†’ è¡Œã£ã¦ (exception!)'},
  {q:'æ¥ã‚‹ (kuru) â€” ãªã„-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['ã“ãªã„','æ¥ãªã„','ããªã„','ããªã„'],ans:'ã“ãªã„',note:'Irregular: ãã‚‹ â†’ ã“ãªã„'},
  {q:'å¾…ã¤ â€” ãŸ-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['å¾…ã£ãŸ','å¾…ã¦ãŸ','å¾…ã¡ãŸ','å¾…ã¤ãŸ'],ans:'å¾…ã£ãŸ',note:'U-verb tsu â†’ ã£ãŸ'},
  {q:'é£Ÿã¹ã‚‹ â€” potential form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['é£Ÿã¹ã‚‰ã‚Œã‚‹','é£Ÿã¹ã‚Œã‚‹','é£Ÿã¹ã§ãã‚‹','é£Ÿã¹ãˆã‚‹'],ans:'é£Ÿã¹ã‚‰ã‚Œã‚‹',note:'RU-verb: stem + ã‚‰ã‚Œã‚‹'},
  {q:'è©±ã™ â€” ã¦-form à¸„à¸·à¸­à¸­à¸°à¹„à¸£?',opts:['è©±ã—ã¦','è©±ã„ã¦','è©±ã£ã¦','è©±ãã¦'],ans:'è©±ã—ã¦',note:'U-verb su â†’ ã—ã¦'},
];

const PT_Q=[
  {q:'ç§___ç”°ä¸­ã§ã™ã€‚(à¸‰à¸±à¸™à¸Šà¸·à¹ˆà¸­à¸—à¸²à¸™à¸²à¸à¸°)',opts:['ã¯','ãŒ','ã‚’','ã«'],ans:'ã¯',note:'ã¯ = topic marker'},
  {q:'çŒ«___å¥½ãã§ã™ã€‚(à¸Šà¸­à¸šà¹à¸¡à¸§)',opts:['ã¯','ãŒ','ã‚’','ã§'],ans:'ãŒ',note:'ãŒ à¹ƒà¸Šà¹‰à¸à¸±à¸š suki/kirai'},
  {q:'ã”é£¯___é£Ÿã¹ã‚‹ã€‚(à¸à¸´à¸™à¸‚à¹‰à¸²à¸§)',opts:['ã¯','ãŒ','ã‚’','ã«'],ans:'ã‚’',note:'ã‚’ = direct object marker'},
  {q:'æ±äº¬___è¡Œãã€‚(à¹„à¸›à¹‚à¸•à¹€à¸à¸µà¸¢à¸§)',opts:['ãŒ','ã«','ã§','ã‚‚'],ans:'ã«',note:'ã« = direction/destination'},
  {q:'å­¦æ ¡___å‹‰å¼·ã™ã‚‹ã€‚(à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆà¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™)',opts:['ã«','ã§','ã‚’','ã¯'],ans:'ã§',note:'ã§ = location of activity'},
  {q:'å‹é”___éŠã¶ã€‚(à¹€à¸¥à¹ˆà¸™à¸à¸±à¸šà¹€à¸à¸·à¹ˆà¸­à¸™)',opts:['ã¨','ã‚‚','ãŒ','ã‹ã‚‰'],ans:'ã¨',note:'ã¨ = with (person)'},
  {q:'æ±äº¬___æ¥ãŸã€‚(à¸¡à¸²à¸ˆà¸²à¸à¹‚à¸•à¹€à¸à¸µà¸¢à¸§)',opts:['ã«','ã§','ã‹ã‚‰','ã¾ã§'],ans:'ã‹ã‚‰',note:'ã‹ã‚‰ = from'},
  {q:'ç§___è¡Œãã€‚(à¸‰à¸±à¸™à¸à¹‡à¹„à¸›à¸”à¹‰à¸§à¸¢)',opts:['ã¯','ãŒ','ã‚‚','ã‚’'],ans:'ã‚‚',note:'ã‚‚ = also, too'},
  {q:'äº”æ™‚___å¸°ã‚‹ã€‚(à¸à¸¥à¸±à¸šà¸•à¸­à¸™à¸«à¹‰à¸²à¹‚à¸¡à¸‡)',opts:['ã§','ã«','ãŒ','ã‚’'],ans:'ã«',note:'ã« = time marker'},
  {q:'ãƒã‚¹___è¡Œãã€‚(à¹„à¸›à¸”à¹‰à¸§à¸¢à¸£à¸–à¸šà¸±à¸ª)',opts:['ã«','ã§','ã‹ã‚‰','ã¨'],ans:'ã§',note:'ã§ = means of transport'},
];

const NT_Q=[
  {q:'é£Ÿã¹ã‚‹ + ãªã„ = ?',opts:['é£Ÿã¹ãªã„','é£Ÿã¹ããªã„','é£Ÿã¹ã¾ã›ã‚“','é£Ÿã¹ãªã‹ã£ãŸ'],ans:'é£Ÿã¹ãªã„',note:'RU-verb: é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ãªã„'},
  {q:'è¡Œã + ãŸã„ = ?',opts:['è¡ŒããŸã„','è¡Œã£ãŸã„','è¡ŒããŸã„','è¡ŒãŸã„'],ans:'è¡ŒããŸã„',note:'ã¾ã™-stem: è¡Œãã¾ã™ â†’ è¡ŒããŸã„'},
  {q:'"à¸§à¹ˆà¸²à¸¢à¸™à¹‰à¸³à¹„à¸”à¹‰" = ? (æ³³ã=oyogu)',opts:['æ³³ã’ã‚‹','æ³³ãã‚‰ã‚Œã‚‹','æ³³ãã§ãã‚‹','æ³³ã„ã‚Œã‚‹'],ans:'æ³³ã’ã‚‹',note:'U-verb potential: gu â†’ geru'},
  {q:'ã™ã‚‹ + ãŸã„ = ?',opts:['ã—ãŸã„','ã™ãŸã„','ã—ããŸã„','ã—ãŸãŸã„'],ans:'ã—ãŸã„',note:'ã™ã‚‹ â†’ ã—ãŸã„ (irregular)'},
  {q:'é£²ã‚€ + ãªã„ = ?',opts:['é£²ã¾ãªã„','é£²ã¿ãªã„','é£²ã‚€ãªã„','é£²ã‚‚ãªã„'],ans:'é£²ã¾ãªã„',note:'U-verb muâ†’ma: é£²ã¾ãªã„'},
  {q:'"à¹„à¸¡à¹ˆà¸­à¸¢à¸²à¸à¸à¸´à¸™" (é£Ÿã¹ã‚‹) = ?',opts:['é£Ÿã¹ãŸããªã„','é£Ÿã¹ãŸã„ãªã„','é£Ÿã¹ãªãŸã„','é£Ÿã¹ãªã„ãŸã„'],ans:'é£Ÿã¹ãŸããªã„',note:'ãŸã„ â†’ ãŸããªã„ (à¸›à¸à¸´à¹€à¸ªà¸˜)'},
  {q:'è©±ã™ + potential = ?',opts:['è©±ã›ã‚‹','è©±ã•ã‚Œã‚‹','è©±ã™ãˆã‚‹','è©±ã—ã‚‰ã‚Œã‚‹'],ans:'è©±ã›ã‚‹',note:'U-verb suâ†’seru: è©±ã›ã‚‹'},
  {q:'ãã‚‹ + ãªã„ = ?',opts:['ã“ãªã„','ããªã„','ããªã„','ãã‚‹ãªã„'],ans:'ã“ãªã„',note:'Irregular: ãã‚‹ â†’ ã“ãªã„'},
];

const CD_Q=[
  {q:'æ˜¥ã«ãªã‚‹___æ¡œãŒå’²ã\n(à¸à¸à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´ â€” à¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™à¹€à¸ªà¸¡à¸­)',opts:['ã¨','ãŸã‚‰','ã°','ãªã‚‰'],ans:'ã¨',note:'ã¨ = à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¹‚à¸”à¸¢à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´à¹€à¸ªà¸¡à¸­'},
  {q:'ãŠé‡‘ãŒã‚ã£___æ—…è¡Œã™ã‚‹\n(à¸ªà¸¡à¸¡à¸•à¸´à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ)',opts:['ã¨','ãŸã‚‰','ã°','ãªã‚‰'],ans:'ãŸã‚‰',note:'ãŸã‚‰ = à¸ªà¸¡à¸¡à¸•à¸´ + à¹ƒà¸Šà¹‰à¸à¸±à¸š request à¹„à¸”à¹‰'},
  {q:'æ—©ãèµ·ã___é–“ã«åˆã†\n(à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸„à¸³à¹à¸™à¸°à¸™à¸³)',opts:['ã¨','ãŸã‚‰','ã‚Œã°','ãªã‚‰'],ans:'ã‚Œã°',note:'ã° = Hypothetical / à¸„à¸³à¹à¸™à¸°à¸™à¸³'},
  {q:'ã“ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™___é›»æ°—ãŒã¤ã\n(cause-effect à¸—à¸µà¹ˆà¹à¸™à¹ˆà¸™à¸­à¸™)',opts:['ã¨','ãŸã‚‰','ã°','ã‹ã‚‰'],ans:'ã¨',note:'ã¨ = mechanical/natural cause-effect'},
  {q:'å®¶ã«å¸°ã£___é›»è©±ã—ã¦\n(à¸à¸­à¸—à¸³à¹à¸¥à¹‰à¸§ + request)',opts:['ã¨','ãŸã‚‰','ã°','ãªã‚‰'],ans:'ãŸã‚‰',note:'ãŸã‚‰ à¹ƒà¸Šà¹‰à¸à¸±à¸š request à¹„à¸”à¹‰ à¸• à¹„à¸¡à¹ˆà¹„à¸”à¹‰'},
  {q:'å®‰___è²·ã†\n(à¸–à¹‰à¸²à¸–à¸¹à¸ â€” adj ã„ conditional)',opts:['ã‘ã‚Œã°','ã„ã¨','ã„ãŸã‚‰','ãªã‚‰ã°'],ans:'ã‘ã‚Œã°',note:'Adj ã„: à¸•à¸±à¸” ã„ â†’ ã‘ã‚Œã°'},
  {q:'ãŸã‚‰-form à¸‚à¸­à¸‡ é£Ÿã¹ã‚‹ à¸„à¸·à¸­?',opts:['é£Ÿã¹ãŸã‚‰','é£Ÿã¹ã‚‹ã¨','é£Ÿã¹ã‚Œã°','é£Ÿã¹ãªã‚‰'],ans:'é£Ÿã¹ãŸã‚‰',note:'ãŸã‚‰-form = ãŸ-form + ã‚‰'},
];

const SE_Q=[
  {q:'"à¸­à¸£à¹ˆà¸­à¸¢à¸™à¸°! (à¸‚à¸­à¹ƒà¸«à¹‰à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢)"',opts:['ãŠã„ã—ã„ã‹','ãŠã„ã—ã„ã‚ˆ','ãŠã„ã—ã„ã­','ãŠã„ã—ã„ã‚ˆã­'],ans:'ãŠã„ã—ã„ã­',note:'ã­ = à¹€à¸Šà¸·à¹‰à¸­à¹€à¸Šà¸´à¸à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¸Ÿà¸±à¸‡à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢'},
  {q:'"à¸™à¸µà¹ˆà¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¸™à¸°! (à¸šà¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ)"',opts:['å±ãªã„ã‹','å±ãªã„ã­','å±ãªã„ã‚ˆ','å±ãªã„ã‚ˆã­'],ans:'å±ãªã„ã‚ˆ',note:'ã‚ˆ = à¸šà¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ/à¹€à¸™à¹‰à¸™'},
  {q:'"à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡?" (à¸„à¸³à¸–à¸²à¸¡ formal)',opts:['é£Ÿã¹ã¾ã—ãŸã‚ˆ','é£Ÿã¹ã¾ã—ãŸã­','é£Ÿã¹ã¾ã—ãŸã‚ˆã­','é£Ÿã¹ã¾ã—ãŸã‹'],ans:'é£Ÿã¹ã¾ã—ãŸã‹',note:'ã‹ = à¸„à¸³à¸–à¸²à¸¡'},
  {q:'"à¹à¸à¸‡à¸™à¸° à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡? (à¸¢à¸·à¸™à¸¢à¸±à¸™ + à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™)"',opts:['é«˜ã„ã‹','é«˜ã„ã­','é«˜ã„ã‚ˆ','é«˜ã„ã‚ˆã­'],ans:'é«˜ã„ã‚ˆã­',note:'ã‚ˆã­ = à¸¢à¸·à¸™à¸¢à¸±à¸™à¹à¸¥à¸°à¸‚à¸­à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™'},
  {q:'"à¸£à¸¹à¹‰à¹à¸¥à¹‰à¸§! (à¹€à¸™à¹‰à¸™ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸šà¸­à¸)"',opts:['çŸ¥ã£ã¦ã‚‹ã‹','çŸ¥ã£ã¦ã‚‹ã­','çŸ¥ã£ã¦ã‚‹ã‚ˆ','çŸ¥ã£ã¦ã‚‹ã‚ˆã­'],ans:'çŸ¥ã£ã¦ã‚‹ã‚ˆ',note:'ã‚ˆ = à¹€à¸™à¹‰à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸œà¸¹à¹‰à¸à¸¹à¸”à¸£à¸¹à¹‰'},
  {q:'"à¸¢à¸²à¸à¸™à¸°... (shared feeling)"',opts:['é›£ã—ã„ã‹','é›£ã—ã„ã­','é›£ã—ã„ã‚ˆ','é›£ã—ã„ã‚ˆã­'],ans:'é›£ã—ã„ã­',note:'ã­ = shared feeling'},
];

// MASTER QUIZ = combined
const MQ_ALL=[...VB_Q,...PT_Q,...NT_Q,...CD_Q,...SE_Q];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ ENGINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const qStates={};
function shuf(a){return[...a].sort(()=>Math.random()-.5);}

function initQ(prefix,containerId,questions){
  const el=document.getElementById(containerId);if(!el)return;
  if(el.dataset.init==='1')return;
  el.dataset.init='1';
  qStates[prefix]={qs:shuf(questions).slice(0,Math.min(8,questions.length)),idx:0,score:0,ans:false};
  renderQ(prefix,containerId);
}

function renderQ(prefix,containerId){
  const el=document.getElementById(containerId);if(!el)return;
  const st=qStates[prefix];
  if(st.idx>=st.qs.length){showQResult(prefix,containerId,st.score,st.qs.length);return;}
  const q=st.qs[st.idx];st.ans=false;
  const jpPart = q.q.split(/\s*[â€”â€“-]\s*/)[0].trim();
  el.innerHTML=`
    <div class="sbar"><div>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span style="color:var(--amber)">${st.idx+1}</span>/${st.qs.length}</div><div class="snum">${st.score}</div><div style="font-size:11px">à¸„à¸°à¹à¸™à¸™</div></div>
    <div class="pbar" style="margin-bottom:18px"><div class="pbf" style="width:${(st.idx/st.qs.length)*100}%"></div></div>
    <div class="qchar">${q.q} <button class="speak-btn" onclick="speakJP('${jpPart.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š</button></div>
    <div class="qopts" id="${prefix}-opts"></div>
    <div id="${prefix}-note" style="min-height:24px;font-size:13px;color:var(--text2);margin-top:7px"></div>
    <button class="btn bam" id="${prefix}-nxt" style="display:none;margin-top:12px" onclick="nextQ('${prefix}','${containerId}')">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button>
  `;
  speakJP(jpPart);
  const oc=document.getElementById(prefix+'-opts');
  q.opts.forEach(o=>{
    const b=document.createElement('div');b.className='qopt';
    b.style.fontFamily=/[\u3040-\u30ff\u4e00-\u9fff]/.test(o)?'"Noto Sans JP"':'"Sarabun"';
    b.textContent=o;
    b.onclick=()=>{
      if(st.ans)return;st.ans=true;
      oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){st.score+=10;showN('âœ“ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡!','ok');}else showN('âœ— à¸œà¸´à¸”','bad');
      document.getElementById(prefix+'-note').textContent='ğŸ’¡ '+q.note;
      document.getElementById(prefix+'-nxt').style.display='block';
    };
    oc.appendChild(b);
  });
}

function nextQ(prefix,containerId){
  const st=qStates[prefix];st.idx++;
  renderQ(prefix,containerId);
  const kmap={vb:'verb',pt:'part',nt:'nai',cd:'cond',se:'end'};
  if(kmap[prefix]) saveProg(kmap[prefix],Math.round(st.idx/st.qs.length*100));
  initHomeProgress();
}

function showQResult(prefix,containerId,score,total){
  saveScore('q_'+prefix,score);
  const pct=Math.round(score/(total*10)*100);
  const emoji=pct>=90?'ğŸ†':pct>=70?'ğŸ‰':pct>=50?'ğŸ˜Š':'ğŸ’ª';
  const msg=pct>=90?'à¸¢à¸­à¸”à¹€à¸¢à¸µà¹ˆà¸¢à¸¡!':pct>=70?'à¸”à¸µà¸¡à¸²à¸!':pct>=50?'à¸¢à¸±à¸‡à¸à¸­à¹„à¸”à¹‰':'à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹à¸¡à¹ˆà¸™ à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡';
  document.getElementById(containerId).innerHTML=`
    <div style="text-align:center;max-width:360px;margin:0 auto;padding:20px">
      <div style="font-size:52px">${emoji}</div>
      <div style="font-family:'Noto Serif JP';font-size:64px;color:var(--amber);font-weight:900;line-height:1">${score}</div>
      <div style="font-size:13px;color:var(--text2);margin-top:6px">${score}/${total*10} â€” ${pct}%</div>
      <div style="font-size:15px;color:var(--white);margin-top:6px">${msg}</div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:18px">
        <button class="btn bam" onclick="resetQ('${prefix}','${containerId}')">ğŸ”„ à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
        <button class="btn bol" onclick="nav('games')">ğŸ® à¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡à¸ªà¹Œ</button>
      </div>
    </div>`;
}

function resetQ(prefix,containerId){
  const el=document.getElementById(containerId);if(el)el.dataset.init='';
  const qmap={vb:VB_Q,pt:PT_Q,nt:NT_Q,cd:CD_Q,se:SE_Q};
  initQ(prefix,containerId,qmap[prefix]);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VERB GAME (speed conjugation mini)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const VBG_D=[
  {v:'é£Ÿã¹ã‚‹',type:'RU',form:'ã¦-form',ans:'é£Ÿã¹ã¦'},{v:'é£²ã‚€',type:'U',form:'ãªã„-form',ans:'é£²ã¾ãªã„'},
  {v:'æ›¸ã',type:'U',form:'ã¦-form',ans:'æ›¸ã„ã¦'},{v:'ã™ã‚‹',type:'IRR',form:'ã¦-form',ans:'ã—ã¦'},
  {v:'è¦‹ã‚‹',type:'RU',form:'ãŸ-form',ans:'è¦‹ãŸ'},{v:'è¡Œã',type:'U',form:'ã¦-form',ans:'è¡Œã£ã¦'},
  {v:'æ¥ã‚‹',type:'IRR',form:'ãªã„-form',ans:'ã“ãªã„'},{v:'è©±ã™',type:'U',form:'ã¦-form',ans:'è©±ã—ã¦'},
  {v:'å¾…ã¤',type:'U',form:'ãŸ-form',ans:'å¾…ã£ãŸ'},{v:'èµ·ãã‚‹',type:'RU',form:'ãªã„-form',ans:'èµ·ããªã„'},
];
let vbgS={};
function initVBGame(){
  const el=document.getElementById('vb-game-c');if(!el||el.dataset.init==='1')return;
  el.dataset.init='1';
  vbgS={qs:shuf(VBG_D),idx:0,score:0,combo:0,tLeft:45,ans:false};
  el.innerHTML=`
    <div class="sbar"><div>âš¡ Verb Speed â€” 45 à¸§à¸´à¸™à¸²à¸—à¸µ</div><div class="snum" id="vbg-s">0</div><div style="font-size:11px" id="vbg-t">45</div></div>
    <div class="pbar" style="margin-bottom:16px"><div class="pbf" style="width:100%" id="vbg-pb"></div></div>
    <div id="vbg-q"></div>`;
  renderVBGQ();
  const tmr=setInterval(()=>{
    vbgS.tLeft-=0.1;
    const t=document.getElementById('vbg-t'),pb=document.getElementById('vbg-pb');
    if(t){t.textContent=Math.ceil(vbgS.tLeft);if(vbgS.tLeft<=10)t.style.color='var(--red2)';}
    if(pb) pb.style.width=(vbgS.tLeft/45*100)+'%';
    if(vbgS.tLeft<=0){clearInterval(tmr);saveScore('vbg',vbgS.score);
      const q=document.getElementById('vbg-q');if(q)q.innerHTML=`<div style="text-align:center;padding:20px"><div style="font-size:48px">ğŸ†</div><div style="font-family:'Noto Serif JP';font-size:48px;color:var(--amber);font-weight:900">${vbgS.score}</div><div style="color:var(--text2);margin-top:8px">à¸„à¸°à¹à¸™à¸™ | Best: ${getScore('vbg')}</div><button class="btn bam" style="margin-top:14px" onclick="document.getElementById('vb-game-c').dataset.init='';initVBGame()">ğŸ”„ à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸</button></div>`;}
  },100);
  el._timer=tmr;
}

function renderVBGQ(){
  const el=document.getElementById('vbg-q');if(!el)return;
  vbgS.ans=false;
  const q=vbgS.qs[vbgS.idx%vbgS.qs.length];vbgS.idx++;
  const typeTag={RU:'<span class="vtag vru">RU</span>',U:'<span class="vtag vu">U</span>',IRR:'<span class="vtag virr">IRR</span>'}[q.type];
  const wrongs=shuf(VBG_D.filter(x=>x.ans!==q.ans)).slice(0,3).map(x=>x.ans);
  const opts=shuf([q.ans,...wrongs]);
  el.innerHTML=`<div style="text-align:center;margin:0 0 16px">${typeTag}<div style="font-family:'Noto Serif JP';font-size:52px;color:var(--white);margin:6px 0">${q.v}</div><div style="background:var(--amber);color:#000;border-radius:16px;padding:3px 14px;font-size:12px;font-weight:700;display:inline-block">${q.form}</div></div>
    <div class="qopts" id="vbg-opts"></div><div id="vbg-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div>`;
  const oc=document.getElementById('vbg-opts');
  opts.forEach(o=>{
    const b=document.createElement('div');b.className='qopt';b.style.fontFamily="'Noto Sans JP'";b.textContent=o;
    b.onclick=()=>{
      if(vbgS.ans)return;vbgS.ans=true;
      oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){vbgS.combo++;vbgS.score+=10*(vbgS.combo>=3?2:1);showN('âœ“'+(vbgS.combo>=3?' COMBO!':''),'ok');}
      else{vbgS.combo=0;showN('âœ— '+q.ans,'bad');}
      document.getElementById('vbg-s').textContent=vbgS.score;
      setTimeout(renderVBGQ,360);
    };
    oc.appendChild(b);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NT GAME (ãªã„/ãŸã„/ã§ãã‚‹ match)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initNTGame(){
  const el=document.getElementById('nt-game-c');if(!el||el.dataset.init==='1')return;
  el.dataset.init='1';
  const qs=[
    {v:'é£Ÿã¹ã‚‹',target:'ãªã„-form',ans:'é£Ÿã¹ãªã„',opts:['é£Ÿã¹ãªã„','é£Ÿã¹ãŸã„','é£Ÿã¹ã‚‰ã‚Œã‚‹','é£Ÿã¹ã¾ã™']},
    {v:'é£²ã‚€',target:'ãŸã„-form',ans:'é£²ã¿ãŸã„',opts:['é£²ã¿ãŸã„','é£²ã¾ãªã„','é£²ã‚ãªã„','é£²ã¿ã¾ã™']},
    {v:'æ›¸ã',target:'potential',ans:'æ›¸ã‘ã‚‹',opts:['æ›¸ã‘ã‚‹','æ›¸ã‹ãªã„','æ›¸ããŸã„','æ›¸ãã¾ã™']},
    {v:'ã™ã‚‹',target:'ãªã„-form',ans:'ã—ãªã„',opts:['ã—ãªã„','ã—ãŸã„','ã§ããªã„','ã—ã¾ã™']},
    {v:'è¦‹ã‚‹',target:'ãŸã„-form',ans:'è¦‹ãŸã„',opts:['è¦‹ãŸã„','è¦‹ãªã„','è¦‹ã‚‰ã‚Œã‚‹','è¦‹ã¾ã™']},
    {v:'è©±ã™',target:'potential',ans:'è©±ã›ã‚‹',opts:['è©±ã›ã‚‹','è©±ã•ãªã„','è©±ã—ãŸã„','è©±ã—ã¾ã™']},
    {v:'æ¥ã‚‹',target:'ãªã„-form',ans:'ã“ãªã„',opts:['ã“ãªã„','ããŸã„','ã“ã‚‰ã‚Œã‚‹','ãã¾ã™']},
    {v:'é£²ã‚€',target:'ãªã„-form',ans:'é£²ã¾ãªã„',opts:['é£²ã¾ãªã„','é£²ã¿ãŸã„','é£²ã‚ãªã„','é£²ã¿ã¾ã™']},
  ];
  let ntgS={qs:shuf(qs),idx:0,score:0,ans:false};
  function renderNTGQ(){
    if(ntgS.idx>=ntgS.qs.length){el.innerHTML=`<div style="text-align:center;padding:20px"><div style="font-size:48px">âœ…</div><div style="font-family:'Noto Serif JP';font-size:48px;color:var(--amber);font-weight:900">${ntgS.score}</div><div style="color:var(--text2);margin-top:8px">à¸„à¸°à¹à¸™à¸™</div><button class="btn bam" style="margin-top:14px" onclick="document.getElementById('nt-game-c').dataset.init='';initNTGame()">ğŸ”„ à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸</button></div>`;return;}
    const q=ntgS.qs[ntgS.idx];ntgS.ans=false;
    el.innerHTML=`<div class="sbar"><div>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ ${ntgS.idx+1}/${ntgS.qs.length}</div><div class="snum">${ntgS.score}</div></div>
      <div class="qchar">à¹€à¸¥à¸·à¸­à¸ <b style="color:var(--amber)">${q.target}</b> à¸‚à¸­à¸‡<br><span style="font-family:'Noto Serif JP';font-size:32px">${q.v}</span></div>
      <div class="qopts" id="ntg-opts"></div>`;
    const oc=document.getElementById('ntg-opts');
    q.opts.forEach(o=>{
      const b=document.createElement('div');b.className='qopt';b.style.fontFamily="'Noto Sans JP'";b.textContent=o;
      b.onclick=()=>{if(ntgS.ans)return;ntgS.ans=true;
        oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
        if(o===q.ans){ntgS.score+=10;showN('âœ“','ok');}else showN('âœ— '+q.ans,'bad');
        setTimeout(()=>{ntgS.idx++;renderNTGQ();},500);
      };oc.appendChild(b);
    });
  }
  renderNTGQ();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PARTICLE FILL GAME (inline for pt-game)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PF_D=[
  {s:'ç§',p:'ã¯',rest:'å­¦ç”Ÿã§ã™',note:'Topic marker'},{s:'çŒ«',p:'ãŒ',rest:'å¥½ãã§ã™',note:'suki uses ãŒ'},
  {s:'ã”é£¯',p:'ã‚’',rest:'é£Ÿã¹ã‚‹',note:'Direct object'},{s:'æ±äº¬',p:'ã«',rest:'è¡Œã',note:'Direction'},
  {s:'å­¦æ ¡',p:'ã§',rest:'å‹‰å¼·ã™ã‚‹',note:'Location of action'},{s:'å‹é”',p:'ã¨',rest:'éŠã¶',note:'With person'},
  {s:'æ±äº¬',p:'ã‹ã‚‰',rest:'æ¥ãŸ',note:'From'},{s:'ç§',p:'ã‚‚',rest:'è¡Œã',note:'Also/too'},
  {s:'ãƒã‚¹',p:'ã§',rest:'è¡Œã',note:'Means'},{s:'äº”æ™‚',p:'ã«',rest:'å¸°ã‚‹',note:'Time'},
  {s:'æœ¬æ£š',p:'ã«',rest:'æœ¬ãŒã‚ã‚‹',note:'Location of existence'},{s:'æ—¥æœ¬èª',p:'ã§',rest:'è©±ã™',note:'Language'},
];

function initPFill(containerId){
  const el=document.getElementById(containerId);if(!el||el.dataset.init==='1')return;
  el.dataset.init='1';
  let pfS={qs:shuf(PF_D),idx:0,score:0,tLeft:45,ans:false};
  el.innerHTML=`<div class="sbar"><div>ğŸ¯ Particle Fill â€” 45 à¸§à¸´à¸™à¸²à¸—à¸µ</div><div class="snum" id="pff-s">0</div><div style="font-size:11px" id="pff-t">45</div></div>
    <div class="pbar" style="margin-bottom:16px"><div class="pbf" style="width:100%" id="pff-pb"></div></div><div id="pff-q"></div>`;
  function render(){
    const q=pfS.qs[pfS.idx%pfS.qs.length];pfS.idx++;pfS.ans=false;
    const allP=['ã¯','ãŒ','ã‚’','ã«','ã§','ã®','ã¨','ã‹ã‚‰','ã¾ã§','ã‚‚'];
    const opts=shuf([q.p,...shuf(allP.filter(x=>x!==q.p)).slice(0,3)]);
    const qel=document.getElementById('pff-q');if(!qel)return;
    qel.innerHTML=`<div style="font-size:12px;color:var(--text2);margin-bottom:12px">à¹€à¸¥à¸·à¸­à¸ Particle à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡</div>
      <div class="qchar"><span style="font-family:'Noto Sans JP'">${q.s}</span><span style="font-family:'Noto Serif JP';font-size:20px;color:var(--amber);border-bottom:2px solid var(--amber);padding:0 8px;margin:0 2px">ã€€ã€€</span><span style="font-family:'Noto Sans JP'">${q.rest}</span></div>
      <div class="qopts" id="pff-opts"></div><div id="pff-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div>`;
    const oc=document.getElementById('pff-opts');
    opts.forEach(o=>{
      const b=document.createElement('div');b.className='qopt';b.style.cssText="font-family:'Noto Serif JP';font-size:22px;min-width:60px;text-align:center";b.textContent=o;
      b.onclick=()=>{if(pfS.ans)return;pfS.ans=true;
        oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.p)x.classList.add('ok');else if(x===b&&o!==q.p)x.classList.add('bad');});
        if(o===q.p){pfS.score+=10;document.getElementById('pff-s').textContent=pfS.score;showN('âœ“','ok');}else showN('âœ— '+q.p,'bad');
        document.getElementById('pff-fb').textContent='ğŸ’¡ '+q.p+' = '+q.note;
        setTimeout(render,450);
      };oc.appendChild(b);
    });
  }
  render();
  const tmr=setInterval(()=>{
    pfS.tLeft-=0.1;
    const t=document.getElementById('pff-t'),pb=document.getElementById('pff-pb');
    if(t){t.textContent=Math.ceil(pfS.tLeft);if(pfS.tLeft<=10)t.style.color='var(--red2)';}
    if(pb) pb.style.width=(pfS.tLeft/45*100)+'%';
    if(pfS.tLeft<=0){clearInterval(tmr);saveScore('pff',pfS.score);
      document.getElementById('pff-q').innerHTML=`<div style="text-align:center;padding:16px"><div style="font-size:48px">ğŸ†</div><div style="font-family:'Noto Serif JP';font-size:48px;color:var(--amber);font-weight:900">${pfS.score}</div><div style="color:var(--text2);margin-top:8px">Best: ${getScore('pff')}</div><button class="btn bam" style="margin-top:14px" onclick="document.getElementById('${containerId}').dataset.init='';initPFill('${containerId}')">ğŸ”„ à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸</button></div>`;}
  },100);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GAMES PAGE ENGINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let gActive=null,gTimer=null;
function buildHSGrid(){
  const el=document.getElementById('hs-grid');if(!el)return;
  const gs=[{id:'pf',n:'Particle Fill',i:'ğŸ¯'},{id:'cs',n:'Conj Speed',i:'âš¡'},{id:'sb',n:'Sent Builder',i:'ğŸ§©'},{id:'cm',n:'Cond Match',i:'ğŸ”—'},{id:'tc',n:'Translation',i:'ğŸŒ'}];
  el.innerHTML=gs.map(g=>`<div style="background:var(--ink3);border:1px solid var(--border);border-radius:8px;padding:10px;text-align:center"><div style="font-size:18px">${g.i}</div><div style="font-size:11px;font-weight:600;color:var(--white);margin-top:3px">${g.n}</div><div style="font-size:18px;color:var(--amber);font-family:'Noto Serif JP';font-weight:700">${getScore('g_'+g.id)||'â€”'}</div></div>`).join('');
  gs.forEach(g=>{const e=document.getElementById('hs-'+g.id);if(e)e.textContent=getScore('g_'+g.id)||'â€”';});
}

function gplay(id){
  gActive=id;if(gTimer){clearInterval(gTimer);gTimer=null;}
  document.getElementById('g-lobby').style.display='none';
  document.getElementById('g-arena').style.display='block';
  const titles={pf:'ğŸ¯ Particle Fill-in',cs:'âš¡ Conjugation Speed',sb:'ğŸ§© Sentence Builder',cm:'ğŸ”— Conditional Match',tc:'ğŸŒ Translation Challenge'};
  document.getElementById('g-title').textContent=titles[id]||id;
  ({pf:startGPF,cs:startGCS,sb:startGSB,cm:startGCM,tc:startGTC})[id]?.();
}

function gexit(){
  if(gTimer){clearInterval(gTimer);gTimer=null;}
  document.getElementById('g-lobby').style.display='block';
  document.getElementById('g-arena').style.display='none';
  document.getElementById('g-hud').innerHTML='';
  document.getElementById('g-content').innerHTML='';
  buildHSGrid();
}

function gover(id,score,extra){
  if(gTimer){clearInterval(gTimer);gTimer=null;}
  const hs=getScore('g_'+id);saveScore('g_'+id,score);const isNew=score>=hs&&score>0;
  document.getElementById('g-content').innerHTML=`<div style="text-align:center;max-width:360px;margin:0 auto;padding:22px"><div style="font-size:52px">${isNew?'ğŸ†':'ğŸ®'}</div><div style="font-size:12px;color:${isNew?'var(--amber)':'var(--text2)'};font-weight:700;letter-spacing:2px;margin:10px 0">${isNew?'ğŸ‰ NEW HIGH SCORE!':'GAME OVER'}</div><div style="font-family:'Noto Serif JP';font-size:66px;color:${isNew?'var(--amber)':'var(--white)'};font-weight:900;line-height:1">${score}</div>${extra?`<div style="font-size:12px;color:var(--text2);margin-top:6px">${extra}</div>`:''}<div style="font-size:10px;color:var(--text3);margin-top:3px">Best: ${Math.max(hs,score)}</div><div style="display:flex;gap:10px;justify-content:center;margin-top:20px"><button class="btn bam" onclick="gplay('${id}')">ğŸ”„ à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button><button class="btn bol" onclick="gexit()">â† à¹€à¸¥à¸·à¸­à¸à¹€à¸à¸¡à¸ªà¹Œ</button></div></div>`;
  document.getElementById('g-hud').innerHTML='';
}

// â”€â”€â”€ G1: PARTICLE FILL â”€â”€â”€
let gpf={};
function startGPF(){
  gpf={qs:shuf(PF_D),idx:0,score:0,tLeft:45,ans:false};
  document.getElementById('g-hud').innerHTML=`<div style="text-align:center"><div style="font-size:9px;color:var(--text2)">TIME</div><div style="font-size:22px;color:var(--amber);font-weight:900;font-family:'Noto Serif JP'" id="gpf-t">45</div></div><div style="text-align:center"><div style="font-size:9px;color:var(--text2)">SCORE</div><div style="font-size:22px;color:var(--red2);font-weight:900;font-family:'Noto Serif JP'" id="gpf-s">0</div></div>`;
  renderGPF();
  gTimer=setInterval(()=>{gpf.tLeft-=0.1;const t=document.getElementById('gpf-t');if(t){t.textContent=Math.ceil(gpf.tLeft);if(gpf.tLeft<=10)t.style.color='var(--red2)';}if(gpf.tLeft<=0)gover('pf',gpf.score,'à¸•à¸­à¸šà¸–à¸¹à¸ '+(gpf.score/10|0)+' à¸‚à¹‰à¸­');},100);
}
function renderGPF(){
  const c=document.getElementById('g-content');if(!c)return;
  gpf.ans=false;const q=gpf.qs[gpf.idx%gpf.qs.length];gpf.idx++;
  const allP=['ã¯','ãŒ','ã‚’','ã«','ã§','ã®','ã¨','ã‹ã‚‰','ã¾ã§','ã‚‚'];
  const opts=shuf([q.p,...shuf(allP.filter(x=>x!==q.p)).slice(0,3)]);
  c.innerHTML=`<div style="max-width:480px;margin:0 auto"><div style="font-size:12px;color:var(--text2);margin-bottom:10px">à¹€à¸¥à¸·à¸­à¸ Particle</div>
    <div class="qchar"><span style="font-family:'Noto Sans JP'">${q.s}</span><span style="font-family:'Noto Serif JP';font-size:20px;color:var(--amber);border-bottom:2px solid var(--amber);padding:0 8px;margin:0 2px">ã€€ã€€</span><span style="font-family:'Noto Sans JP'">${q.rest}</span></div>
    <div class="qopts" id="gpf-opts"></div><div id="gpf-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div></div>`;
  const oc=document.getElementById('gpf-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.cssText="font-family:'Noto Serif JP';font-size:22px;min-width:60px;text-align:center";b.textContent=o;
    b.onclick=()=>{if(gpf.ans)return;gpf.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.p)x.classList.add('ok');else if(x===b&&o!==q.p)x.classList.add('bad');});
      if(o===q.p){gpf.score+=10;document.getElementById('gpf-s').textContent=gpf.score;showN('âœ“','ok');}else showN('âœ— '+q.p,'bad');
      document.getElementById('gpf-fb').textContent='ğŸ’¡ '+q.p+' = '+q.note;setTimeout(renderGPF,400);};oc.appendChild(b);});
}

// â”€â”€â”€ G2: CONJUGATION SPEED â”€â”€â”€
let gcs={};
const GCS_D=[...VBG_D,{v:'æ³³ã',type:'U',form:'potential',ans:'æ³³ã’ã‚‹'},{v:'èµ·ãã‚‹',type:'RU',form:'ã¦-form',ans:'èµ·ãã¦'}];
function startGCS(){
  gcs={qs:shuf(GCS_D),idx:0,score:0,combo:0,tLeft:60,ans:false};
  document.getElementById('g-hud').innerHTML=`<div style="text-align:center"><div style="font-size:9px;color:var(--text2)">TIME</div><div style="font-size:22px;color:var(--amber);font-weight:900;font-family:'Noto Serif JP'" id="gcs-t">60</div></div><div style="text-align:center"><div style="font-size:9px;color:var(--text2)">SCORE</div><div style="font-size:22px;color:var(--red2);font-weight:900;font-family:'Noto Serif JP'" id="gcs-s">0</div></div><div style="text-align:center"><div style="font-size:9px;color:var(--text2)">COMBO</div><div style="font-size:22px;color:var(--jade2);font-weight:900;font-family:'Noto Serif JP'" id="gcs-c">x1</div></div>`;
  renderGCS();
  gTimer=setInterval(()=>{gcs.tLeft-=0.1;const t=document.getElementById('gcs-t');if(t){t.textContent=Math.ceil(gcs.tLeft);if(gcs.tLeft<=10)t.style.color='var(--red2)';}if(gcs.tLeft<=0)gover('cs',gcs.score,'Combo à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: '+gcs.combo);},100);
}
function renderGCS(){
  const c=document.getElementById('g-content');if(!c)return;
  gcs.ans=false;const q=gcs.qs[gcs.idx%gcs.qs.length];gcs.idx++;
  const typeTag={RU:'<span class="vtag vru">RU</span>',U:'<span class="vtag vu">U</span>',IRR:'<span class="vtag virr">IRR</span>'}[q.type];
  const wrongs=shuf(GCS_D.filter(x=>x.ans!==q.ans)).slice(0,3).map(x=>x.ans);
  const opts=shuf([q.ans,...wrongs]);
  c.innerHTML=`<div style="max-width:480px;margin:0 auto;text-align:center">${typeTag}<div style="font-family:'Noto Serif JP';font-size:52px;color:var(--white);margin:6px 0">${q.v}</div><div style="background:var(--amber);color:#000;border-radius:16px;padding:3px 14px;font-size:12px;font-weight:700;display:inline-block;margin-bottom:16px">${q.form}</div>
    <div class="qopts" id="gcs-opts" style="justify-content:center"></div><div id="gcs-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div></div>`;
  const oc=document.getElementById('gcs-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.fontFamily="'Noto Sans JP'";b.textContent=o;
    b.onclick=()=>{if(gcs.ans)return;gcs.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){gcs.combo++;gcs.score+=10*(gcs.combo>=3?2:1);showN('âœ“'+(gcs.combo>=3?' COMBOÃ—2':''),'ok');}else{gcs.combo=0;showN('âœ— '+q.ans,'bad');}
      document.getElementById('gcs-s').textContent=gcs.score;document.getElementById('gcs-c').textContent='x'+(gcs.combo||1);setTimeout(renderGCS,360);};oc.appendChild(b);});
}

// â”€â”€â”€ G3: SENTENCE BUILDER â”€â”€â”€
const GSB_D=[
  {w:['ç§','ã¯','å­¦ç”Ÿ','ã§ã™'],th:'à¸‰à¸±à¸™à¹€à¸›à¹‡à¸™à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™'},
  {w:['ã”é£¯','ã‚’','é£Ÿã¹','ã¾ã™'],th:'à¸à¸´à¸™à¸‚à¹‰à¸²à¸§'},
  {w:['æ±äº¬','ã«','è¡Œã'],th:'à¹„à¸›à¹‚à¸•à¹€à¸à¸µà¸¢à¸§'},
  {w:['å­¦æ ¡','ã§','å‹‰å¼·','ã™ã‚‹'],th:'à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆà¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™'},
  {w:['å‹é”','ã¨','éŠã¶'],th:'à¹€à¸¥à¹ˆà¸™à¸à¸±à¸šà¹€à¸à¸·à¹ˆà¸­à¸™'},
  {w:['æ—¥æœ¬èª','ãŒ','å¥½ã','ã§ã™'],th:'à¸Šà¸­à¸šà¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™'},
  {w:['æ˜ ç”»','ã‚’','è¦‹','ãŸã„'],th:'à¸­à¸¢à¸²à¸à¸”à¸¹à¸«à¸™à¸±à¸‡'},
  {w:['ã‚‚ã£ã¨','å¼·ã','ãªã‚Š','ãŸã„'],th:'à¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡à¸à¸§à¹ˆà¸²à¸™à¸µà¹‰'},
];
let gsb={};
function startGSB(){gsb={qs:shuf(GSB_D),idx:0,score:0,ans:[]};renderGSB();}
function renderGSB(){
  const c=document.getElementById('g-content');if(!c)return;
  const q=gsb.qs[gsb.idx%gsb.qs.length];gsb.ans=[];
  document.getElementById('g-hud').innerHTML=`<div style="text-align:center"><div style="font-size:9px;color:var(--text2)">SCORE</div><div style="font-size:22px;color:var(--amber);font-weight:900;font-family:'Noto Serif JP'" id="gsb-s">${gsb.score}</div></div>`;
  c.innerHTML=`<div style="max-width:540px;margin:0 auto"><div style="font-size:12px;color:var(--text2);margin-bottom:8px">à¹€à¸£à¸µà¸¢à¸‡à¸„à¸³à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¹‚à¸¢à¸„:</div>
    <div style="font-size:16px;color:var(--amber2);background:var(--ink3);border-radius:8px;padding:10px 14px;margin-bottom:12px;font-weight:700">${q.th}</div>
    <div class="azone" id="gsb-ans"><span class="aph">à¸„à¸¥à¸´à¸à¸„à¸³à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸‡...</span></div>
    <div class="wbank" id="gsb-bank"></div>
    <div id="gsb-fb" style="min-height:24px;font-size:13px;font-weight:700;margin-top:10px"></div>
    <div style="display:flex;gap:8px;margin-top:10px">
      <button class="btn bjd" onclick="checkGSB()" style="font-size:12px">âœ“ à¸•à¸£à¸§à¸ˆ</button>
      <button class="btn bol" onclick="resetGSBQ()" style="font-size:12px">ğŸ”„ à¸£à¸µà¹€à¸‹à¹‡à¸•</button>
      <button class="btn bam" id="gsb-nxt" style="display:none;font-size:12px" onclick="nextGSB()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button>
    </div></div>`;
  const bank=document.getElementById('gsb-bank');
  shuf([...q.w]).forEach(w=>{
    const t=document.createElement('div');t.className='wtok';t.textContent=w;t.dataset.orig=w;
    t.onclick=()=>{if(t.classList.contains('used'))return;t.classList.add('used');gsb.ans.push(w);const az=document.getElementById('gsb-ans');const ph=az.querySelector('.aph');if(ph)ph.remove();const at=document.createElement('div');at.className='wtok inans';at.textContent=w;at.onclick=()=>{const i=gsb.ans.lastIndexOf(w);if(i>-1)gsb.ans.splice(i,1);at.remove();t.classList.remove('used');if(az.children.length===0)az.innerHTML='<span class="aph">à¸„à¸¥à¸´à¸à¸„à¸³à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸‡...</span>';};az.appendChild(at);};
    bank.appendChild(t);
  });
  gsb.currentQ=q;
}
function checkGSB(){const q=gsb.currentQ;const ok=gsb.ans.join('')===q.w.join('');const fb=document.getElementById('gsb-fb');const nxt=document.getElementById('gsb-nxt');if(ok){gsb.score+=15;if(fb){fb.textContent='âœ“ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡! +15';fb.style.color='var(--jade2)';}document.getElementById('gsb-s').textContent=gsb.score;if(nxt)nxt.style.display='block';showN('âœ“','ok');}else{if(fb){fb.textContent='âœ— à¹„à¸¡à¹ˆà¸–à¸¹à¸ â€” à¸„à¸³à¸•à¸­à¸š: '+q.w.join(' ');fb.style.color='var(--red2)';}showN('âœ—','bad');}}
function resetGSBQ(){document.querySelectorAll('.wtok.used').forEach(t=>t.classList.remove('used'));gsb.ans=[];const az=document.getElementById('gsb-ans');az.innerHTML='<span class="aph">à¸„à¸¥à¸´à¸à¸„à¸³à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸‡...</span>';const fb=document.getElementById('gsb-fb');if(fb)fb.textContent='';const nxt=document.getElementById('gsb-nxt');if(nxt)nxt.style.display='none';}
function nextGSB(){gsb.idx++;if(gsb.idx>=gsb.qs.length){gover('sb',gsb.score,'à¸•à¸­à¸šà¸–à¸¹à¸ '+(gsb.score/15|0)+'/'+gsb.qs.length);return;}renderGSB();}

// â”€â”€â”€ G4: CONDITIONAL MATCH â”€â”€â”€
const GCM_D=[
  {s:'æ˜¥ã«ãªã‚‹___æ¡œãŒå’²ã',ans:'ã¨',why:'à¸à¸à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´'},
  {s:'ãŠé‡‘ãŒã‚ã£___æ—…è¡Œã™ã‚‹',ans:'ãŸã‚‰',why:'à¸ªà¸¡à¸¡à¸•à¸´à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ'},
  {s:'æ—©ãèµ·ã___é–“ã«åˆã†',ans:'ã‚Œã°',why:'à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸„à¸³à¹à¸™à¸°à¸™à¸³'},
  {s:'ã“ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™___é›»æ°—ãŒã¤ã',ans:'ã¨',why:'cause-effect à¹à¸™à¹ˆà¸™à¸­à¸™'},
  {s:'å®¶ã«å¸°ã£___é›»è©±ã—ã¦',ans:'ãŸã‚‰',why:'à¸à¸­à¸—à¸³à¹à¸¥à¹‰à¸§ + request'},
  {s:'å®‰___è²·ã†',ans:'ã‘ã‚Œã°',why:'adj ã„ conditional'},
  {s:'ã‚‚ã—å½¼å¥³ã ã£___ã©ã†ã™ã‚‹ï¼Ÿ',ans:'ãŸã‚‰',why:'à¸ªà¸¡à¸¡à¸•à¸´ hypothetical'},
  {s:'æ—©ãæ¥___ä¸€ç·’ã«è¡Œã‘ã‚‹',ans:'ã‚Œã°',why:'à¸–à¹‰à¸²...à¸à¹‡à¸—à¸³à¹„à¸”à¹‰'},
];
let gcm={};
function startGCM(){gcm={qs:shuf(GCM_D),idx:0,score:0,ans:false};document.getElementById('g-hud').innerHTML=`<div style="text-align:center"><div style="font-size:9px;color:var(--text2)">SCORE</div><div style="font-size:22px;color:var(--amber);font-weight:900;font-family:'Noto Serif JP'" id="gcm-s">0</div></div>`;renderGCM();}
function renderGCM(){
  const c=document.getElementById('g-content');if(!c)return;gcm.ans=false;
  if(gcm.idx>=gcm.qs.length){gover('cm',gcm.score,'à¸•à¸­à¸šà¸–à¸¹à¸ '+(gcm.score/12|0)+'/'+gcm.qs.length);return;}
  const q=gcm.qs[gcm.idx];
  const allC=['ã¨','ãŸã‚‰','ã‚Œã°','ã‘ã‚Œã°','ãªã‚‰'];
  const opts=shuf([q.ans,...shuf(allC.filter(x=>x!==q.ans)).slice(0,3)]);
  c.innerHTML=`<div style="max-width:480px;margin:0 auto"><div style="font-size:12px;color:var(--text2);margin-bottom:10px">à¹€à¸¥à¸·à¸­à¸ Conditional à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡</div>
    <div class="qchar"><span style="font-family:'Noto Sans JP'">${q.s.replace('___','<span style="font-family:\'Noto Serif JP\';font-size:20px;color:var(--amber);border-bottom:2px solid var(--amber);padding:0 8px;margin:0 2px">ã€€ã€€</span>')}</span></div>
    <div class="qopts" id="gcm-opts"></div><div id="gcm-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div>
    <button class="btn bam" id="gcm-nxt" style="display:none;margin-top:10px" onclick="gcm.idx++;renderGCM()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button></div>`;
  const oc=document.getElementById('gcm-opts');
  opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.cssText="font-family:'Noto Serif JP';font-size:20px;min-width:70px;text-align:center";b.textContent=o;
    b.onclick=()=>{if(gcm.ans)return;gcm.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){gcm.score+=12;document.getElementById('gcm-s').textContent=gcm.score;showN('âœ“','ok');}else showN('âœ— '+q.ans,'bad');
      document.getElementById('gcm-fb').textContent='ğŸ’¡ '+q.ans+' = '+q.why;document.getElementById('gcm-nxt').style.display='block';};oc.appendChild(b);});
}

// â”€â”€â”€ G5: TRANSLATION CHALLENGE â”€â”€â”€
const GTC_D=[
  {j:'é£Ÿã¹ãŸããªã„',opts:['à¸­à¸¢à¸²à¸à¸à¸´à¸™','à¹„à¸¡à¹ˆà¸­à¸¢à¸²à¸à¸à¸´à¸™','à¸à¸´à¸™à¹à¸¥à¹‰à¸§','à¸à¸´à¸™à¹„à¸”à¹‰'],ans:'à¹„à¸¡à¹ˆà¸­à¸¢à¸²à¸à¸à¸´à¸™'},
  {j:'è©±ã›ã‚‹',opts:['à¸à¸¹à¸”à¹à¸¥à¹‰à¸§','à¹„à¸¡à¹ˆà¸à¸¹à¸”','à¸à¸¹à¸”à¹„à¸”à¹‰','à¸­à¸¢à¸²à¸à¸à¸¹à¸”'],ans:'à¸à¸¹à¸”à¹„à¸”à¹‰'},
  {j:'è¡Œã‹ãªã„',opts:['à¹„à¸›à¹à¸¥à¹‰à¸§','à¸­à¸¢à¸²à¸à¹„à¸›','à¹„à¸¡à¹ˆà¹„à¸›','à¹„à¸›à¹„à¸”à¹‰'],ans:'à¹„à¸¡à¹ˆà¹„à¸›'},
  {j:'é£Ÿã¹ãŸã‚‰å¸°ã‚‹',opts:['à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸à¸¥à¸±à¸š','à¸–à¹‰à¸²à¸à¸´à¸™à¸à¹‡à¹„à¸¡à¹ˆà¸à¸¥à¸±à¸š','à¸à¸¥à¸±à¸šà¹à¸¥à¹‰à¸§à¸à¸´à¸™','à¸à¸´à¸™à¹€à¸à¸£à¸²à¸°à¸à¸¥à¸±à¸š'],ans:'à¸à¸´à¸™à¹à¸¥à¹‰à¸§à¸à¸¥à¸±à¸š'},
  {j:'å¼·ããªã‚ŠãŸã„',opts:['à¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡à¸‚à¸¶à¹‰à¸™','à¹€à¸à¹ˆà¸‡à¸‚à¸¶à¹‰à¸™à¹à¸¥à¹‰à¸§','à¹„à¸¡à¹ˆà¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡','à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸'],ans:'à¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡à¸‚à¸¶à¹‰à¸™'},
  {j:'ã§ããªã„',opts:['à¸—à¸³à¹„à¸”à¹‰','à¸—à¸³à¹à¸¥à¹‰à¸§','à¹„à¸¡à¹ˆà¸—à¸³','à¸—à¸³à¹„à¸¡à¹ˆà¹„à¸”à¹‰'],ans:'à¸—à¸³à¹„à¸¡à¹ˆà¹„à¸”à¹‰'},
  {j:'ã„ã„å¤©æ°—ã§ã™ã­',opts:['à¸­à¸²à¸à¸²à¸¨à¸£à¹‰à¸­à¸™à¸™à¸°','à¸­à¸²à¸à¸²à¸¨à¸”à¸µà¸™à¸°','à¸à¸™à¸•à¸à¸™à¸°','à¸«à¸™à¸²à¸§à¸™à¸°'],ans:'à¸­à¸²à¸à¸²à¸¨à¸”à¸µà¸™à¸°'},
  {j:'å±ãªã„ã‚ˆï¼',opts:['à¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¸™à¸° (à¸šà¸­à¸)','à¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¹„à¸«à¸¡?','à¹„à¸¡à¹ˆà¸­à¸±à¸™à¸•à¸£à¸²à¸¢','à¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¸¡à¸²à¸'],ans:'à¸­à¸±à¸™à¸•à¸£à¸²à¸¢à¸™à¸° (à¸šà¸­à¸)'},
  {j:'æ—©ãèµ·ãã‚Œã°é–“ã«åˆã†',opts:['à¸–à¹‰à¸²à¸•à¸·à¹ˆà¸™à¹€à¸£à¹‡à¸§à¸à¹‡à¸—à¸±à¸™','à¸•à¸·à¹ˆà¸™à¹€à¸£à¹‡à¸§à¸—à¸±à¸™à¹à¸¥à¹‰à¸§','à¸•à¸·à¹ˆà¸™à¸Šà¹‰à¸²à¸à¹‡à¸—à¸±à¸™','à¹„à¸¡à¹ˆà¸—à¸±à¸™à¸–à¹‰à¸²à¸•à¸·à¹ˆà¸™'],ans:'à¸–à¹‰à¸²à¸•à¸·à¹ˆà¸™à¹€à¸£à¹‡à¸§à¸à¹‡à¸—à¸±à¸™'},
  {j:'çŸ¥ã£ã¦ã‚‹ã‚ˆï¼',opts:['à¸£à¸¹à¹‰à¹„à¸«à¸¡?','à¸£à¸¹à¹‰à¹à¸¥à¹‰à¸§! (à¹€à¸™à¹‰à¸™)','à¹„à¸¡à¹ˆà¸£à¸¹à¹‰','à¸­à¸¢à¸²à¸à¸£à¸¹à¹‰'],ans:'à¸£à¸¹à¹‰à¹à¸¥à¹‰à¸§! (à¹€à¸™à¹‰à¸™)'},
];
let gtc={};
function startGTC(){gtc={qs:shuf(GTC_D),idx:0,score:0,ans:false};document.getElementById('g-hud').innerHTML=`<div style="text-align:center"><div style="font-size:9px;color:var(--text2)">SCORE</div><div style="font-size:22px;color:var(--amber);font-weight:900;font-family:'Noto Serif JP'" id="gtc-s">0</div></div><div style="text-align:center"><div style="font-size:9px;color:var(--text2)">à¸‚à¹‰à¸­à¸—à¸µà¹ˆ</div><div style="font-size:22px;color:var(--text2);font-weight:900;font-family:'Noto Serif JP'" id="gtc-i">1/10</div></div>`;renderGTC();}
function renderGTC(){
  const c=document.getElementById('g-content');if(!c)return;gtc.ans=false;
  if(gtc.idx>=gtc.qs.length){gover('tc',gtc.score,'à¸•à¸­à¸šà¸–à¸¹à¸ '+(gtc.score/12|0)+'/'+gtc.qs.length);return;}
  const q=gtc.qs[gtc.idx];document.getElementById('gtc-i').textContent=(gtc.idx+1)+'/'+gtc.qs.length;
  c.innerHTML=`<div style="max-width:480px;margin:0 auto"><div style="font-size:12px;color:var(--text2);margin-bottom:10px">à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¹à¸›à¸¥à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</div>
    <div class="qchar" style="text-align:center;font-family:'Noto Sans JP';font-size:24px">${q.j}</div>
    <div class="qopts" id="gtc-opts"></div><div id="gtc-fb" style="min-height:22px;font-size:13px;color:var(--text2);margin-top:7px"></div>
    <button class="btn bam" id="gtc-nxt" style="display:none;margin-top:10px" onclick="gtc.idx++;renderGTC()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button></div>`;
  const oc=document.getElementById('gtc-opts');
  q.opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.fontFamily="'Sarabun'";b.textContent=o;
    b.onclick=()=>{if(gtc.ans)return;gtc.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){gtc.score+=12;document.getElementById('gtc-s').textContent=gtc.score;showN('âœ“','ok');}else showN('âœ—','bad');
      document.getElementById('gtc-nxt').style.display='block';};oc.appendChild(b);});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MASTER QUIZ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let mqS={};
function startMQ(){
  document.getElementById('mq-start').style.display='none';
  document.getElementById('mq-game').style.display='block';
  mqS={qs:shuf(MQ_ALL).slice(0,20),idx:0,score:0,ans:false};
  renderMQ();
}
function renderMQ(){
  const el=document.getElementById('mq-game');if(!el)return;
  if(mqS.idx>=mqS.qs.length){showMQResult();return;}
  const q=mqS.qs[mqS.idx];mqS.ans=false;
  const mqJP=q.q.split(/\s*[â€”â€“-]\s*/)[0].trim();
  el.innerHTML=`<div class="sbar"><div>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span style="color:var(--amber)">${mqS.idx+1}</span>/20</div><div class="snum">${mqS.score}</div><div>à¸„à¸°à¹à¸™à¸™</div></div>
    <div class="pbar" style="margin-bottom:18px"><div class="pbf" style="width:${(mqS.idx/20)*100}%"></div></div>
    <div class="qchar" style="white-space:pre-wrap">${q.q} <button class="speak-btn" onclick="speakJP('${mqJP.replace(/'/g,"\\'")}')" title="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡">ğŸ”Š</button></div>
    <div class="qopts" id="mq-opts"></div>
    <div id="mq-note" style="min-height:24px;font-size:13px;color:var(--text2);margin-top:7px"></div>
    <button class="btn bam" id="mq-nxt" style="display:none;margin-top:12px" onclick="mqNext()">à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¹„à¸› â†’</button>`;
  speakJP(mqJP);
  const oc=document.getElementById('mq-opts');
  q.opts.forEach(o=>{const b=document.createElement('div');b.className='qopt';b.style.fontFamily=/[\u3040-\u30ff\u4e00-\u9fff]/.test(o)?'"Noto Sans JP"':'"Sarabun"';b.textContent=o;
    b.onclick=()=>{if(mqS.ans)return;mqS.ans=true;oc.querySelectorAll('.qopt').forEach(x=>{x.onclick=null;if(x.textContent===q.ans)x.classList.add('ok');else if(x===b&&o!==q.ans)x.classList.add('bad');});
      if(o===q.ans){mqS.score+=10;showN('âœ“','ok');}else showN('âœ—','bad');
      document.getElementById('mq-note').textContent='ğŸ’¡ '+q.note;document.getElementById('mq-nxt').style.display='block';};oc.appendChild(b);});
}
function mqNext(){mqS.idx++;renderMQ();}
function showMQResult(){
  document.getElementById('mq-game').style.display='none';const el=document.getElementById('mq-result');el.style.display='block';
  const pct=Math.round(mqS.score/200*100);const emoji=pct>=90?'ğŸ†':pct>=70?'ğŸ‰':pct>=50?'ğŸ˜Š':'ğŸ’ª';
  const msg=pct>=90?'Grammar Master! à¸¢à¸­à¸”à¹€à¸¢à¸µà¹ˆà¸¢à¸¡à¸¡à¸²à¸!':pct>=70?'à¸”à¸µà¸¡à¸²à¸ à¹ƒà¸à¸¥à¹‰à¹à¸¥à¹‰à¸§!':pct>=50?'à¸à¸­à¹„à¸”à¹‰ à¸—à¸šà¸—à¸§à¸™à¹€à¸à¸´à¹ˆà¸¡à¸™à¸°':'à¸¢à¸±à¸‡à¸•à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™à¹€à¸à¸´à¹ˆà¸¡à¸­à¸µà¸';
  const hs=getScore('mq');saveScore('mq',mqS.score);const isNew=mqS.score>=hs&&mqS.score>0;
  document.getElementById('mq-hs').textContent=Math.max(hs,mqS.score);
  el.innerHTML=`<div style="text-align:center;max-width:420px;margin:0 auto;padding:24px">
    <div style="font-size:60px">${emoji}</div>
    <div style="font-size:12px;color:${isNew?'var(--amber)':'var(--text2)'};font-weight:700;letter-spacing:2px;margin:12px 0">${isNew?'ğŸ‰ NEW HIGH SCORE!':'RESULT'}</div>
    <div style="font-family:'Noto Serif JP';font-size:80px;color:${isNew?'var(--amber)':'var(--white)'};font-weight:900;line-height:1">${mqS.score}</div>
    <div style="font-size:14px;color:var(--text2);margin-top:8px">${mqS.score}/200 â€” ${pct}%</div>
    <div style="font-size:16px;color:var(--white);margin-top:8px">${msg}</div>
    <div style="display:flex;gap:12px;justify-content:center;margin-top:24px">
      <button class="btn bam" onclick="document.getElementById('mq-result').style.display='none';document.getElementById('mq-game').style.display='none';document.getElementById('mq-start').style.display='block'">ğŸ”„ à¸—à¸³à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
      <button class="btn bol" onclick="nav('home')">ğŸ  à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</button>
    </div>
  </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.onload=()=>{
  localStorage.setItem('lastPage','grammar-stage2.html');
  initHomeProgress();
  const hs=getScore('mq');document.getElementById('mq-hs').textContent=hs||'â€”';
};
</script>

<style>
#yor-credit{position:fixed;bottom:0;left:0;right:0;background:rgba(10,10,15,.92);backdrop-filter:blur(10px);border-top:1px solid rgba(232,84,122,.2);padding:5px 16px;display:flex;align-items:center;justify-content:space-between;z-index:9999;font-family:'Sarabun',sans-serif;flex-wrap:wrap;gap:6px}
#yor-credit .yc-left{display:flex;align-items:center;gap:10px}
#yor-credit .yc-name{font-size:12px;font-weight:700;color:#e8547a;letter-spacing:.5px}
#yor-credit .yc-stage{font-size:10px;color:rgba(200,200,232,.5);font-family:'DM Mono',monospace}
#yor-credit .yc-back{font-size:10px;color:rgba(200,200,232,.5);text-decoration:none;border:1px solid rgba(232,84,122,.3);border-radius:6px;padding:3px 10px;transition:all .2s}
#yor-credit .yc-back:hover{color:#e8547a;border-color:#e8547a}
#yor-credit .yc-dash{font-size:10px;color:rgba(200,180,255,.5);text-decoration:none;border:1px solid rgba(155,122,255,.3);border-radius:6px;padding:3px 10px;transition:all .2s}
#yor-credit .yc-dash:hover{color:#c8a8ff;border-color:rgba(155,122,255,.8);background:rgba(155,122,255,.08)}
body{padding-bottom:60px}
</style>
<div id="yor-credit">
  <div class="yc-left">
    <span class="yc-name">Yor</span>
    <span class="yc-stage">æ–‡æ³•é“å ´ Stage 2 â€” Grammar N5â†’N4 &nbsp;Â·&nbsp; Yor's Road to Reading Japanese Manga</span>
  </div>
  <div style="display:flex;align-items:center;gap:6px">
    <a class="yc-dash" href="dashboard.html" onclick="sessionStorage.setItem('db_from','stage2')">ğŸ“Š Dashboard</a>
    <a class="yc-back" href="index.html">â† Portal</a>
</div>
  </div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FIREBASE â€” loaded from firebase.js
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
@keyframes fbShimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
@keyframes fbPulse{0%{opacity:1}50%{opacity:.4}100%{opacity:1}}
#fb-login-overlay{position:fixed;inset:0;background:rgba(5,5,15,.93);backdrop-filter:blur(16px);z-index:99999;display:flex;align-items:center;justify-content:center;font-family:'Sarabun',sans-serif}
#fb-login-box{background:#0f0f1a;border:1px solid rgba(232,84,122,.3);border-radius:20px;padding:36px 40px;text-align:center;max-width:380px;width:90%}
#fb-login-box .fb-logo{font-size:48px;margin-bottom:12px}
#fb-login-box .fb-title{font-size:22px;font-weight:700;color:#fff;margin-bottom:6px}
#fb-login-box .fb-sub{font-size:13px;color:rgba(200,200,240,.5);margin-bottom:24px;line-height:1.7}
#fb-google-btn{display:flex;align-items:center;gap:10px;justify-content:center;background:#fff;color:#333;border:none;border-radius:10px;padding:12px 24px;font-size:14px;font-weight:700;cursor:pointer;width:100%;transition:all .2s;font-family:'Sarabun',sans-serif}
#fb-google-btn:hover{background:#f0f0f0;transform:translateY(-2px);box-shadow:0 4px 16px rgba(255,255,255,.15)}
#fb-google-btn img{width:20px;height:20px}
#fb-skip{display:block;margin-top:14px;font-size:11px;color:rgba(200,200,240,.35);cursor:pointer;text-decoration:underline;transition:color .2s}
#fb-skip:hover{color:rgba(200,200,240,.7)}
</style>

<div id="fb-login-overlay">
  <div id="fb-login-box">
    <div class="fb-logo">ğŸŒ</div>
    <div class="fb-title">Yor's Road to Manga</div>
    <div class="fb-sub">Login à¸”à¹‰à¸§à¸¢ Google à¹€à¸à¸·à¹ˆà¸­ sync progress<br>à¸‚à¹‰à¸²à¸¡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ à¸‚à¹‰à¸²à¸¡ Browser à¹„à¸”à¹‰à¸—à¸¸à¸à¸—à¸µà¹ˆ</div>
    <button id="fb-google-btn" onclick="fbSignIn()">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
      Login à¸”à¹‰à¸§à¸¢ Google
    </button>
    <span id="fb-skip" onclick="fbSkip()">à¸‚à¹‰à¸²à¸¡à¹„à¸›à¸à¹ˆà¸­à¸™ (à¹„à¸¡à¹ˆ sync)</span>
  </div>
</div>

<script type="module" src="firebase.js"></script>

</body>
</html>
